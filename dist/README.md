# 🎬 SiYuan Media Player

## 📚 Quick Navigation

📖 [Help Documentation](https://vcne5rvqxi9z.feishu.cn/wiki/KZSMwZk7JiyzFtkgmPUc8rHxnVh) | 💬 [Feedback & Discussion](https://vcne5rvqxi9z.feishu.cn/wiki/KZSMwZk7JiyzFtkgmPUc8rHxnVh#share-JcVadDDYzoViQNxltupcIrJxnSg) | 📋 [Changelog](https://vcne5rvqxi9z.feishu.cn/wiki/FEDdw8o7ti1IPpkJLjXcNX7En6d) | 👏 [Acknowledgments](https://vcne5rvqxi9z.feishu.cn/wiki/KZSMwZk7JiyzFtkgmPUc8rHxnVh#share-PKecdG4eboPDjAxo4Apc0vuTnJb)

> For detailed information about the latest features and improvements, please refer to the [Changelog](https://vcne5rvqxi9z.feishu.cn/wiki/FEDdw8o7ti1IPpkJLjXcNX7En6d).

## 🧧 Support & Donations

<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
  <div style="text-align: center; margin: 10px;">
    <img src="/plugins/siyuan-media-player/assets/images/alipay.jpg" alt="Alipay QR Code" width="300" />
    <p>Alipay</p>
  </div>
  <div style="text-align: center; margin: 10px;">
    <img src="/plugins/siyuan-media-player/assets/images/wechat.jpg" alt="WeChat QR Code" width="300" />
    <p>WeChat</p>
  </div>
</div>

## 🚀 Recent Updates

**Version 0.3.0:**
- **🎯 Bilibili Danmaku Support**: Added support for Bilibili video bullet comments
- **✨ Pro Features**: Introduced optional Pro features
- **🔖 Enhanced Bilibili Favorites**: Direct selection for adding to playlist
- **🧠 Media Assistant**: Subtitle browsing and video summary features
- **💬 Subtitle Support**: Support for both local media and Bilibili videos
- **📑 Video Summary**: AI-generated video content overview (Bilibili videos only for now)

## 🎯 Feature Overview

SiYuan Media Player is a powerful multimedia playback plugin that helps you conveniently play, manage, and reference various media resources within SiYuan notes.

### 🎥 Video Playback

- **📁 Local Video Support**: Play local video files with support for various common video formats
- **🅱️ Bilibili Video Support**: Play Bilibili videos directly without leaving SiYuan notes
- **💬 Automatic Subtitle Detection**: Automatically detect and load matching subtitle files
- **💭 Danmaku Support**: Display Bilibili video danmaku (bullet comments) for an authentic viewing experience
- **🎛️ Multiple Playback Controls**: Time navigation, volume adjustment, playback speed, fullscreen and more

### 📋 Playlist Management

- **📚 Multiple Playlist Management**: Create and manage multiple playlists for organizing media by category
- **👁️ View Mode Switching**: Support for detailed view, compact view, grid view, and cover view
- **📥 Batch Import**: One-click import of Bilibili favorites or local folders to playlists

### 📝 Note Integration Features

- **⏱️ Timestamp Links**: Generate links pointing to specific timestamps in videos, inserted into notes
- **🔄 Loop Segments**: Create links that loop specific segments of videos, useful for repeated learning
- **📸 Video Screenshots**: Capture video frames and insert them directly into notes
- **🖊️ Flexible Insertion Options**: Choose to insert at cursor position or copy to clipboard

### ✨ Advanced Features (Pro Version)

- **🧠 Media Assistant**:
  - 📜 Subtitle List: Easily browse and search video subtitle content
  - 📊 Video Summary: AI-generated video content summaries for quick understanding of key points
  - 📤 One-click Export: Export subtitle and summary content to notes
- **🔖 Tag Extensions**:
  - 📂 Local Folders: Directly browse and manage local media files
  - 🌟 Bilibili Favorites: Seamless integration of Bilibili favorite content
  - 🚀 More features in development...

## 📖 How to Use

### 🎬 Playing Local Videos

1. Click the "Add Media" button in the player window
2. Select a local video file
3. The player will automatically detect and load same-named subtitle files (if available)
4. Use the player control bar to control playback

### 🅱️ Playing Bilibili Videos

1. Copy the Bilibili video link (supports standard links and short links)
2. Click the "Add Media" button in the player
3. Paste the link and confirm
4. The player will automatically load the video, subtitles, and danmaku

### ⏱️ Creating Timestamps and Loop Segments

1. Play the video to the position you want to mark
2. Click the timestamp button to create a timestamp, or click the loop segment button to set a start point
3. If creating a loop segment, continue playing to the end position and click the loop segment button again
4. The generated link will be automatically copied to the clipboard or inserted at the cursor position (based on settings)

### 📂 Importing Bilibili Favorites

1. Log in to your Bilibili account (in the settings panel)
2. Select "Add Bilibili Favorites" in the playlist panel
3. Choose the favorite folder to import
4. Confirm the import, videos will be batch added to the current playlist

### 🧠 Using Media Assistant (Pro Version)

1. Click the Media Assistant button in the control bar while playing a video
2. Browse the subtitle list or view the video summary in the assistant panel
3. Click on subtitle entries to jump to the corresponding timestamp
4. Use the export button to export content to your notes

### 👤 Managing Bilibili Account

1. Find the Bilibili account section in the settings panel
2. Click the login button to display a QR code
3. Scan the QR code using the Bilibili mobile app to log in
4. After logging in, you can access and import your personal favorite folders

## ⌨️ Keyboard Shortcuts

### 🎮 Built-in Player Shortcuts (Artplayer)

- **Space**: Toggle play/pause
- **Arrow Left/Right**: Rewind/Fast forward
- **Arrow Up/Down**: Increase/Decrease volume

### ⚙️ Custom Shortcuts

You can customize keyboard shortcuts for the following features in SiYuan settings:

1. Open SiYuan Settings > Shortcuts
2. Search for "Media Player" or "siyuan-media-player"
3. Set custom shortcuts for these functions:
   - **⏱️ Create Timestamp**: Generate a link for the current playback time
   - **🔄 Create Loop Segment**: Set start and end points for loop playback
   - **📸 Take Screenshot**: Capture the current video frame
   - **🧠 Toggle Media Assistant**: Show or hide the subtitles and summary panel (Pro version)

Custom shortcuts allow you to quickly perform common actions without using the mouse.

## ⚙️ Setting Options

### 🛠️ General Settings

- **🔊 Volume**: Set default playback volume
- **⏩ Playback Speed**: Set default playback speed
- **🔁 Loop Count**: Set the number of times to loop a segment
- **💬 Show Subtitles**: Whether to display subtitles by default
- **💭 Enable Danmaku**: Whether to display danmaku by default

### 🎛️ Player Settings

- **📺 Player Selection**: Choose to use the built-in player, PotPlayer, or browser
- **📌 Link Insertion Method**: Choose to insert at cursor position or copy to clipboard
- **🔗 Link Format**: Customize the generated link format, with support for adding emojis

## ❓ Common Issues

### 🎬 Video Won't Play

- Check if your network connection is working properly
- For Bilibili videos, try refreshing or re-adding the link
- Confirm if the video format is supported

### 💬 Subtitles Not Showing

- Confirm that the subtitle file has the same name as the video file and is in the same directory
- Check if the subtitle file format is .srt, .vtt, or .ass
- Verify that the "Show Subtitles" option is enabled in settings

### 💭 Danmaku Not Showing

- Confirm that the "Enable Danmaku" option is enabled
- Only Bilibili videos support the danmaku feature
- Some videos may not have danmaku data

### 📂 Failed to Import Favorites

- Confirm you are logged into your Bilibili account
- Check your network connection
- Try logging in to your account again

## 💡 Advanced Tips

### 🔗 Custom Link Format

In settings, you can customize the display format of timestamp links. For example:

```
- [😄Title Time Subtitle](Link)  // Link with emoji
> 🕒 Time | Title | Subtitle     // Quote-formatted link
```

### 📚 Multiple Playlist Management

- Create theme-related playlists, such as "Study Materials," "Entertainment Videos," etc.
- Use the pin feature to keep frequently used lists at the top
- Regularly organize and clean up media content that is no longer needed

### 📥 Batch Processing Tips

- Use the local folder import feature to add multiple videos at once
- Use Bilibili favorites import to quickly add series videos
- Switch between view modes to efficiently browse and manage media in different scenarios

# [Help Documentation 👈](https://vcne5rvqxi9z.feishu.cn/wiki/KZSMwZk7JiyzFtkgmPUc8rHxnVh)

# [Feedback & Discussion](https://vcne5rvqxi9z.feishu.cn/wiki/KZSMwZk7JiyzFtkgmPUc8rHxnVh#share-JcVadDDYzoViQNxltupcIrJxnSg)

# [Changelog](https://vcne5rvqxi9z.feishu.cn/wiki/FEDdw8o7ti1IPpkJLjXcNX7En6d)

For detailed information about the latest features and improvements, please refer to the [Changelog](https://vcne5rvqxi9z.feishu.cn/wiki/FEDdw8o7ti1IPpkJLjXcNX7En6d).

# 打赏、鼓励、催更 🎉

<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
  <div style="text-align: center; margin: 10px;">
    <img src="/plugins/siyuan-media-player/assets/images/alipay.jpg" alt="Alipay QR Code" width="300" />
    <p>Alipay</p>
  </div>
  <div style="text-align: center; margin: 10px;">
    <img src="/plugins/siyuan-media-player/assets/images/wechat.jpg" alt="WeChat QR Code" width="300" />
    <p>WeChat</p>
  </div>
</div>

# SiYuan Media Player User Guide

SiYuan Media Player is a powerful multimedia playback plugin that helps you conveniently play, manage, and reference various media resources within SiYuan notes.

## Basic Features

### Video Playback
- **Local Video Support**: Play local video files with support for various common video formats
- **Bilibili Video Support**: Play Bilibili videos directly without leaving SiYuan notes
- **Automatic Subtitle Detection**: Automatically detect and load matching subtitle files
- **Danmaku Support**: Display Bilibili video danmaku (bullet comments) for an authentic viewing experience
- **Multiple Playback Controls**: Time navigation, volume adjustment, playback speed, fullscreen and more

### Playlist Management
- **Multiple Playlist Management**: Create and manage multiple playlists for organizing media by category
- **View Mode Switching**: Support for detailed view, compact view, grid view, and cover view
- **Batch Import**: One-click import of Bilibili favorites or local folders to playlists

### Note Integration Features
- **Timestamp Links**: Generate links pointing to specific timestamps in videos, inserted into notes
- **Loop Segments**: Create links that loop specific segments of videos, useful for repeated learning
- **Video Screenshots**: Capture video frames and insert them directly into notes
- **Flexible Insertion Options**: Choose to insert at cursor position or copy to clipboard

### Advanced Features (Pro Version)
- **Media Assistant**:
  - Subtitle List: Easily browse and search video subtitle content
  - Video Summary: AI-generated video content summaries for quick understanding of key points
  - One-click Export: Export subtitle and summary content to notes
- **Tag Extensions**:
  - Local Folders: Directly browse and manage local media files
  - Bilibili Favorites: Seamless integration of Bilibili favorite content
  - More features in development...

## How to Use

### Playing Local Videos
1. Click the "Add Media" button in the player window
2. Select a local video file
3. The player will automatically detect and load same-named subtitle files (if available)
4. Use the player control bar to control playback

### Playing Bilibili Videos
1. Copy the Bilibili video link (supports standard links and short links)
2. Click the "Add Media" button in the player
3. Paste the link and confirm
4. The player will automatically load the video, subtitles, and danmaku

### Creating Timestamps and Loop Segments
1. Play the video to the position you want to mark
2. Click the timestamp button to create a timestamp, or click the loop segment button to set a start point
3. If creating a loop segment, continue playing to the end position and click the loop segment button again
4. The generated link will be automatically copied to the clipboard or inserted at the cursor position (based on settings)

### Importing Bilibili Favorites
1. Log in to your Bilibili account (in the settings panel)
2. Select "Add Bilibili Favorites" in the playlist panel
3. Choose the favorite folder to import
4. Confirm the import, videos will be batch added to the current playlist

### Using Media Assistant (Pro Version)
1. Click the Media Assistant button in the control bar while playing a video
2. Browse the subtitle list or view the video summary in the assistant panel
3. Click on subtitle entries to jump to the corresponding timestamp
4. Use the export button to export content to your notes

### Managing Bilibili Account
1. Find the Bilibili account section in the settings panel
2. Click the login button to display a QR code
3. Scan the QR code using the Bilibili mobile app to log in
4. After logging in, you can access and import your personal favorite folders

## Keyboard Shortcuts

### Built-in Player Shortcuts (Artplayer)
- **Space**: Toggle play/pause
- **Arrow Left/Right**: Rewind/Fast forward
- **Arrow Up/Down**: Increase/Decrease volume

### Custom Shortcuts
You can customize keyboard shortcuts for the following features in SiYuan settings:

1. Open SiYuan Settings > Shortcuts
2. Search for "Media Player" or "siyuan-media-player"
3. Set custom shortcuts for these functions:
   - **Create Timestamp**: Generate a link for the current playback time
   - **Create Loop Segment**: Set start and end points for loop playback
   - **Take Screenshot**: Capture the current video frame
   - **Toggle Media Assistant**: Show or hide the subtitles and summary panel (Pro version)

Custom shortcuts allow you to quickly perform common actions without using the mouse.

## Setting Options

### General Settings
- **Volume**: Set default playback volume
- **Playback Speed**: Set default playback speed
- **Loop Count**: Set the number of times to loop a segment
- **Show Subtitles**: Whether to display subtitles by default
- **Enable Danmaku**: Whether to display danmaku by default

### Player Settings
- **Player Selection**: Choose to use the built-in player, PotPlayer, or browser
- **Link Insertion Method**: Choose to insert at cursor position or copy to clipboard
- **Link Format**: Customize the generated link format, with support for adding emojis

## Common Issues

### Video Won't Play
- Check if your network connection is working properly
- For Bilibili videos, try refreshing or re-adding the link
- Confirm if the video format is supported

### Subtitles Not Showing
- Confirm that the subtitle file has the same name as the video file and is in the same directory
- Check if the subtitle file format is .srt, .vtt, or .ass
- Verify that the "Show Subtitles" option is enabled in settings

### Danmaku Not Showing
- Confirm that the "Enable Danmaku" option is enabled
- Only Bilibili videos support the danmaku feature
- Some videos may not have danmaku data

### Failed to Import Favorites
- Confirm you are logged into your Bilibili account
- Check your network connection
- Try logging in to your account again

## Advanced Tips

### Custom Link Format
In settings, you can customize the display format of timestamp links. For example:
- `- [😄Title Time Subtitle](Link)` will generate a link with an emoji
- `> 🕒 Time | Title | Subtitle` will generate a quote-formatted link

### Multiple Playlist Management
- Create theme-related playlists, such as "Study Materials," "Entertainment Videos," etc.
- Use the pin feature to keep frequently used lists at the top
- Regularly organize and clean up media content that is no longer needed

### Batch Processing Tips
- Use the local folder import feature to add multiple videos at once
- Use Bilibili favorites import to quickly add series videos
- Switch between view modes to efficiently browse and manage media in different scenarios
