"use strict";const M=require("./index-z-W8cJ34.cjs");function U(w,T){for(var s=0;s<T.length;s++){const u=T[s];if(typeof u!="string"&&!Array.isArray(u)){for(const p in u)if(p!=="default"&&!(p in w)){const r=Object.getOwnPropertyDescriptor(u,p);r&&Object.defineProperty(w,p,r.get?r:{enumerable:!0,get:()=>u[p]})}}}return Object.freeze(Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}))}var q={exports:{}};q.exports;(function(w,T){/*!
 * artplayer-plugin-chapter.js v1.0.0
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2024 Harvey Zack
 * Released under the MIT License.
 */(function(s,u,p,r,y){var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof M.commonjsGlobal<"u"?M.commonjsGlobal:{},v=typeof l[r]=="function"&&l[r],f=v.cache||{},n=typeof M.commonjsRequire=="function"&&M.commonjsRequire.bind(w);function o(i,x){if(!f[i]){if(!s[i]){var j=typeof l[r]=="function"&&l[r];if(!x&&j)return j(i,!0);if(v)return v(i,!0);if(n&&typeof i=="string")return n(i);var C=Error("Cannot find module '"+i+"'");throw C.code="MODULE_NOT_FOUND",C}$.resolve=function(b){var h=s[i][1][b];return h??b},$.cache={};var O=f[i]=new o.Module(i);s[i][0].call(O.exports,$,O,O.exports,this)}return f[i].exports;function $(b){var h=$.resolve(b);return h===!1?{}:o(h)}}o.isParcelRequire=!0,o.Module=function(i){this.id=i,this.bundle=o,this.exports={}},o.modules=s,o.cache=f,o.parent=v,o.register=function(i,x){s[i]=[function(j,C){C.exports=x},{}]},Object.defineProperty(o,"root",{get:function(){return l[r]}}),l[r]=o;for(var d=0;d<u.length;d++)o(u[d]);{var P=o(p);w.exports=P}})({eSFsM:[function(s,u,p){var r=s("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(p),r.export(p,"default",()=>v);var y=s("bundle-text:./style.less"),l=r.interopDefault(y);function v(f={}){return n=>{let{$player:o}=n.template,{setStyle:d,append:P,clamp:i,query:x,isMobile:j,addClass:C,removeClass:O}=n.constructor.utils,$='<div class="art-chapter"><div class="art-chapter-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div></div></div>',b=null,h=[],L=n.query(".art-control-progress"),F=n.query(".art-control-progress-inner"),D=P(F,'<div class="art-chapters"></div>'),g=P(F,'<div class="art-chapter-title"></div>');function I({$chapter:e,width:a}){let t=e.dataset.title.trim();if(t){d(g,"display","flex"),g.innerText=t;let c=g.clientWidth;a<=c/2?d(g,"left",0):a>F.clientWidth-c/2?d(g,"left",`${F.clientWidth-c}px`):d(g,"left",`${a-c/2}px`)}else d(g,"display","none")}function z(e=[]){if(h=[],D.innerText="",O(o,"artplayer-plugin-chapter"),Array.isArray(e)&&e.length&&n.duration){e=e.sort((a,t)=>a.start-t.start);for(let a=0;a<e.length;a++){let t=e[a],c=e[a+1];if(t.end===1/0&&(t.end=n.duration),typeof t.start!="number"||typeof t.end!="number"||typeof t.title!="string")throw Error("Illegal chapter data type");if(t.start<0||t.end>n.duration||t.start>=t.end||c&&t.end>c.start)throw Error("Illegal chapter time point")}e[0].start>0&&e.unshift({start:0,end:e[0].start,title:""}),e[e.length-1].end<n.duration&&e.push({start:e[e.length-1].end,end:n.duration,title:""});for(let a=0;a<e.length-1;a++)e[a].end!==e[a+1].start&&e.splice(a+1,0,{start:e[a].end,end:e[a+1].start,title:""});h=e.map(a=>{let t=P(D,$),c=i(a.start,0,n.duration),m=i(a.end,0,n.duration),E=m-c,S=E/n.duration;return t.dataset.start=c,t.dataset.end=m,t.dataset.duration=E,t.dataset.title=a.title.trim(),t.style.width=`${100*S}%`,{$chapter:t,$hover:x(".art-progress-hover",t),$loaded:x(".art-progress-loaded",t),$played:x(".art-progress-played",t)}}),C(o,"artplayer-plugin-chapter"),n.emit("setBar","loaded",n.loaded||0)}}return n.on("setBar",(e,a,t)=>{if(h.length)for(let c=0;c<h.length;c++){let{$chapter:m,$loaded:E,$played:S,$hover:N}=h[c],k={hover:N,loaded:E,played:S}[e];if(!k)return;let R=D.clientWidth*a,_=n.duration*a,Y=parseFloat(m.dataset.duration),A=parseFloat(m.dataset.start),W=parseFloat(m.dataset.end);if(_<A&&d(k,"width",0),_>W&&d(k,"width","100%"),_>=A&&_<=W){let G=(_-A)/Y;d(k,"width",`${100*G}%`),j?e==="played"&&t&&(I({$chapter:m,width:R}),clearTimeout(b),b=setTimeout(()=>{d(g,"display","none")},500)):e==="hover"&&I({$chapter:m,width:R})}}}),j||n.proxy(L,"mouseleave",()=>{h.length&&d(g,"display","none")}),n.once("video:loadedmetadata",()=>z(f.chapters)),{name:"artplayerPluginChapter",update:({chapters:e})=>z(e)}}}if(typeof document<"u"){let f="artplayer-plugin-chapter",n=document.getElementById(f);if(n)n.textContent=l.default;else{let o=document.createElement("style");o.id=f,o.textContent=l.default,document.head.appendChild(o)}}typeof window<"u"&&(window.artplayerPluginChapter=v)},{"bundle-text:./style.less":"9CXLk","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9CXLk":[function(s,u,p){u.exports=".artplayer-plugin-chapter .art-control-progress-inner{background-color:#0000!important;height:100%!important}.artplayer-plugin-chapter .art-control-progress-inner>.art-progress-hover,.artplayer-plugin-chapter .art-control-progress-inner>.art-progress-loaded,.artplayer-plugin-chapter .art-control-progress-inner>.art-progress-played{display:none!important}.artplayer-plugin-chapter .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 64px)!important}.artplayer-plugin-chapter .art-chapters{z-index:0;align-items:center;gap:4px;height:100%;display:flex;position:absolute;inset:0;transform:scaleY(1.25)}.artplayer-plugin-chapter .art-chapters .art-chapter{align-items:center;height:100%;display:flex}.artplayer-plugin-chapter .art-chapters .art-chapter .art-chapter-inner{cursor:pointer;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);border-radius:10px;width:100%;height:50%;position:relative;overflow:hidden}.artplayer-plugin-chapter .art-chapters .art-chapter:hover .art-chapter-inner{height:100%}.artplayer-plugin-chapter .art-chapter-title{z-index:70;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:14px;line-height:1;display:none;position:absolute;top:-50px;left:0}"},{}],"9pCYc":[function(s,u,p){p.interopDefault=function(r){return r&&r.__esModule?r:{default:r}},p.defineInteropFlag=function(r){Object.defineProperty(r,"__esModule",{value:!0})},p.exportAll=function(r,y){return Object.keys(r).forEach(function(l){l==="default"||l==="__esModule"||Object.prototype.hasOwnProperty.call(y,l)||Object.defineProperty(y,l,{enumerable:!0,get:function(){return r[l]}})}),y},p.export=function(r,y,l){Object.defineProperty(r,y,{enumerable:!0,get:l})}},{}]},["eSFsM"],"eSFsM","parcelRequire4dc0")})(q,q.exports);var B=q.exports;const X=M.getDefaultExportFromCjs(B),H=U({__proto__:null,default:X},[B]);exports.artplayerPluginChapter=H;
