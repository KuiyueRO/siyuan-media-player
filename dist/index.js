"use strict";var qr=Object.defineProperty;var Wr=(u,a,t)=>a in u?qr(u,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[a]=t;var et=(u,a,t)=>Wr(u,typeof a!="symbol"?a+"":a,t);const V=require("siyuan");function rt(){}function cr(u){return u()}function ze(){return Object.create(null)}function at(u){u.forEach(cr)}function ur(u){return typeof u=="function"}function Kt(u,a){return u!=u?a==a:u!==a||u&&typeof u=="object"||typeof u=="function"}let te;function vt(u,a){return u===a?!0:(te||(te=document.createElement("a")),te.href=a,u===te.href)}function Kr(u){return Object.keys(u).length===0}function A(u,a){u.appendChild(a)}function Q(u,a,t){u.insertBefore(a,t||null)}function X(u){u.parentNode&&u.parentNode.removeChild(u)}function H(u){return document.createElement(u)}function Ce(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function tt(u){return document.createTextNode(u)}function q(){return tt(" ")}function Oe(){return tt("")}function J(u,a,t,s){return u.addEventListener(a,t,s),()=>u.removeEventListener(a,t,s)}function dr(u){return function(a){return a.preventDefault(),u.call(this,a)}}function F(u,a,t){t==null?u.removeAttribute(a):u.getAttribute(a)!==t&&u.setAttribute(a,t)}function Gr(u){return Array.from(u.childNodes)}function nt(u,a){a=""+a,u.data!==a&&(u.data=a)}function Ue(u,a){u.value=a??""}function it(u,a,t){u.classList.toggle(a,!!t)}function Xr(u,a,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(u,{detail:a,bubbles:t,cancelable:s})}let qt;function Ot(u){qt=u}function Ae(){if(!qt)throw new Error("Function called outside component initialization");return qt}function jt(u){Ae().$$.on_mount.push(u)}function fr(u){Ae().$$.on_destroy.push(u)}function De(){const u=Ae();return(a,t,{cancelable:s=!1}={})=>{const r=u.$$.callbacks[a];if(r){const e=Xr(a,t,{cancelable:s});return r.slice().forEach(n=>{n.call(u,e)}),!e.defaultPrevented}return!0}}const Ct=[],Mt=[];let _t=[];const Ye=[],Qr=Promise.resolve();let Te=!1;function Jr(){Te||(Te=!0,Qr.then(pr))}function Se(u){_t.push(u)}const ve=new Set;let Et=0;function pr(){if(Et!==0)return;const u=qt;do{try{for(;Et<Ct.length;){const a=Ct[Et];Et++,Ot(a),Zr(a.$$)}}catch(a){throw Ct.length=0,Et=0,a}for(Ot(null),Ct.length=0,Et=0;Mt.length;)Mt.pop()();for(let a=0;a<_t.length;a+=1){const t=_t[a];ve.has(t)||(ve.add(t),t())}_t.length=0}while(Ct.length);for(;Ye.length;)Ye.pop()();Te=!1,ve.clear(),Ot(u)}function Zr(u){if(u.fragment!==null){u.update(),at(u.before_update);const a=u.dirty;u.dirty=[-1],u.fragment&&u.fragment.p(u.ctx,a),u.after_update.forEach(Se)}}function tn(u){const a=[],t=[];_t.forEach(s=>u.indexOf(s)===-1?a.push(s):t.push(s)),t.forEach(s=>s()),_t=a}const ne=new Set;let wt;function en(){wt={r:0,c:[],p:wt}}function rn(){wt.r||at(wt.c),wt=wt.p}function pt(u,a){u&&u.i&&(ne.delete(u),u.i(a))}function Tt(u,a,t,s){if(u&&u.o){if(ne.has(u))return;ne.add(u),wt.c.push(()=>{ne.delete(u),s&&(t&&u.d(1),s())}),u.o(a)}else s&&s()}function It(u){return(u==null?void 0:u.length)!==void 0?u:Array.from(u)}function Pe(u,a){u.d(1),a.delete(u.key)}function Be(u,a,t,s,r,e,n,c,i,o,l,d){let f=u.length,p=e.length,h=f;const m={};for(;h--;)m[u[h].key]=h;const g=[],y=new Map,w=new Map,v=[];for(h=p;h--;){const x=d(r,e,h),C=t(x);let _=n.get(C);_?v.push(()=>_.p(x,a)):(_=o(C,x),_.c()),y.set(C,g[h]=_),C in m&&w.set(C,Math.abs(h-m[C]))}const b=new Set,k=new Set;function j(x){pt(x,1),x.m(c,l),n.set(x.key,x),l=x.first,p--}for(;f&&p;){const x=g[p-1],C=u[f-1],_=x.key,P=C.key;x===C?(l=x.first,f--,p--):y.has(P)?!n.has(_)||b.has(_)?j(x):k.has(P)?f--:w.get(_)>w.get(P)?(k.add(_),j(x)):(b.add(P),f--):(i(C,n),f--)}for(;f--;){const x=u[f];y.has(x.key)||i(x,n)}for(;p;)j(g[p-1]);return at(v),g}function ie(u){u&&u.c()}function Ut(u,a,t){const{fragment:s,after_update:r}=u.$$;s&&s.m(a,t),Se(()=>{const e=u.$$.on_mount.map(cr).filter(ur);u.$$.on_destroy?u.$$.on_destroy.push(...e):at(e),u.$$.on_mount=[]}),r.forEach(Se)}function Yt(u,a){const t=u.$$;t.fragment!==null&&(tn(t.after_update),at(t.on_destroy),t.fragment&&t.fragment.d(a),t.on_destroy=t.fragment=null,t.ctx=[])}function nn(u,a){u.$$.dirty[0]===-1&&(Ct.push(u),Jr(),u.$$.dirty.fill(0)),u.$$.dirty[a/31|0]|=1<<a%31}function Gt(u,a,t,s,r,e,n=null,c=[-1]){const i=qt;Ot(u);const o=u.$$={fragment:null,ctx:[],props:e,update:rt,not_equal:r,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(i?i.$$.context:[])),callbacks:ze(),dirty:c,skip_bound:!1,root:a.target||i.$$.root};n&&n(o.root);let l=!1;if(o.ctx=t?t(u,a.props||{},(d,f,...p)=>{const h=p.length?p[0]:f;return o.ctx&&r(o.ctx[d],o.ctx[d]=h)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](h),l&&nn(u,d)),f}):[],o.update(),l=!0,at(o.before_update),o.fragment=s?s(o.ctx):!1,a.target){if(a.hydrate){const d=Gr(a.target);o.fragment&&o.fragment.l(d),d.forEach(X)}else o.fragment&&o.fragment.c();a.intro&&pt(u.$$.fragment),Ut(u,a.target,a.anchor),pr()}Ot(i)}class Xt{constructor(){et(this,"$$");et(this,"$$set")}$destroy(){Yt(this,1),this.$destroy=rt}$on(a,t){if(!ur(t))return rt;const s=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);return s.push(t),()=>{const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}$set(a){this.$$set&&!Kr(a)&&(this.$$.skip_bound=!0,this.$$set(a),this.$$.skip_bound=!1)}}const an="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(an);var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hr(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function oe(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var se={exports:{}};se.exports;(function(u,a){/*!
 * artplayer.js v5.2.1
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2024 Harvey Zack
 * Released under the MIT License.
 */(function(t,s,r,e,n){var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof ae<"u"?ae:{},i=typeof c[e]=="function"&&c[e],o=i.cache||{},l=typeof oe=="function"&&oe.bind(u);function d(h,m){if(!o[h]){if(!t[h]){var g=typeof c[e]=="function"&&c[e];if(!m&&g)return g(h,!0);if(i)return i(h,!0);if(l&&typeof h=="string")return l(h);var y=Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}v.resolve=function(b){var k=t[h][1][b];return k??b},v.cache={};var w=o[h]=new d.Module(h);t[h][0].call(w.exports,v,w,w.exports,this)}return o[h].exports;function v(b){var k=v.resolve(b);return k===!1?{}:d(k)}}d.isParcelRequire=!0,d.Module=function(h){this.id=h,this.bundle=d,this.exports={}},d.modules=t,d.cache=o,d.parent=i,d.register=function(h,m){t[h]=[function(g,y){y.exports=m},{}]},Object.defineProperty(d,"root",{get:function(){return c[e]}}),c[e]=d;for(var f=0;f<s.length;f++)d(s[f]);{var p=d(r);u.exports=p}})({"5lTcX":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("bundle-text:./style/index.less"),c=e.interopDefault(n),i=t("option-validator"),o=e.interopDefault(i),l=t("./utils/emitter"),d=e.interopDefault(l),f=t("./utils"),p=t("./scheme"),h=e.interopDefault(p),m=t("./config"),g=e.interopDefault(m),y=t("./template"),w=e.interopDefault(y),v=t("./i18n"),b=e.interopDefault(v),k=t("./player"),j=e.interopDefault(k),x=t("./control"),C=e.interopDefault(x),_=t("./contextmenu"),P=e.interopDefault(_),S=t("./info"),I=e.interopDefault(S),E=t("./subtitle"),T=e.interopDefault(E),M=t("./events"),$=e.interopDefault(M),B=t("./hotkey"),N=e.interopDefault(B),L=t("./layer"),z=e.interopDefault(L),W=t("./loading"),K=e.interopDefault(W),D=t("./notice"),R=e.interopDefault(D),U=t("./mask"),O=e.interopDefault(U),Z=t("./icons"),ot=e.interopDefault(Z),lt=t("./setting"),ct=e.interopDefault(lt),Bt=t("./storage"),Lt=e.interopDefault(Bt),$t=t("./plugins"),Rt=e.interopDefault($t);let Ht=0,ht=[];class Y extends d.default{constructor(ut,xt){super(),this.id=++Ht;let kt=f.mergeDeep(Y.option,ut);if(kt.container=ut.container,this.option=(0,o.default)(kt,h.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new w.default(this),this.events=new $.default(this),this.storage=new Lt.default(this),this.icons=new ot.default(this),this.i18n=new b.default(this),this.notice=new R.default(this),this.player=new j.default(this),this.layers=new z.default(this),this.controls=new C.default(this),this.contextmenu=new P.default(this),this.subtitle=new T.default(this),this.info=new I.default(this),this.loading=new K.default(this),this.hotkey=new N.default(this),this.mask=new O.default(this),this.setting=new ct.default(this),this.plugins=new Rt.default(this),typeof xt=="function"&&this.on("ready",()=>xt.call(this,this)),Y.DEBUG){let mt=ft=>console.log(`[ART.${this.id}] -> ${ft}`);mt("Version@"+Y.version),mt("Env@"+Y.env),mt("Build@"+Y.build);for(let ft=0;ft<g.default.events.length;ft++)this.on("video:"+g.default.events[ft],Nt=>mt("Event@"+Nt.type))}ht.push(this)}static get instances(){return ht}static get version(){return"5.2.1"}static get env(){return"production"}static get build(){return"2024-10-26 15:26:30"}static get config(){return g.default}static get utils(){return f}static get scheme(){return h.default}static get Emitter(){return d.default}static get validator(){return o.default}static get kindOf(){return o.default.kindOf}static get html(){return w.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:ut=>ut},moreVideoAttr:{controls:!1,preload:f.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(ut=!0){this.events.destroy(),this.template.destroy(ut),ht.splice(ht.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}r.default=Y,Y.STYLE=c.default,Y.DEBUG=!1,Y.CONTEXTMENU=!0,Y.NOTICE_TIME=2e3,Y.SETTING_WIDTH=250,Y.SETTING_ITEM_WIDTH=200,Y.SETTING_ITEM_HEIGHT=35,Y.RESIZE_TIME=200,Y.SCROLL_TIME=200,Y.SCROLL_GAP=50,Y.AUTO_PLAYBACK_MAX=10,Y.AUTO_PLAYBACK_MIN=5,Y.AUTO_PLAYBACK_TIMEOUT=3e3,Y.RECONNECT_TIME_MAX=5,Y.RECONNECT_SLEEP_TIME=1e3,Y.CONTROL_HIDE_TIME=3e3,Y.DBCLICK_TIME=300,Y.DBCLICK_FULLSCREEN=!0,Y.MOBILE_DBCLICK_PLAY=!0,Y.MOBILE_CLICK_PLAY=!1,Y.AUTO_ORIENTATION_TIME=200,Y.INFO_LOOP_TIME=1e3,Y.FAST_FORWARD_VALUE=3,Y.FAST_FORWARD_TIME=1e3,Y.TOUCH_MOVE_RATIO=.5,Y.VOLUME_STEP=.1,Y.SEEK_STEP=5,Y.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],Y.ASPECT_RATIO=["default","4:3","16:9"],Y.FLIP=["normal","horizontal","vertical"],Y.FULLSCREEN_WEB_IN_BODY=!1,Y.LOG_VERSION=!0,Y.USE_RAF=!1,f.isBrowser&&(window.Artplayer=Y,f.setStyleText("artplayer-style",c.default),setTimeout(()=>{Y.LOG_VERSION&&console.log(`%c ArtPlayer %c ${Y.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"0016T","option-validator":"bAWi2","./utils/emitter":"66mFZ","./utils":"71aH7","./scheme":"AKEiO","./config":"lyjeQ","./template":"X13Zf","./i18n":"3jKkj","./player":"a90nx","./control":"8Z0Uf","./contextmenu":"2KYsr","./info":"02ajl","./subtitle":"eSWto","./events":"jo4S1","./hotkey":"6NoFy","./layer":"6G6hZ","./loading":"3dsEe","./notice":"dWGTw","./mask":"5POkG","./icons":"6OeNg","./setting":"3eYNH","./storage":"2aaJe","./plugins":"8MTUM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"0016T":[function(t,s,r){s.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;width:100%;height:100%;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;width:100%;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;width:100%;height:100%;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;width:100%;height:50%;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);width:100%;height:100%;position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;padding:var(--art-padding);pointer-events:none;width:100%;height:auto;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{fill:var(--art-theme);width:15px;height:15px}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(t,s,r){var e;e=function(){function n(p){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}var c=Object.prototype.toString,i=function(p){if(p===void 0)return"undefined";if(p===null)return"null";var h=n(p);if(h==="boolean")return"boolean";if(h==="string")return"string";if(h==="number")return"number";if(h==="symbol")return"symbol";if(h==="function")return o(p)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(p):p instanceof Array)return"array";if(p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p))return"buffer";if(function(m){try{if(typeof m.length=="number"&&typeof m.callee=="function")return!0}catch(g){if(g.message.indexOf("callee")!==-1)return!0}return!1}(p))return"arguments";if(p instanceof Date||typeof p.toDateString=="function"&&typeof p.getDate=="function"&&typeof p.setDate=="function")return"date";if(p instanceof Error||typeof p.message=="string"&&p.constructor&&typeof p.constructor.stackTraceLimit=="number")return"error";if(p instanceof RegExp||typeof p.flags=="string"&&typeof p.ignoreCase=="boolean"&&typeof p.multiline=="boolean"&&typeof p.global=="boolean")return"regexp";switch(o(p)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof p.throw=="function"&&typeof p.return=="function"&&typeof p.next=="function")return"generator";switch(h=c.call(p)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return h.slice(8,-1).toLowerCase().replace(/\s/g,"")};function o(p){return p.constructor?p.constructor.name:null}function l(p,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return d(p,h,m),f(p,h,m),function(g,y,w){var v=i(y),b=i(g);if(v==="object"){if(b!=="object")throw Error("[Type Error]: '".concat(w.join("."),"' require 'object' type, but got '").concat(b,"'"));Object.keys(y).forEach(function(k){var j=g[k],x=y[k],C=w.slice();C.push(k),d(j,x,C),f(j,x,C),l(j,x,C)})}if(v==="array"){if(b!=="array")throw Error("[Type Error]: '".concat(w.join("."),"' require 'array' type, but got '").concat(b,"'"));g.forEach(function(k,j){var x=g[j],C=y[j]||y[0],_=w.slice();_.push(j),d(x,C,_),f(x,C,_),l(x,C,_)})}}(p,h,m),p}function d(p,h,m){if(i(h)==="string"){var g=i(p);if(h[0]==="?"&&(h=h.slice(1)+"|undefined"),!(-1<h.indexOf("|")?h.split("|").map(function(y){return y.toLowerCase().trim()}).filter(Boolean).some(function(y){return g===y}):h.toLowerCase().trim()===g))throw Error("[Type Error]: '".concat(m.join("."),"' require '").concat(h,"' type, but got '").concat(g,"'"))}}function f(p,h,m){if(i(h)==="function"){var g=h(p,i(p),m);if(g!==!0){var y=i(g);throw y==="string"?Error(g):y==="error"?g:Error("[Validator Error]: The scheme for '".concat(m.join("."),"' validator require return true, but got '").concat(g,"'"))}}}return l.kindOf=i,l},s.exports=e()},{}],"66mFZ":[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=class{on(e,n,c){let i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:n,ctx:c}),this}once(e,n,c){let i=this;function o(...l){i.off(e,o),n.apply(c,l)}return o._=n,this.on(e,o,c)}emit(e,...n){let c=((this.e||(this.e={}))[e]||[]).slice();for(let i=0;i<c.length;i+=1)c[i].fn.apply(c[i].ctx,n);return this}off(e,n){let c=this.e||(this.e={}),i=c[e],o=[];if(i&&n)for(let l=0,d=i.length;l<d;l+=1)i[l].fn!==n&&i[l].fn._!==n&&o.push(i[l]);return o.length?c[e]=o:delete c[e],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(t,s,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,n){return Object.keys(e).forEach(function(c){c==="default"||c==="__esModule"||Object.prototype.hasOwnProperty.call(n,c)||Object.defineProperty(n,c,{enumerable:!0,get:function(){return e[c]}})}),n},r.export=function(e,n,c){Object.defineProperty(e,n,{enumerable:!0,get:c})}},{}],"71aH7":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./dom");e.exportAll(n,r);var c=t("./error");e.exportAll(c,r);var i=t("./subtitle");e.exportAll(i,r);var o=t("./file");e.exportAll(o,r);var l=t("./property");e.exportAll(l,r);var d=t("./time");e.exportAll(d,r);var f=t("./format");e.exportAll(f,r);var p=t("./compatibility");e.exportAll(p,r)},{"./dom":"bSNiV","./error":"hwmZz","./subtitle":"inzwq","./file":"6b7Ip","./property":"5NSdr","./time":"epmNy","./format":"gapRl","./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bSNiV:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"query",()=>c),e.export(r,"queryAll",()=>i),e.export(r,"addClass",()=>o),e.export(r,"removeClass",()=>l),e.export(r,"hasClass",()=>d),e.export(r,"append",()=>f),e.export(r,"remove",()=>p),e.export(r,"setStyle",()=>h),e.export(r,"setStyles",()=>m),e.export(r,"getStyle",()=>g),e.export(r,"sublings",()=>y),e.export(r,"inverseClass",()=>w),e.export(r,"tooltip",()=>v),e.export(r,"isInViewport",()=>b),e.export(r,"includeFromEvent",()=>k),e.export(r,"replaceElement",()=>j),e.export(r,"createElement",()=>x),e.export(r,"getIcon",()=>C),e.export(r,"setStyleText",()=>_),e.export(r,"supportsFlex",()=>P),e.export(r,"getRect",()=>S),e.export(r,"loadImg",()=>I);var n=t("./compatibility");function c(E,T=document){return T.querySelector(E)}function i(E,T=document){return Array.from(T.querySelectorAll(E))}function o(E,T){return E.classList.add(T)}function l(E,T){return E.classList.remove(T)}function d(E,T){return E.classList.contains(T)}function f(E,T){return T instanceof Element?E.appendChild(T):E.insertAdjacentHTML("beforeend",String(T)),E.lastElementChild||E.lastChild}function p(E){return E.parentNode.removeChild(E)}function h(E,T,M){return E.style[T]=M,E}function m(E,T){for(let M in T)h(E,M,T[M]);return E}function g(E,T,M=!0){let $=window.getComputedStyle(E,null).getPropertyValue(T);return M?parseFloat($):$}function y(E){return Array.from(E.parentElement.children).filter(T=>T!==E)}function w(E,T){y(E).forEach(M=>l(M,T)),o(E,T)}function v(E,T,M="top"){n.isMobile||(E.setAttribute("aria-label",T),o(E,"hint--rounded"),o(E,`hint--${M}`))}function b(E,T=0){let M=E.getBoundingClientRect(),$=window.innerHeight||document.documentElement.clientHeight,B=window.innerWidth||document.documentElement.clientWidth,N=M.top-T<=$&&M.top+M.height+T>=0,L=M.left-T<=B+T&&M.left+M.width+T>=0;return N&&L}function k(E,T){return E.composedPath&&E.composedPath().indexOf(T)>-1}function j(E,T){return T.parentNode.replaceChild(E,T),E}function x(E){return document.createElement(E)}function C(E="",T=""){let M=x("i");return o(M,"art-icon"),o(M,`art-icon-${E}`),f(M,T),M}function _(E,T){let M=document.getElementById(E);if(M)M.textContent=T;else{let $=x("style");$.id=E,$.textContent=T,document.head.appendChild($)}}function P(){let E=document.createElement("div");return E.style.display="flex",E.style.display==="flex"}function S(E){return E.getBoundingClientRect()}function I(E,T){return new Promise((M,$)=>{let B=new Image;B.crossOrigin="Anonymous",B.onload=function(){if(T&&T!==1){let N=document.createElement("canvas"),L=N.getContext("2d");N.width=B.width*T,N.height=B.height*T,L.drawImage(B,0,0,N.width,N.height),N.toBlob(z=>{let W=URL.createObjectURL(z),K=new Image;K.onload=function(){M(K)},K.onerror=function(){URL.revokeObjectURL(W),$(Error(`Image load failed: ${E}`))},K.src=W})}else M(B)},B.onerror=function(){$(Error(`Image load failed: ${E}`))},B.src=E})}},{"./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6ZTr6":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"userAgent",()=>n),e.export(r,"isSafari",()=>c),e.export(r,"isWechat",()=>i),e.export(r,"isIE",()=>o),e.export(r,"isAndroid",()=>l),e.export(r,"isIOS",()=>d),e.export(r,"isIOS13",()=>f),e.export(r,"isMobile",()=>p),e.export(r,"isBrowser",()=>h);let n=typeof navigator<"u"?navigator.userAgent:"",c=/^((?!chrome|android).)*safari/i.test(n),i=/MicroMessenger/i.test(n),o=/MSIE|Trident/i.test(n),l=/android/i.test(n),d=/iPad|iPhone|iPod/i.test(n)&&!window.MSStream,f=d||n.includes("Macintosh")&&navigator.maxTouchPoints>=1,p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)||f,h=typeof window<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hwmZz:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"ArtPlayerError",()=>n),e.export(r,"errorHandle",()=>c);class n extends Error{constructor(o,l){super(o),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,l||this.constructor),this.name="ArtPlayerError"}}function c(i,o){if(!i)throw new n(o);return i}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],inzwq:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(o){return`WEBVTT \r
\r
`.concat(o.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(l,d,f)=>{let p=f.slice(0,3);return f.length===1&&(p=f+"00"),f.length===2&&(p=f+"0"),`${d},${p}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function c(o){return URL.createObjectURL(new Blob([o],{type:"text/vtt"}))}function i(o){let l=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function d(f=""){return f.split(/[:.]/).map((p,h,m)=>{if(h===m.length-1){if(p.length===1)return`.${p}00`;if(p.length===2)return`.${p}0`}else if(p.length===1)return(h===0?"0":":0")+p;return h===0?p:h===m.length-1?`.${p}`:`:${p}`}).join("")}return`WEBVTT

`+o.split(/\r?\n/).map(f=>{let p=f.match(l);return p?{start:d(p[1].trim()),end:d(p[2].trim()),text:p[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(h=>h.trim()).join(`
`)}:null}).filter(f=>f).map((f,p)=>f?p+1+`
${f.start} --> ${f.end}
${f.text}`:"").filter(f=>f.trim()).join(`

`)}e.defineInteropFlag(r),e.export(r,"srtToVtt",()=>n),e.export(r,"vttToBlob",()=>c),e.export(r,"assToVtt",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6b7Ip":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){let o=document.createElement("a");o.style.display="none",o.href=c,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}e.defineInteropFlag(r),e.export(r,"getExt",()=>function c(i){return i.includes("?")?c(i.split("?")[0]):i.includes("#")?c(i.split("#")[0]):i.trim().toLowerCase().split(".").pop()}),e.export(r,"download",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5NSdr":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"def",()=>n),e.export(r,"has",()=>i),e.export(r,"get",()=>o),e.export(r,"mergeDeep",()=>function l(...d){let f=p=>p&&typeof p=="object"&&!Array.isArray(p);return d.reduce((p,h)=>(Object.keys(h).forEach(m=>{let g=p[m],y=h[m];Array.isArray(g)&&Array.isArray(y)?p[m]=g.concat(...y):f(g)&&f(y)?p[m]=l(g,y):p[m]=y}),p),{})});let n=Object.defineProperty,{hasOwnProperty:c}=Object.prototype;function i(l,d){return c.call(l,d)}function o(l,d){return Object.getOwnPropertyDescriptor(l,d)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],epmNy:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(o=0){return new Promise(l=>setTimeout(l,o))}function c(o,l){let d;return function(...f){clearTimeout(d),d=setTimeout(()=>(d=null,o.apply(this,f)),l)}}function i(o,l){let d=!1;return function(...f){d||(o.apply(this,f),d=!0,setTimeout(function(){d=!1},l))}}e.defineInteropFlag(r),e.export(r,"sleep",()=>n),e.export(r,"debounce",()=>c),e.export(r,"throttle",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gapRl:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(d,f,p){return Math.max(Math.min(d,Math.max(f,p)),Math.min(f,p))}function c(d){return d.charAt(0).toUpperCase()+d.slice(1)}function i(d){if(!d)return"00:00";let f=Math.floor(d/3600),p=Math.floor((d-3600*f)/60),h=Math.floor(d-3600*f-60*p);return(f>0?[f,p,h]:[p,h]).map(m=>m<10?`0${m}`:String(m)).join(":")}function o(d){return d.replace(/[&<>'"]/g,f=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[f]||f)}function l(d){let f={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},p=RegExp(`(${Object.keys(f).join("|")})`,"g");return d.replace(p,h=>f[h]||h)}e.defineInteropFlag(r),e.export(r,"clamp",()=>n),e.export(r,"capitalize",()=>c),e.export(r,"secondToTime",()=>i),e.export(r,"escape",()=>o),e.export(r,"unescape",()=>l)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],AKEiO:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"ComponentOption",()=>h);var n=t("../utils");let c="array",i="boolean",o="string",l="number",d="object",f="function";function p(m,g,y){return(0,n.errorHandle)(g===o||g===l||m instanceof Element,`${y.join(".")} require '${o}' or 'Element' type`)}let h={html:p,disable:`?${i}`,name:`?${o}`,index:`?${l}`,style:`?${d}`,click:`?${f}`,mounted:`?${f}`,tooltip:`?${o}|${l}`,width:`?${l}`,selector:`?${c}`,onSelect:`?${f}`,switch:`?${i}`,onSwitch:`?${f}`,range:`?${c}`,onRange:`?${f}`,onChange:`?${f}`};r.default={id:o,container:p,url:o,poster:o,type:o,theme:o,lang:o,volume:l,isLive:i,muted:i,autoplay:i,autoSize:i,autoMini:i,loop:i,flip:i,playbackRate:i,aspectRatio:i,screenshot:i,setting:i,hotkey:i,pip:i,mutex:i,backdrop:i,fullscreen:i,fullscreenWeb:i,subtitleOffset:i,miniProgressBar:i,useSSR:i,playsInline:i,lock:i,fastForward:i,autoPlayback:i,autoOrientation:i,airplay:i,proxy:`?${f}`,plugins:[f],layers:[h],contextmenu:[h],settings:[h],controls:[{...h,position:(m,g,y)=>{let w=["top","left","right"];return(0,n.errorHandle)(w.includes(m),`${y.join(".")} only accept ${w.toString()} as parameters`)}}],quality:[{default:`?${i}`,html:o,url:o}],highlight:[{time:l,text:o}],thumbnails:{url:o,number:l,column:l,width:l,height:l,scale:l},subtitle:{url:o,name:o,type:o,style:d,escape:i,encoding:o,onVttLoad:f},moreVideoAttr:d,i18n:d,icons:d,cssVar:d,customType:d}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lyjeQ:[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],X13Zf:[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var e=t("./utils");class n{constructor(i){this.art=i;let{option:o,constructor:l}=i;o.container instanceof Element?this.$container=o.container:(this.$container=(0,e.query)(o.container),(0,e.errorHandle)(this.$container,`No container element found by ${o.container}`)),(0,e.errorHandle)((0,e.supportsFlex)(),"The current browser does not support flex layout");let d=this.$container.tagName.toLowerCase();(0,e.errorHandle)(d==="div",`Unsupported container element type, only support 'div' but got '${d}'`),(0,e.errorHandle)(l.instances.every(f=>f.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=i.id,this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.2.1</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(i){return(0,e.query)(i,this.$container)}init(){let{option:i}=this.art;if(i.useSSR||(this.$container.innerHTML=n.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),i.proxy){let o=i.proxy.call(this.art,this.art);(0,e.errorHandle)(o instanceof HTMLVideoElement||o instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,e.replaceElement)(o,this.$video),o.className="art-video",this.$video=o}i.backdrop&&(0,e.addClass)(this.$player,"art-backdrop"),e.isMobile&&(0,e.addClass)(this.$player,"art-mobile")}destroy(i){i?this.$container.innerHTML="":(0,e.addClass)(this.$player,"art-destroy")}}r.default=n},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3jKkj":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("./zh-cn"),i=e.interopDefault(c);r.default=class{constructor(o){this.art=o,this.languages={"zh-cn":i.default},this.language={},this.update(o.option.i18n)}init(){let o=this.art.option.lang.toLowerCase();this.language=this.languages[o]||{}}get(o){return this.language[o]||o}update(o){this.languages=(0,n.mergeDeep)(this.languages,o),this.init()}}},{"../utils":"71aH7","./zh-cn":"5Y91w","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5Y91w":[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let e={"Video Info":"统计信息",Close:"关闭","Video Load Failed":"加载失败",Volume:"音量",Play:"播放",Pause:"暂停",Rate:"速度",Mute:"静音","Video Flip":"画面翻转",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新连接","Show Setting":"显示设置","Hide Setting":"隐藏设置",Screenshot:"截图","Play Speed":"播放速度","Aspect Ratio":"画面比例",Default:"默认",Normal:"正常",Open:"打开","Switch Video":"切换","Switch Subtitle":"切换字幕",Fullscreen:"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"网页全屏","Exit Web Fullscreen":"退出网页全屏","Mini Player":"迷你播放器","PIP Mode":"开启画中画","Exit PIP Mode":"退出画中画","PIP Not Supported":"不支持画中画","Fullscreen Not Supported":"不支持全屏","Subtitle Offset":"字幕偏移","Last Seen":"上次看到","Jump Play":"跳转播放",AirPlay:"隔空播放","AirPlay Not Available":"隔空播放不可用"};r.default=e,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],a90nx:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./urlMix"),c=e.interopDefault(n),i=t("./attrMix"),o=e.interopDefault(i),l=t("./playMix"),d=e.interopDefault(l),f=t("./pauseMix"),p=e.interopDefault(f),h=t("./toggleMix"),m=e.interopDefault(h),g=t("./seekMix"),y=e.interopDefault(g),w=t("./volumeMix"),v=e.interopDefault(w),b=t("./currentTimeMix"),k=e.interopDefault(b),j=t("./durationMix"),x=e.interopDefault(j),C=t("./switchMix"),_=e.interopDefault(C),P=t("./playbackRateMix"),S=e.interopDefault(P),I=t("./aspectRatioMix"),E=e.interopDefault(I),T=t("./screenshotMix"),M=e.interopDefault(T),$=t("./fullscreenMix"),B=e.interopDefault($),N=t("./fullscreenWebMix"),L=e.interopDefault(N),z=t("./pipMix"),W=e.interopDefault(z),K=t("./loadedMix"),D=e.interopDefault(K),R=t("./playedMix"),U=e.interopDefault(R),O=t("./playingMix"),Z=e.interopDefault(O),ot=t("./autoSizeMix"),lt=e.interopDefault(ot),ct=t("./rectMix"),Bt=e.interopDefault(ct),Lt=t("./flipMix"),$t=e.interopDefault(Lt),Rt=t("./miniMix"),Ht=e.interopDefault(Rt),ht=t("./posterMix"),Y=e.interopDefault(ht),me=t("./autoHeightMix"),ut=e.interopDefault(me),xt=t("./cssVarMix"),kt=e.interopDefault(xt),mt=t("./themeMix"),ft=e.interopDefault(mt),Nt=t("./typeMix"),ge=e.interopDefault(Nt),Zt=t("./stateMix"),zt=e.interopDefault(Zt),Pr=t("./subtitleOffsetMix"),Br=e.interopDefault(Pr),Lr=t("./airplayMix"),$r=e.interopDefault(Lr),Rr=t("./qualityMix"),Hr=e.interopDefault(Rr),Nr=t("./thumbnailsMix"),zr=e.interopDefault(Nr),Or=t("./optionInit"),Ur=e.interopDefault(Or),Yr=t("./eventInit"),Vr=e.interopDefault(Yr);r.default=class{constructor(G){(0,c.default)(G),(0,o.default)(G),(0,d.default)(G),(0,p.default)(G),(0,m.default)(G),(0,y.default)(G),(0,v.default)(G),(0,k.default)(G),(0,x.default)(G),(0,_.default)(G),(0,S.default)(G),(0,E.default)(G),(0,M.default)(G),(0,B.default)(G),(0,L.default)(G),(0,W.default)(G),(0,D.default)(G),(0,U.default)(G),(0,Z.default)(G),(0,lt.default)(G),(0,Bt.default)(G),(0,$t.default)(G),(0,Ht.default)(G),(0,Y.default)(G),(0,ut.default)(G),(0,kt.default)(G),(0,ft.default)(G),(0,ge.default)(G),(0,zt.default)(G),(0,Br.default)(G),(0,$r.default)(G),(0,Hr.default)(G),(0,zr.default)(G),(0,Vr.default)(G),(0,Ur.default)(G)}}},{"./urlMix":"kQoac","./attrMix":"deCma","./playMix":"fOJuP","./pauseMix":"fzHAy","./toggleMix":"cBHxQ","./seekMix":"koAPr","./volumeMix":"6eyuR","./currentTimeMix":"faaWv","./durationMix":"5y91K","./switchMix":"iceD8","./playbackRateMix":"keKwh","./aspectRatioMix":"jihET","./screenshotMix":"36kPY","./fullscreenMix":"2GYOJ","./fullscreenWebMix":"5aYAP","./pipMix":"7EnIB","./loadedMix":"3N9mP","./playedMix":"et96R","./playingMix":"9DzzM","./autoSizeMix":"i1LDY","./rectMix":"IqARI","./flipMix":"7E7Vs","./miniMix":"gpugx","./posterMix":"1SuFS","./autoHeightMix":"8x4te","./cssVarMix":"1CaTA","./themeMix":"2FqhO","./typeMix":"1fQQs","./stateMix":"iBOQW","./subtitleOffsetMix":"6vlBV","./airplayMix":"eftqT","./qualityMix":"5SdyX","./thumbnailsMix":"4HcqV","./optionInit":"fCWZK","./eventInit":"f8Lv3","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kQoac:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{option:o,template:{$video:l}}=i;(0,n.def)(i,"url",{get:()=>l.src,async set(d){if(d){let f=i.url,p=o.type||(0,n.getExt)(d),h=o.customType[p];p&&h?(await(0,n.sleep)(),i.loading.show=!0,h.call(i,l,d,i)):(URL.revokeObjectURL(f),l.src=d),f!==i.url&&(i.option.url=d,i.isReady&&f&&i.once("video:canplay",()=>{i.emit("restart",d)}))}else await(0,n.sleep)(),i.loading.show=!0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],deCma:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:o}}=i;(0,n.def)(i,"attr",{value(l,d){if(d===void 0)return o[l];o[l]=d}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fOJuP:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:o,notice:l,option:d,constructor:{instances:f},template:{$video:p}}=i;(0,n.def)(i,"play",{value:async function(){let h=await p.play();if(l.show=o.get("Play"),i.emit("play"),d.mutex)for(let m=0;m<f.length;m++){let g=f[m];g!==i&&g.pause()}return h}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fzHAy:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:o},i18n:l,notice:d}=i;(0,n.def)(i,"pause",{value(){let f=o.pause();return d.show=l.get("Pause"),i.emit("pause"),f}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cBHxQ:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"toggle",{value:()=>i.playing?i.pause():i.play()})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],koAPr:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{notice:o}=i;(0,n.def)(i,"seek",{set(l){i.currentTime=l,i.emit("seek",i.currentTime),i.duration&&(o.show=`${(0,n.secondToTime)(i.currentTime)} / ${(0,n.secondToTime)(i.duration)}`)}}),(0,n.def)(i,"forward",{set(l){i.seek=i.currentTime+l}}),(0,n.def)(i,"backward",{set(l){i.seek=i.currentTime-l}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6eyuR":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:o},i18n:l,notice:d,storage:f}=i;(0,n.def)(i,"volume",{get:()=>o.volume||0,set:p=>{o.volume=(0,n.clamp)(p,0,1),d.show=`${l.get("Volume")}: ${parseInt(100*o.volume,10)}`,o.volume!==0&&f.set("volume",o.volume)}}),(0,n.def)(i,"muted",{get:()=>o.muted,set:p=>{o.muted=p,i.emit("muted",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],faaWv:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$video:o}=i.template;(0,n.def)(i,"currentTime",{get:()=>o.currentTime||0,set:l=>{Number.isNaN(l=parseFloat(l))||(o.currentTime=(0,n.clamp)(l,0,i.duration))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5y91K":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"duration",{get:()=>{let{duration:o}=i.template.$video;return o===1/0?0:o||0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iceD8:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){function o(l,d){return new Promise((f,p)=>{if(l===i.url)return;let{playing:h,aspectRatio:m,playbackRate:g}=i;i.pause(),i.url=l,i.notice.show="",i.once("video:error",p),i.once("video:loadedmetadata",()=>{i.currentTime=d}),i.once("video:canplay",async()=>{i.playbackRate=g,i.aspectRatio=m,h&&await i.play(),i.notice.show="",f()})})}(0,n.def)(i,"switchQuality",{value:l=>o(l,i.currentTime)}),(0,n.def)(i,"switchUrl",{value:l=>o(l,0)}),(0,n.def)(i,"switch",{set:i.switchUrl})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],keKwh:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:o},i18n:l,notice:d}=i;(0,n.def)(i,"playbackRate",{get:()=>o.playbackRate,set(f){f?f!==o.playbackRate&&(o.playbackRate=f,d.show=`${l.get("Rate")}: ${f===1?l.get("Normal"):`${f}x`}`):i.playbackRate=1}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jihET:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:o,notice:l,template:{$video:d,$player:f}}=i;(0,n.def)(i,"aspectRatio",{get:()=>f.dataset.aspectRatio||"default",set(p){if(p||(p="default"),p==="default")(0,n.setStyle)(d,"width",null),(0,n.setStyle)(d,"height",null),(0,n.setStyle)(d,"margin",null),delete f.dataset.aspectRatio;else{let h=p.split(":").map(Number),{clientWidth:m,clientHeight:g}=f,y=h[0]/h[1];m/g>y?((0,n.setStyle)(d,"width",`${y*g}px`),(0,n.setStyle)(d,"height","100%"),(0,n.setStyle)(d,"margin","0 auto")):((0,n.setStyle)(d,"width","100%"),(0,n.setStyle)(d,"height",`${m/y}px`),(0,n.setStyle)(d,"margin","auto 0")),f.dataset.aspectRatio=p}l.show=`${o.get("Aspect Ratio")}: ${p==="default"?o.get("Default"):p}`,i.emit("aspectRatio",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"36kPY":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{notice:o,template:{$video:l}}=i,d=(0,n.createElement)("canvas");(0,n.def)(i,"getDataURL",{value:()=>new Promise((f,p)=>{try{d.width=l.videoWidth,d.height=l.videoHeight,d.getContext("2d").drawImage(l,0,0),f(d.toDataURL("image/png"))}catch(h){o.show=h,p(h)}})}),(0,n.def)(i,"getBlobUrl",{value:()=>new Promise((f,p)=>{try{d.width=l.videoWidth,d.height=l.videoHeight,d.getContext("2d").drawImage(l,0,0),d.toBlob(h=>{f(URL.createObjectURL(h))})}catch(h){o.show=h,p(h)}})}),(0,n.def)(i,"screenshot",{value:async f=>{let p=await i.getDataURL(),h=f||`artplayer_${(0,n.secondToTime)(l.currentTime)}`;return(0,n.download)(p,`${h}.png`),i.emit("screenshot",p),p}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2GYOJ":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>o);var n=t("../libs/screenfull"),c=e.interopDefault(n),i=t("../utils");function o(l){let{i18n:d,notice:f,template:{$video:p,$player:h}}=l,m=y=>{c.default.on("change",()=>{y.emit("fullscreen",c.default.isFullscreen)}),c.default.on("error",w=>{y.emit("fullscreenError",w)}),(0,i.def)(y,"fullscreen",{get:()=>c.default.isFullscreen,async set(w){w?(y.state="fullscreen",await c.default.request(h),(0,i.addClass)(h,"art-fullscreen")):(await c.default.exit(),(0,i.removeClass)(h,"art-fullscreen")),y.emit("resize")}})},g=y=>{y.proxy(document,"webkitfullscreenchange",()=>{y.emit("fullscreen",y.fullscreen),y.emit("resize")}),(0,i.def)(y,"fullscreen",{get:()=>document.fullscreenElement===p,set(w){w?(y.state="fullscreen",p.webkitEnterFullscreen()):p.webkitExitFullscreen()}})};l.once("video:loadedmetadata",()=>{c.default.isEnabled?m(l):p.webkitSupportsFullscreen?g(l):(0,i.def)(l,"fullscreen",{get:()=>!1,set(){f.show=d.get("Fullscreen Not Supported")}}),(0,i.def)(l,"fullscreen",(0,i.get)(l,"fullscreen"))})}},{"../libs/screenfull":"8v40z","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8v40z":[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=(()=>{if(typeof document>"u")return!1;let o=e[0],l={};for(let d of e)if(d[1]in document){for(let[f,p]of d.entries())l[o[f]]=p;return l}return!1})(),c={change:n.fullscreenchange,error:n.fullscreenerror},i={request:(o=document.documentElement,l)=>new Promise((d,f)=>{let p=()=>{i.off("change",p),d()};i.on("change",p);let h=o[n.requestFullscreen](l);h instanceof Promise&&h.then(p).catch(f)}),exit:()=>new Promise((o,l)=>{if(!i.isFullscreen){o();return}let d=()=>{i.off("change",d),o()};i.on("change",d);let f=document[n.exitFullscreen]();f instanceof Promise&&f.then(d).catch(l)}),toggle:(o,l)=>i.isFullscreen?i.exit():i.request(o,l),onchange(o){i.on("change",o)},onerror(o){i.on("error",o)},on(o,l){let d=c[o];d&&document.addEventListener(d,l,!1)},off(o,l){let d=c[o];d&&document.removeEventListener(d,l,!1)},raw:n};Object.defineProperties(i,{isFullscreen:{get:()=>!!document[n.fullscreenElement]},element:{enumerable:!0,get:()=>document[n.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[n.fullscreenEnabled]}}),n||(i={isEnabled:!1}),r.default=i},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aYAP":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{constructor:o,template:{$container:l,$player:d}}=i,f="";(0,n.def)(i,"fullscreenWeb",{get:()=>(0,n.hasClass)(d,"art-fullscreen-web"),set(p){p?(f=d.style.cssText,o.FULLSCREEN_WEB_IN_BODY&&(0,n.append)(document.body,d),i.state="fullscreenWeb",(0,n.setStyle)(d,"width","100%"),(0,n.setStyle)(d,"height","100%"),(0,n.addClass)(d,"art-fullscreen-web"),i.emit("fullscreenWeb",!0)):(o.FULLSCREEN_WEB_IN_BODY&&(0,n.append)(l,d),f&&(d.style.cssText=f,f=""),(0,n.removeClass)(d,"art-fullscreen-web"),i.emit("fullscreenWeb",!1)),i.emit("resize")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7EnIB":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:o,notice:l,template:{$video:d}}=i;document.pictureInPictureEnabled?function(f){let{template:{$video:p},proxy:h,notice:m}=f;p.disablePictureInPicture=!1,(0,n.def)(f,"pip",{get:()=>document.pictureInPictureElement,set(g){g?(f.state="pip",p.requestPictureInPicture().catch(y=>{throw m.show=y,y})):document.exitPictureInPicture().catch(y=>{throw m.show=y,y})}}),h(p,"enterpictureinpicture",()=>{f.emit("pip",!0)}),h(p,"leavepictureinpicture",()=>{f.emit("pip",!1)})}(i):d.webkitSupportsPresentationMode?function(f){let{$video:p}=f.template;p.webkitSetPresentationMode("inline"),(0,n.def)(f,"pip",{get:()=>p.webkitPresentationMode==="picture-in-picture",set(h){h?(f.state="pip",p.webkitSetPresentationMode("picture-in-picture"),f.emit("pip",!0)):(p.webkitSetPresentationMode("inline"),f.emit("pip",!1))}})}(i):(0,n.def)(i,"pip",{get:()=>!1,set(){l.show=o.get("PIP Not Supported")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3N9mP":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$video:o}=i.template;(0,n.def)(i,"loaded",{get:()=>i.loadedTime/o.duration}),(0,n.def)(i,"loadedTime",{get:()=>o.buffered.length?o.buffered.end(o.buffered.length-1):0})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],et96R:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"played",{get:()=>i.currentTime/i.duration})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9DzzM":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$video:o}=i.template;(0,n.def)(i,"playing",{get:()=>typeof o.playing=="boolean"?o.playing:o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],i1LDY:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$container:o,$player:l,$video:d}=i.template;(0,n.def)(i,"autoSize",{value(){let{videoWidth:f,videoHeight:p}=d,{width:h,height:m}=(0,n.getRect)(o),g=f/p;h/m>g?((0,n.setStyle)(l,"width",`${m*g/h*100}%`),(0,n.setStyle)(l,"height","100%")):((0,n.setStyle)(l,"width","100%"),(0,n.setStyle)(l,"height",`${h/g/m*100}%`)),i.emit("autoSize",{width:i.width,height:i.height})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],IqARI:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"rect",{get:()=>(0,n.getRect)(i.template.$player)});let o=["bottom","height","left","right","top","width"];for(let l=0;l<o.length;l++){let d=o[l];(0,n.def)(i,d,{get:()=>i.rect[d]})}(0,n.def)(i,"x",{get:()=>i.left+window.pageXOffset}),(0,n.def)(i,"y",{get:()=>i.top+window.pageYOffset})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7E7Vs":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$player:o},i18n:l,notice:d}=i;(0,n.def)(i,"flip",{get:()=>o.dataset.flip||"normal",set(f){f||(f="normal"),f==="normal"?delete o.dataset.flip:o.dataset.flip=f,d.show=`${l.get("Video Flip")}: ${l.get((0,n.capitalize)(f))}`,i.emit("flip",f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gpugx:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{icons:o,proxy:l,storage:d,template:{$player:f,$video:p}}=i,h=!1,m=0,g=0;function y(){let{$mini:b}=i.template;b&&((0,n.removeClass)(f,"art-mini"),(0,n.setStyle)(b,"display","none"),f.prepend(p),i.emit("mini",!1))}function w(b,k){i.playing?((0,n.setStyle)(b,"display","none"),(0,n.setStyle)(k,"display","flex")):((0,n.setStyle)(b,"display","flex"),(0,n.setStyle)(k,"display","none"))}function v(){let{$mini:b}=i.template,k=(0,n.getRect)(b),j=window.innerHeight-k.height-50,x=window.innerWidth-k.width-50;d.set("top",j),d.set("left",x),(0,n.setStyle)(b,"top",`${j}px`),(0,n.setStyle)(b,"left",`${x}px`)}(0,n.def)(i,"mini",{get:()=>(0,n.hasClass)(f,"art-mini"),set(b){if(b){i.state="mini",(0,n.addClass)(f,"art-mini");let k=function(){let{$mini:C}=i.template;if(C)return(0,n.append)(C,p),(0,n.setStyle)(C,"display","flex");{let _=(0,n.createElement)("div");(0,n.addClass)(_,"art-mini-popup"),(0,n.append)(document.body,_),i.template.$mini=_,(0,n.append)(_,p);let P=(0,n.append)(_,'<div class="art-mini-close"></div>');(0,n.append)(P,o.close),l(P,"click",y);let S=(0,n.append)(_,'<div class="art-mini-state"></div>'),I=(0,n.append)(S,o.play),E=(0,n.append)(S,o.pause);return l(I,"click",()=>i.play()),l(E,"click",()=>i.pause()),w(I,E),i.on("video:playing",()=>w(I,E)),i.on("video:pause",()=>w(I,E)),i.on("video:timeupdate",()=>w(I,E)),l(_,"mousedown",T=>{h=T.button===0,m=T.pageX,g=T.pageY}),i.on("document:mousemove",T=>{if(h){(0,n.addClass)(_,"art-mini-droging");let M=T.pageX-m,$=T.pageY-g;(0,n.setStyle)(_,"transform",`translate(${M}px, ${$}px)`)}}),i.on("document:mouseup",()=>{if(h){h=!1,(0,n.removeClass)(_,"art-mini-droging");let T=(0,n.getRect)(_);d.set("left",T.left),d.set("top",T.top),(0,n.setStyle)(_,"left",`${T.left}px`),(0,n.setStyle)(_,"top",`${T.top}px`),(0,n.setStyle)(_,"transform",null)}}),_}}(),j=d.get("top"),x=d.get("left");j&&x?((0,n.setStyle)(k,"top",`${j}px`),(0,n.setStyle)(k,"left",`${x}px`),(0,n.isInViewport)(k)||v()):v(),i.emit("mini",!0)}else y()}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1SuFS":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$poster:o}}=i;(0,n.def)(i,"poster",{get:()=>{try{return o.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(l){(0,n.setStyle)(o,"backgroundImage",`url(${l})`)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8x4te":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$container:o,$video:l}}=i;(0,n.def)(i,"autoHeight",{value(){let{clientWidth:d}=o,{videoHeight:f,videoWidth:p}=l,h=d/p*f;(0,n.setStyle)(o,"height",h+"px"),i.emit("autoHeight",h)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1CaTA":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$player:o}=i.template;(0,n.def)(i,"cssVar",{value:(l,d)=>d?o.style.setProperty(l,d):getComputedStyle(o).getPropertyValue(l)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2FqhO":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"theme",{get:()=>i.cssVar("--art-theme"),set(o){i.cssVar("--art-theme",o)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1fQQs":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"type",{get:()=>i.option.type,set(o){i.option.type=o}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iBOQW:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let o=["mini","pip","fullscreen","fullscreenWeb"];(0,n.def)(i,"state",{get:()=>o.find(l=>i[l])||"standard",set(l){for(let d=0;d<o.length;d++){let f=o[d];f!==l&&i[f]&&(i[f]=!1)}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6vlBV":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{notice:o,i18n:l,template:d}=i;(0,n.def)(i,"subtitleOffset",{get:()=>{var f;return((f=d.$track)==null?void 0:f.offset)||0},set(f){let{cues:p}=i.subtitle;if(!d.$track||p.length===0)return;let h=(0,n.clamp)(f,-10,10);d.$track.offset=h;for(let m=0;m<p.length;m++){let g=p[m];g.originalStartTime=g.originalStartTime??g.startTime,g.originalEndTime=g.originalEndTime??g.endTime,g.startTime=(0,n.clamp)(g.originalStartTime+h,0,i.duration),g.endTime=(0,n.clamp)(g.originalEndTime+h,0,i.duration)}i.subtitle.update(),o.show=`${l.get("Subtitle Offset")}: ${f}s`,i.emit("subtitleOffset",f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eftqT:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:o,notice:l,proxy:d,template:{$video:f}}=i,p=!0;window.WebKitPlaybackTargetAvailabilityEvent&&f.webkitShowPlaybackTargetPicker?d(f,"webkitplaybacktargetavailabilitychanged",h=>{switch(h.availability){case"available":p=!0;break;case"not-available":p=!1}}):p=!1,(0,n.def)(i,"airplay",{value(){p?(f.webkitShowPlaybackTargetPicker(),i.emit("airplay")):l.show=o.get("AirPlay Not Available")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5SdyX":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"quality",{set(o){let{controls:l,notice:d,i18n:f}=i,p=o.find(h=>h.default)||o[0];l.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:(p==null?void 0:p.html)||"",selector:o,onSelect:async h=>(await i.switchQuality(h.url),d.show=`${f.get("Switch Video")}: ${h.html}`,h.html)})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4HcqV":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{events:o,option:l,template:{$progress:d,$video:f}}=i,p=null,h=null,m=!1,g=!1,y=!1;o.hover(d,()=>{y=!0},()=>{y=!1}),i.on("setBar",async(w,v,b)=>{var _;let k=(_=i.controls)==null?void 0:_.thumbnails,{url:j,scale:x}=l.thumbnails;if(!k||!j)return;let C=w==="played"&&b&&n.isMobile;if(w==="hover"||C){if(m||(m=!0,h=await(0,n.loadImg)(j,x),g=!0),!g||!y)return;let P=d.clientWidth*v;(0,n.setStyle)(k,"display","flex"),P>0&&P<d.clientWidth?function(S){var K;let I=(K=i.controls)==null?void 0:K.thumbnails;if(!I)return;let{number:E,column:T,width:M,height:$,scale:B}=l.thumbnails,N=M*B||h.naturalWidth/T,L=$*B||N/(f.videoWidth/f.videoHeight),z=Math.floor(S/(d.clientWidth/E)),W=Math.ceil(z/T)-1;(0,n.setStyle)(I,"backgroundImage",`url(${h.src})`),(0,n.setStyle)(I,"height",`${L}px`),(0,n.setStyle)(I,"width",`${N}px`),(0,n.setStyle)(I,"backgroundPosition",`-${(z%T||T-1)*N}px -${W*L}px`),S<=N/2?(0,n.setStyle)(I,"left",0):S>d.clientWidth-N/2?(0,n.setStyle)(I,"left",`${d.clientWidth-N}px`):(0,n.setStyle)(I,"left",`${S-N/2}px`)}(P):n.isMobile||(0,n.setStyle)(k,"display","none"),C&&(clearTimeout(p),p=setTimeout(()=>{(0,n.setStyle)(k,"display","none")},500))}}),(0,n.def)(i,"thumbnails",{get:()=>i.option.thumbnails,set(w){w.url&&!i.option.isLive&&(i.option.thumbnails=w,clearTimeout(p),p=null,h=null,m=!1,g=!1)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fCWZK:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{option:o,storage:l,template:{$video:d,$poster:f}}=i;for(let h in o.moreVideoAttr)i.attr(h,o.moreVideoAttr[h]);o.muted&&(i.muted=o.muted),o.volume&&(d.volume=(0,n.clamp)(o.volume,0,1));let p=l.get("volume");for(let h in typeof p=="number"&&(d.volume=(0,n.clamp)(p,0,1)),o.poster&&(0,n.setStyle)(f,"backgroundImage",`url(${o.poster})`),o.autoplay&&(d.autoplay=o.autoplay),o.playsInline&&(d.playsInline=!0,d["webkit-playsinline"]=!0),o.theme&&(o.cssVar["--art-theme"]=o.theme),o.cssVar)i.cssVar(h,o.cssVar[h]);i.url=o.url}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f8Lv3:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>o);var n=t("../config"),c=e.interopDefault(n),i=t("../utils");function o(l){let{i18n:d,notice:f,option:p,constructor:h,proxy:m,template:{$player:g,$video:y,$poster:w}}=l,v=0;for(let b=0;b<c.default.events.length;b++)m(y,c.default.events[b],k=>{l.emit(`video:${k.type}`,k)});l.on("video:canplay",()=>{v=0,l.loading.show=!1}),l.once("video:canplay",()=>{l.loading.show=!1,l.controls.show=!0,l.mask.show=!0,l.isReady=!0,l.emit("ready")}),l.on("video:ended",()=>{p.loop?(l.seek=0,l.play(),l.controls.show=!1,l.mask.show=!1):(l.controls.show=!0,l.mask.show=!0)}),l.on("video:error",async b=>{v<h.RECONNECT_TIME_MAX?(await(0,i.sleep)(h.RECONNECT_SLEEP_TIME),v+=1,l.url=p.url,f.show=`${d.get("Reconnect")}: ${v}`,l.emit("error",b,v)):(l.mask.show=!0,l.loading.show=!1,l.controls.show=!0,(0,i.addClass)(g,"art-error"),await(0,i.sleep)(h.RECONNECT_SLEEP_TIME),f.show=d.get("Video Load Failed"))}),l.on("video:loadedmetadata",()=>{l.emit("resize"),i.isMobile&&(l.loading.show=!1,l.controls.show=!0,l.mask.show=!0)}),l.on("video:loadstart",()=>{l.loading.show=!0,l.mask.show=!1,l.controls.show=!0}),l.on("video:pause",()=>{l.controls.show=!0,l.mask.show=!0}),l.on("video:play",()=>{l.mask.show=!1,(0,i.setStyle)(w,"display","none")}),l.on("video:playing",()=>{l.mask.show=!1}),l.on("video:progress",()=>{l.playing&&(l.loading.show=!1)}),l.on("video:seeked",()=>{l.loading.show=!1,l.mask.show=!0}),l.on("video:seeking",()=>{l.loading.show=!0,l.mask.show=!1}),l.on("video:timeupdate",()=>{l.mask.show=!1}),l.on("video:waiting",()=>{l.loading.show=!0,l.mask.show=!1})}},{"../config":"lyjeQ","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8Z0Uf":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils/component"),c=e.interopDefault(n),i=t("./fullscreen"),o=e.interopDefault(i),l=t("./fullscreenWeb"),d=e.interopDefault(l),f=t("./pip"),p=e.interopDefault(f),h=t("./playAndPause"),m=e.interopDefault(h),g=t("./progress"),y=e.interopDefault(g),w=t("./time"),v=e.interopDefault(w),b=t("./volume"),k=e.interopDefault(b),j=t("./setting"),x=e.interopDefault(j),C=t("./screenshot"),_=e.interopDefault(C),P=t("./airplay"),S=e.interopDefault(P),I=t("../utils");class E extends c.default{constructor(M){super(M),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:$}=M,{$player:B,$bottom:N}=this.art.template;M.on("mousemove",()=>{I.isMobile||(this.show=!0)}),M.on("click",()=>{I.isMobile?this.toggle():this.show=!0}),M.on("document:mousemove",L=>{this.isHover=(0,I.includeFromEvent)(L,N)}),M.on("video:timeupdate",()=>{!M.setting.show&&!this.isHover&&!M.isInput&&M.playing&&this.show&&Date.now()-this.timer>=$.CONTROL_HIDE_TIME&&(this.show=!1)}),M.on("control",L=>{L?((0,I.removeClass)(B,"art-hide-cursor"),(0,I.addClass)(B,"art-hover"),this.timer=Date.now()):((0,I.addClass)(B,"art-hide-cursor"),(0,I.removeClass)(B,"art-hover"))}),this.init()}init(){let{option:M}=this.art;M.isLive||this.add((0,y.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,m.default)({name:"playAndPause",position:"left",index:10})),this.add((0,k.default)({name:"volume",position:"left",index:20})),M.isLive||this.add((0,v.default)({name:"time",position:"left",index:30})),M.quality.length&&(0,I.sleep)().then(()=>{this.art.quality=M.quality}),M.screenshot&&!I.isMobile&&this.add((0,_.default)({name:"screenshot",position:"right",index:20})),M.setting&&this.add((0,x.default)({name:"setting",position:"right",index:30})),M.pip&&this.add((0,p.default)({name:"pip",position:"right",index:40})),M.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,S.default)({name:"airplay",position:"right",index:50})),M.fullscreenWeb&&this.add((0,d.default)({name:"fullscreenWeb",position:"right",index:60})),M.fullscreen&&this.add((0,o.default)({name:"fullscreen",position:"right",index:70}));for(let $=0;$<M.controls.length;$++)this.add(M.controls[$])}add(M){let $=typeof M=="function"?M(this.art):M,{$progress:B,$controlsLeft:N,$controlsRight:L}=this.art.template;switch($.position){case"top":this.$parent=B;break;case"left":this.$parent=N;break;case"right":this.$parent=L;break;default:(0,I.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add($)}check(M){M.$control_value.innerHTML=M.html;for(let $=0;$<M.$control_option.length;$++){let B=M.$control_option[$];B.default=B===M,B.default&&(0,I.inverseClass)(B.$control_item,"art-current")}}selector(M,$,B){let{proxy:N}=this.art.events;(0,I.addClass)($,"art-control-selector");let L=(0,I.createElement)("div");(0,I.addClass)(L,"art-selector-value"),(0,I.append)(L,M.html),$.innerText="",(0,I.append)($,L);let z=(0,I.createElement)("div");(0,I.addClass)(z,"art-selector-list"),(0,I.append)($,z);for(let K=0;K<M.selector.length;K++){let D=M.selector[K],R=(0,I.createElement)("div");(0,I.addClass)(R,"art-selector-item"),D.default&&(0,I.addClass)(R,"art-current"),R.dataset.index=K,R.dataset.value=D.value,R.innerHTML=D.html,(0,I.append)(z,R),(0,I.def)(D,"$control_option",{get:()=>M.selector}),(0,I.def)(D,"$control_item",{get:()=>R}),(0,I.def)(D,"$control_value",{get:()=>L})}let W=N(z,"click",async K=>{let D=K.composedPath()||[],R=M.selector.find(U=>U.$control_item===D.find(O=>U.$control_item===O));this.check(R),M.onSelect&&(L.innerHTML=await M.onSelect.call(this.art,R,R.$control_item,K))});B.push(W)}}r.default=E},{"../utils/component":"18nVI","./fullscreen":"c61Lj","./fullscreenWeb":"03jeB","./pip":"u8l8e","./playAndPause":"ebXtb","./progress":"bgoVP","./time":"ikc2j","./volume":"b8NFx","./setting":"03o9l","./screenshot":"4KCF5","./airplay":"4IS2d","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"18nVI":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./dom"),c=t("./error"),i=t("option-validator"),o=e.interopDefault(i),l=t("../scheme");r.default=class{constructor(d){this.id=0,this.art=d,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,n.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(d){let{$player:f}=this.art.template,p=`art-${this.name}-show`;d?(0,n.addClass)(f,p):(0,n.removeClass)(f,p),this.art.emit(this.name,d)}toggle(){this.show=!this.show}add(d){let f=typeof d=="function"?d(this.art):d;if(f.html=f.html||"",(0,o.default)(f,l.ComponentOption),!this.$parent||!this.name||f.disable)return;let p=f.name||`${this.name}${this.id}`,h=this.cache.get(p);(0,c.errorHandle)(!h,`Can't add an existing [${p}] to the [${this.name}]`),this.id+=1;let m=(0,n.createElement)("div");(0,n.addClass)(m,`art-${this.name}`),(0,n.addClass)(m,`art-${this.name}-${p}`);let g=Array.from(this.$parent.children);m.dataset.index=f.index||this.id;let y=g.find(v=>Number(v.dataset.index)>=Number(m.dataset.index));y?y.insertAdjacentElement("beforebegin",m):(0,n.append)(this.$parent,m),f.html&&(0,n.append)(m,f.html),f.style&&(0,n.setStyles)(m,f.style),f.tooltip&&(0,n.tooltip)(m,f.tooltip);let w=[];if(f.click){let v=this.art.events.proxy(m,"click",b=>{b.preventDefault(),f.click.call(this.art,this,b)});w.push(v)}return f.selector&&["left","right"].includes(f.position)&&this.selector(f,m,w),this[p]=m,this.cache.set(p,{$ref:m,events:w,option:f}),f.mounted&&f.mounted.call(this.art,m),m}remove(d){let f=this.cache.get(d);(0,c.errorHandle)(f,`Can't find [${d}] from the [${this.name}]`),f.option.beforeUnmount&&f.option.beforeUnmount.call(this.art,f.$ref);for(let p=0;p<f.events.length;p++)this.art.events.remove(f.events[p]);this.cache.delete(d),delete this[d],(0,n.remove)(f.$ref)}update(d){let f=this.cache.get(d.name);return f&&(d=Object.assign(f.option,d),this.remove(d.name)),this.add(d)}}},{"./dom":"bSNiV","./error":"hwmZz","option-validator":"bAWi2","../scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],c61Lj:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,tooltip:o.i18n.get("Fullscreen"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=o,h=(0,n.append)(l,f.fullscreenOn),m=(0,n.append)(l,f.fullscreenOff);(0,n.setStyle)(m,"display","none"),d(l,"click",()=>{o.fullscreen=!o.fullscreen}),o.on("fullscreen",g=>{g?((0,n.tooltip)(l,p.get("Exit Fullscreen")),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","inline-flex")):((0,n.tooltip)(l,p.get("Fullscreen")),(0,n.setStyle)(h,"display","inline-flex"),(0,n.setStyle)(m,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03jeB":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,tooltip:o.i18n.get("Web Fullscreen"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=o,h=(0,n.append)(l,f.fullscreenWebOn),m=(0,n.append)(l,f.fullscreenWebOff);(0,n.setStyle)(m,"display","none"),d(l,"click",()=>{o.fullscreenWeb=!o.fullscreenWeb}),o.on("fullscreenWeb",g=>{g?((0,n.tooltip)(l,p.get("Exit Web Fullscreen")),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","inline-flex")):((0,n.tooltip)(l,p.get("Web Fullscreen")),(0,n.setStyle)(h,"display","inline-flex"),(0,n.setStyle)(m,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],u8l8e:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,tooltip:o.i18n.get("PIP Mode"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=o;(0,n.append)(l,f.pip),d(l,"click",()=>{o.pip=!o.pip}),o.on("pip",h=>{(0,n.tooltip)(l,p.get(h?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ebXtb:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,mounted:l=>{let{proxy:d,icons:f,i18n:p}=o,h=(0,n.append)(l,f.play),m=(0,n.append)(l,f.pause);function g(){(0,n.setStyle)(h,"display","flex"),(0,n.setStyle)(m,"display","none")}function y(){(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","flex")}(0,n.tooltip)(h,p.get("Play")),(0,n.tooltip)(m,p.get("Pause")),d(h,"click",()=>{o.play()}),d(m,"click",()=>{o.pause()}),o.playing?y():g(),o.on("video:playing",()=>{y()}),o.on("video:pause",()=>{g()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bgoVP:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"getPosFromEvent",()=>c),e.export(r,"setCurrentTime",()=>i),e.export(r,"default",()=>o);var n=t("../utils");function c(l,d){let{$progress:f}=l.template,{left:p}=(0,n.getRect)(f),h=n.isMobile?d.touches[0].clientX:d.clientX,m=(0,n.clamp)(h-p,0,f.clientWidth),g=m/f.clientWidth*l.duration,y=(0,n.secondToTime)(g),w=(0,n.clamp)(m/f.clientWidth,0,1);return{second:g,time:y,width:m,percentage:w}}function i(l,d){if(l.isRotate){let f=d.touches[0].clientY/l.height,p=f*l.duration;l.emit("setBar","played",f,d),l.seek=p}else{let{second:f,percentage:p}=c(l,d);l.emit("setBar","played",p,d),l.seek=f}}function o(l){return d=>{let{icons:f,option:p,proxy:h}=d;return{...l,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:m=>{let g=null,y=!1,w=(0,n.query)(".art-progress-hover",m),v=(0,n.query)(".art-progress-loaded",m),b=(0,n.query)(".art-progress-played",m),k=(0,n.query)(".art-progress-highlight",m),j=(0,n.query)(".art-progress-indicator",m),x=(0,n.query)(".art-progress-tip",m);function C(_,P){let{width:S,time:I}=P||c(d,_);x.innerText=I;let E=x.clientWidth;S<=E/2?(0,n.setStyle)(x,"left",0):S>m.clientWidth-E/2?(0,n.setStyle)(x,"left",`${m.clientWidth-E}px`):(0,n.setStyle)(x,"left",`${S-E/2}px`)}f.indicator?(0,n.append)(j,f.indicator):(0,n.setStyle)(j,"backgroundColor","var(--art-theme)"),d.on("setBar",function(_,P,S){let I=_==="played"&&S&&n.isMobile;_==="loaded"&&(0,n.setStyle)(v,"width",`${100*P}%`),_==="hover"&&(0,n.setStyle)(w,"width",`${100*P}%`),_==="played"&&((0,n.setStyle)(b,"width",`${100*P}%`),(0,n.setStyle)(j,"left",`${100*P}%`)),I&&((0,n.setStyle)(x,"display","flex"),C(S,{width:m.clientWidth*P,time:(0,n.secondToTime)(P*d.duration)}),clearTimeout(g),g=setTimeout(()=>{(0,n.setStyle)(x,"display","none")},500))}),d.on("video:loadedmetadata",function(){k.innerText="";for(let _=0;_<p.highlight.length;_++){let P=p.highlight[_],S=(0,n.clamp)(P.time,0,d.duration)/d.duration*100,I=`<span data-text="${P.text}" data-time="${P.time}" style="left: ${S}%"></span>`;(0,n.append)(k,I)}}),d.on("video:progress",()=>{d.emit("setBar","loaded",d.loaded)}),d.constructor.USE_RAF?d.on("raf",()=>{d.emit("setBar","played",d.played)}):d.on("video:timeupdate",()=>{d.emit("setBar","played",d.played)}),d.on("video:ended",()=>{d.emit("setBar","played",1)}),d.emit("setBar","loaded",d.loaded||0),n.isMobile||(h(m,"click",_=>{_.target!==j&&i(d,_)}),h(m,"mousemove",_=>{let{percentage:P}=c(d,_);d.emit("setBar","hover",P,_),(0,n.setStyle)(x,"display","flex"),(0,n.includeFromEvent)(_,k)?function(S){let{width:I}=c(d,S),{text:E}=S.target.dataset;x.innerText=E;let T=x.clientWidth;I<=T/2?(0,n.setStyle)(x,"left",0):I>m.clientWidth-T/2?(0,n.setStyle)(x,"left",`${m.clientWidth-T}px`):(0,n.setStyle)(x,"left",`${I-T/2}px`)}(_):C(_)}),h(m,"mouseleave",_=>{(0,n.setStyle)(x,"display","none"),d.emit("setBar","hover",0,_)}),h(m,"mousedown",_=>{y=_.button===0}),d.on("document:mousemove",_=>{if(y){let{second:P,percentage:S}=c(d,_);d.emit("setBar","played",S,_),d.seek=P}}),d.on("document:mouseup",()=>{y&&(y=!1)}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ikc2j:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,style:n.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:l=>{function d(){let p=`${(0,n.secondToTime)(o.currentTime)} / ${(0,n.secondToTime)(o.duration)}`;p!==l.innerText&&(l.innerText=p)}d();let f=["video:loadedmetadata","video:timeupdate","video:progress"];for(let p=0;p<f.length;p++)o.on(f[p],d)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],b8NFx:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,mounted:l=>{let{proxy:d,icons:f}=o,p=(0,n.append)(l,f.volume),h=(0,n.append)(l,f.volumeClose),m=(0,n.append)(l,'<div class="art-volume-panel"></div>'),g=(0,n.append)(m,'<div class="art-volume-inner"></div>'),y=(0,n.append)(g,'<div class="art-volume-val"></div>'),w=(0,n.append)(g,'<div class="art-volume-slider"></div>'),v=(0,n.append)(w,'<div class="art-volume-handle"></div>'),b=(0,n.append)(v,'<div class="art-volume-loaded"></div>'),k=(0,n.append)(w,'<div class="art-volume-indicator"></div>');function j(C){let{top:_,height:P}=(0,n.getRect)(w);return 1-(C.clientY-_)/P}function x(){if(o.muted||o.volume===0)(0,n.setStyle)(p,"display","none"),(0,n.setStyle)(h,"display","flex"),(0,n.setStyle)(k,"top","100%"),(0,n.setStyle)(b,"top","100%"),y.innerText=0;else{let C=100*o.volume;(0,n.setStyle)(p,"display","flex"),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(k,"top",`${100-C}%`),(0,n.setStyle)(b,"top",`${100-C}%`),y.innerText=Math.floor(C)}}if(x(),o.on("video:volumechange",x),d(p,"click",()=>{o.muted=!0}),d(h,"click",()=>{o.muted=!1}),n.isMobile)(0,n.setStyle)(m,"display","none");else{let C=!1;d(w,"mousedown",_=>{C=_.button===0,o.volume=j(_)}),o.on("document:mousemove",_=>{C&&(o.muted=!1,o.volume=j(_))}),o.on("document:mouseup",()=>{C&&(C=!1)})}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03o9l":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,tooltip:o.i18n.get("Show Setting"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=o;(0,n.append)(l,f.setting),d(l,"click",()=>{o.setting.toggle(),o.setting.resize()}),o.on("setting",h=>{(0,n.tooltip)(l,p.get(h?"Hide Setting":"Show Setting"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4KCF5":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,tooltip:o.i18n.get("Screenshot"),mounted:l=>{let{proxy:d,icons:f}=o;(0,n.append)(l,f.screenshot),d(l,"click",()=>{o.screenshot()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4IS2d":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>({...i,tooltip:o.i18n.get("AirPlay"),mounted:l=>{let{proxy:d,icons:f}=o;(0,n.append)(l,f.airplay),d(l,"click",()=>o.airplay())}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2KYsr":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("../utils/component"),i=e.interopDefault(c),o=t("./playbackRate"),l=e.interopDefault(o),d=t("./aspectRatio"),f=e.interopDefault(d),p=t("./flip"),h=e.interopDefault(p),m=t("./info"),g=e.interopDefault(m),y=t("./version"),w=e.interopDefault(y),v=t("./close"),b=e.interopDefault(v);class k extends i.default{constructor(x){super(x),this.name="contextmenu",this.$parent=x.template.$contextmenu,n.isMobile||this.init()}init(){let{option:x,proxy:C,template:{$player:_,$contextmenu:P}}=this.art;x.playbackRate&&this.add((0,l.default)({name:"playbackRate",index:10})),x.aspectRatio&&this.add((0,f.default)({name:"aspectRatio",index:20})),x.flip&&this.add((0,h.default)({name:"flip",index:30})),this.add((0,g.default)({name:"info",index:40})),this.add((0,w.default)({name:"version",index:50})),this.add((0,b.default)({name:"close",index:60}));for(let S=0;S<x.contextmenu.length;S++)this.add(x.contextmenu[S]);C(_,"contextmenu",S=>{if(!this.art.constructor.CONTEXTMENU)return;S.preventDefault(),this.show=!0;let I=S.clientX,E=S.clientY,{height:T,width:M,left:$,top:B}=(0,n.getRect)(_),{height:N,width:L}=(0,n.getRect)(P),z=I-$,W=E-B;I+L>$+M&&(z=M-L),E+N>B+T&&(W=T-N),(0,n.setStyles)(P,{top:`${W}px`,left:`${z}px`})}),C(_,"click",S=>{(0,n.includeFromEvent)(S,P)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}r.default=k},{"../utils":"71aH7","../utils/component":"18nVI","./playbackRate":"69eLi","./aspectRatio":"lUefg","./flip":"kysiM","./info":"gqIgJ","./version":"kRU7C","./close":"jQ8Pm","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"69eLi":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>{let{i18n:l,constructor:{PLAYBACK_RATE:d}}=o,f=d.map(p=>`<span data-value="${p}">${p===1?l.get("Normal"):p.toFixed(1)}</span>`).join("");return{...i,html:`${l.get("Play Speed")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(o.playbackRate=Number(m),p.show=!1)},mounted:p=>{let h=(0,n.query)('[data-value="1"]',p);h&&(0,n.inverseClass)(h,"art-current"),o.on("video:ratechange",()=>{let m=(0,n.queryAll)("span",p).find(g=>Number(g.dataset.value)===o.playbackRate);m&&(0,n.inverseClass)(m,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lUefg:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>{let{i18n:l,constructor:{ASPECT_RATIO:d}}=o,f=d.map(p=>`<span data-value="${p}">${p==="default"?l.get("Default"):p}</span>`).join("");return{...i,html:`${l.get("Aspect Ratio")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(o.aspectRatio=m,p.show=!1)},mounted:p=>{let h=(0,n.query)('[data-value="default"]',p);h&&(0,n.inverseClass)(h,"art-current"),o.on("aspectRatio",m=>{let g=(0,n.queryAll)("span",p).find(y=>y.dataset.value===m);g&&(0,n.inverseClass)(g,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kysiM:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return o=>{let{i18n:l,constructor:{FLIP:d}}=o,f=d.map(p=>`<span data-value="${p}">${l.get((0,n.capitalize)(p))}</span>`).join("");return{...i,html:`${l.get("Video Flip")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(o.flip=m.toLowerCase(),p.show=!1)},mounted:p=>{let h=(0,n.query)('[data-value="normal"]',p);h&&(0,n.inverseClass)(h,"art-current"),o.on("flip",m=>{let g=(0,n.queryAll)("span",p).find(y=>y.dataset.value===m);g&&(0,n.inverseClass)(g,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gqIgJ:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){return i=>({...c,html:i.i18n.get("Video Info"),click:o=>{i.info.show=!0,o.show=!1}})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kRU7C:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){return{...c,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.2.1</a>'}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jQ8Pm:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){return i=>({...c,html:i.i18n.get("Close"),click:o=>{o.show=!1}})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"02ajl":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class o extends i.default{constructor(d){super(d),this.name="info",n.isMobile||this.init()}init(){let{proxy:d,constructor:f,template:{$infoPanel:p,$infoClose:h,$video:m}}=this.art;d(h,"click",()=>{this.show=!1});let g=null,y=(0,n.queryAll)("[data-video]",p)||[];this.art.on("destroy",()=>clearTimeout(g)),function w(){for(let v=0;v<y.length;v++){let b=y[v],k=m[b.dataset.video],j=typeof k=="number"?k.toFixed(2):k;b.innerText!==j&&(b.innerText=j)}g=setTimeout(w,f.INFO_LOOP_TIME)}()}}r.default=o},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eSWto:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c),o=t("option-validator"),l=e.interopDefault(o),d=t("./scheme"),f=e.interopDefault(d);class p extends i.default{constructor(m){super(m),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(m.option.subtitle);let g=!1;m.on("video:timeupdate",()=>{if(!this.url)return;let y=this.art.template.$video.webkitDisplayingFullscreen;typeof y=="boolean"&&y!==g&&(g=y,this.createTrack(y?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(m){this.switch(m)}get textTrack(){var m,g;return(g=(m=this.art.template.$video)==null?void 0:m.textTracks)==null?void 0:g[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(m,g){let{$subtitle:y}=this.art.template;return typeof m=="object"?(0,n.setStyles)(y,m):(0,n.setStyle)(y,m,g)}update(){let{option:{subtitle:m},template:{$subtitle:g}}=this.art;g.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),g.innerHTML=this.activeCues.map((y,w)=>y.text.split(/\r?\n/).filter(v=>v.trim()).map(v=>`<div class="art-subtitle-line" data-group="${w}">${m.escape?(0,n.escape)(v):v}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(m,g={}){let{i18n:y,notice:w,option:v}=this.art,b={...v.subtitle,...g,url:m},k=await this.init(b);return g.name&&(w.show=`${y.get("Switch Subtitle")}: ${g.name}`),k}createTrack(m,g){let{template:y,proxy:w,option:v}=this.art,{$video:b,$track:k}=y,j=(0,n.createElement)("track");j.default=!0,j.kind=m,j.src=g,j.label=v.subtitle.name||"Artplayer",j.track.mode="hidden",j.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),k.onload=null,(0,n.remove)(k),(0,n.append)(b,j),y.$track=j,this.destroyEvent=w(this.textTrack,"cuechange",()=>this.update())}async init(m){let{notice:g,template:{$subtitle:y}}=this.art;return this.textTrack?((0,l.default)(m,f.default.subtitle),m.url?(this.option=m,this.style(m.style),fetch(m.url).then(w=>w.arrayBuffer()).then(w=>{let v=new TextDecoder(m.encoding).decode(w);switch(m.type||(0,n.getExt)(m.url)){case"srt":{let b=(0,n.srtToVtt)(v),k=m.onVttLoad(b);return(0,n.vttToBlob)(k)}case"ass":{let b=(0,n.assToVtt)(v),k=m.onVttLoad(b);return(0,n.vttToBlob)(k)}case"vtt":{let b=m.onVttLoad(v);return(0,n.vttToBlob)(b)}default:return m.url}}).then(w=>(y.innerHTML="",this.url===w||(URL.revokeObjectURL(this.url),this.createTrack("metadata",w)),w)).catch(w=>{throw y.innerHTML="",g.show=w,w})):void 0):null}}r.default=p},{"./utils":"71aH7","./utils/component":"18nVI","option-validator":"bAWi2","./scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jo4S1:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./clickInit"),c=e.interopDefault(n),i=t("./hoverInit"),o=e.interopDefault(i),l=t("./moveInit"),d=e.interopDefault(l),f=t("./resizeInit"),p=e.interopDefault(f),h=t("./gestureInit"),m=e.interopDefault(h),g=t("./viewInit"),y=e.interopDefault(g),w=t("./documentInit"),v=e.interopDefault(w),b=t("./updateInit"),k=e.interopDefault(b),j=t("./restoreInit"),x=e.interopDefault(j);r.default=class{constructor(C){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,c.default)(C,this),(0,o.default)(C,this),(0,d.default)(C,this),(0,p.default)(C,this),(0,m.default)(C,this),(0,y.default)(C,this),(0,v.default)(C,this),(0,k.default)(C,this),(0,x.default)(C,this)}proxy(C,_,P,S={}){if(Array.isArray(_))return _.map(E=>this.proxy(C,E,P,S));C.addEventListener(_,P,S);let I=()=>C.removeEventListener(_,P,S);return this.destroyEvents.push(I),I}hover(C,_,P){_&&this.proxy(C,"mouseenter",_),P&&this.proxy(C,"mouseleave",P)}remove(C){let _=this.destroyEvents.indexOf(C);_>-1&&(C(),this.destroyEvents.splice(_,1))}destroy(){for(let C=0;C<this.destroyEvents.length;C++)this.destroyEvents[C]()}}},{"./clickInit":"6UrCm","./hoverInit":"4jWHi","./moveInit":"eqaUm","./resizeInit":"eDXPO","./gestureInit":"95GtS","./viewInit":"InUBx","./documentInit":"hoLfM","./updateInit":"cl8m3","./restoreInit":"bK8As","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6UrCm":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,o){let{constructor:l,template:{$player:d,$video:f}}=i;o.proxy(document,["click","contextmenu"],h=>{(0,n.includeFromEvent)(h,d)?(i.isInput=h.target.tagName==="INPUT",i.isFocus=!0,i.emit("focus",h)):(i.isInput=!1,i.isFocus=!1,i.emit("blur",h))});let p=[];o.proxy(f,"click",h=>{let m=Date.now();p.push(m);let{MOBILE_CLICK_PLAY:g,DBCLICK_TIME:y,MOBILE_DBCLICK_PLAY:w,DBCLICK_FULLSCREEN:v}=l,b=p.filter(k=>m-k<=y);switch(b.length){case 1:i.emit("click",h),n.isMobile?!i.isLock&&g&&i.toggle():i.toggle(),p=b;break;case 2:i.emit("dblclick",h),n.isMobile?!i.isLock&&w&&i.toggle():v&&(i.fullscreen=!i.fullscreen),p=[];break;default:p=[]}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4jWHi":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,o){let{$player:l}=i.template;o.hover(l,d=>{(0,n.addClass)(l,"art-hover"),i.emit("hover",!0,d)},d=>{(0,n.removeClass)(l,"art-hover"),i.emit("hover",!1,d)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eqaUm:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){let{$player:o}=c.template;i.proxy(o,"mousemove",l=>{c.emit("mousemove",l)})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eDXPO:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,o){let{option:l,constructor:d}=i;i.on("resize",()=>{let{aspectRatio:p,notice:h}=i;i.state==="standard"&&l.autoSize&&i.autoSize(),i.aspectRatio=p,h.show=""});let f=(0,n.debounce)(()=>i.emit("resize"),d.RESIZE_TIME);o.proxy(window,["orientationchange","resize"],()=>f()),screen&&screen.orientation&&screen.orientation.onchange&&o.proxy(screen.orientation,"change",()=>f())}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"95GtS":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>i);var n=t("../utils"),c=t("../control/progress");function i(o,l){if(n.isMobile&&!o.option.isLive){let{$video:d,$progress:f}=o.template,p=null,h=!1,m=0,g=0,y=0,w=b=>{if(b.touches.length===1&&!o.isLock){p===f&&(0,c.setCurrentTime)(o,b),h=!0;let{pageX:k,pageY:j}=b.touches[0];m=k,g=j,y=o.currentTime}},v=b=>{if(b.touches.length===1&&h&&o.duration){let{pageX:k,pageY:j}=b.touches[0],x=function(P,S,I,E){var T=S-E,M=I-P,$=0;if(2>Math.abs(M)&&2>Math.abs(T))return $;var B=180*Math.atan2(T,M)/Math.PI;return B>=-45&&B<45?$=4:B>=45&&B<135?$=1:B>=-135&&B<-45?$=2:(B>=135&&B<=180||B>=-180&&B<-135)&&($=3),$}(m,g,k,j),C=[3,4].includes(x),_=[1,2].includes(x);if(C&&!o.isRotate||_&&o.isRotate){let P=(0,n.clamp)((k-m)/o.width,-1,1),S=(0,n.clamp)((j-g)/o.height,-1,1),I=o.isRotate?S:P,E=p===d?o.constructor.TOUCH_MOVE_RATIO:1,T=(0,n.clamp)(y+o.duration*I*E,0,o.duration);o.seek=T,o.emit("setBar","played",(0,n.clamp)(T/o.duration,0,1),b),o.notice.show=`${(0,n.secondToTime)(T)} / ${(0,n.secondToTime)(o.duration)}`}}};l.proxy(f,"touchstart",b=>{p=f,w(b)}),l.proxy(d,"touchstart",b=>{p=d,w(b)}),l.proxy(d,"touchmove",v),l.proxy(f,"touchmove",v),l.proxy(document,"touchend",()=>{h&&(m=0,g=0,y=0,h=!1,p=null)})}}},{"../utils":"71aH7","../control/progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],InUBx:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,o){let{option:l,constructor:d,template:{$container:f}}=i,p=(0,n.throttle)(()=>{i.emit("view",(0,n.isInViewport)(f,d.SCROLL_GAP))},d.SCROLL_TIME);o.proxy(window,"scroll",()=>p()),i.on("view",h=>{l.autoMini&&(i.mini=!h)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hoLfM:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){i.proxy(document,"mousemove",o=>{c.emit("document:mousemove",o)}),i.proxy(document,"mouseup",o=>{c.emit("document:mouseup",o)})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cl8m3:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){if(c.constructor.USE_RAF){let i=null;(function o(){c.playing&&c.emit("raf"),c.isDestroy||(i=requestAnimationFrame(o))})(),c.on("destroy",()=>{cancelAnimationFrame(i)})}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bK8As:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6NoFy":[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var e=t("./utils");r.default=class{constructor(n){this.art=n,this.keys={},n.option.hotkey&&!e.isMobile&&this.init()}init(){let{proxy:n,constructor:c}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=c.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=c.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=c.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=c.VOLUME_STEP}),n(document,"keydown",i=>{if(this.art.isFocus){let o=document.activeElement.tagName.toUpperCase(),l=document.activeElement.getAttribute("contenteditable");if(o!=="INPUT"&&o!=="TEXTAREA"&&l!==""&&l!=="true"&&!i.altKey&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey){let d=this.keys[i.code];if(d){i.preventDefault();for(let f=0;f<d.length;f++)d[f].call(this.art,i);this.art.emit("hotkey",i)}}}this.art.emit("keydown",i)})}add(n,c){return this.keys[n]?this.keys[n].push(c):this.keys[n]=[c],this}remove(n,c){if(this.keys[n]){let i=this.keys[n].indexOf(c);i!==-1&&this.keys[n].splice(i,1)}return this}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6G6hZ":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils/component"),c=e.interopDefault(n);class i extends c.default{constructor(l){super(l);let{option:d,template:{$layer:f}}=l;this.name="layer",this.$parent=f;for(let p=0;p<d.layers.length;p++)this.add(d.layers[p])}}r.default=i},{"./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3dsEe":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class o extends i.default{constructor(d){super(d),this.name="loading",(0,n.append)(d.template.$loading,d.icons.loading)}}r.default=o},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],dWGTw:[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var e=t("./utils");r.default=class{constructor(n){this.art=n,this.timer=null}set show(n){let{constructor:c,template:{$player:i,$noticeInner:o}}=this.art;n?(o.innerText=n instanceof Error?n.message.trim():n,(0,e.addClass)(i,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{o.innerText="",(0,e.removeClass)(i,"art-notice-show")},c.NOTICE_TIME)):(0,e.removeClass)(i,"art-notice-show")}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5POkG":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class o extends i.default{constructor(d){super(d),this.name="mask";let{template:f,icons:p,events:h}=d,m=(0,n.append)(f.$state,p.state),g=(0,n.append)(f.$state,p.error);(0,n.setStyle)(g,"display","none"),d.on("destroy",()=>{(0,n.setStyle)(m,"display","none"),(0,n.setStyle)(g,"display",null)}),h.proxy(f.$state,"click",()=>d.play())}}r.default=o},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6OeNg":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("bundle-text:./loading.svg"),i=e.interopDefault(c),o=t("bundle-text:./state.svg"),l=e.interopDefault(o),d=t("bundle-text:./check.svg"),f=e.interopDefault(d),p=t("bundle-text:./play.svg"),h=e.interopDefault(p),m=t("bundle-text:./pause.svg"),g=e.interopDefault(m),y=t("bundle-text:./volume.svg"),w=e.interopDefault(y),v=t("bundle-text:./volume-close.svg"),b=e.interopDefault(v),k=t("bundle-text:./screenshot.svg"),j=e.interopDefault(k),x=t("bundle-text:./setting.svg"),C=e.interopDefault(x),_=t("bundle-text:./arrow-left.svg"),P=e.interopDefault(_),S=t("bundle-text:./arrow-right.svg"),I=e.interopDefault(S),E=t("bundle-text:./playback-rate.svg"),T=e.interopDefault(E),M=t("bundle-text:./aspect-ratio.svg"),$=e.interopDefault(M),B=t("bundle-text:./config.svg"),N=e.interopDefault(B),L=t("bundle-text:./pip.svg"),z=e.interopDefault(L),W=t("bundle-text:./lock.svg"),K=e.interopDefault(W),D=t("bundle-text:./unlock.svg"),R=e.interopDefault(D),U=t("bundle-text:./fullscreen-off.svg"),O=e.interopDefault(U),Z=t("bundle-text:./fullscreen-on.svg"),ot=e.interopDefault(Z),lt=t("bundle-text:./fullscreen-web-off.svg"),ct=e.interopDefault(lt),Bt=t("bundle-text:./fullscreen-web-on.svg"),Lt=e.interopDefault(Bt),$t=t("bundle-text:./switch-on.svg"),Rt=e.interopDefault($t),Ht=t("bundle-text:./switch-off.svg"),ht=e.interopDefault(Ht),Y=t("bundle-text:./flip.svg"),me=e.interopDefault(Y),ut=t("bundle-text:./error.svg"),xt=e.interopDefault(ut),kt=t("bundle-text:./close.svg"),mt=e.interopDefault(kt),ft=t("bundle-text:./airplay.svg"),Nt=e.interopDefault(ft);r.default=class{constructor(ge){let Zt={loading:i.default,state:l.default,play:h.default,pause:g.default,check:f.default,volume:w.default,volumeClose:b.default,screenshot:j.default,setting:C.default,pip:z.default,arrowLeft:P.default,arrowRight:I.default,playbackRate:T.default,aspectRatio:$.default,config:N.default,lock:K.default,flip:me.default,unlock:R.default,fullscreenOff:O.default,fullscreenOn:ot.default,fullscreenWebOff:ct.default,fullscreenWebOn:Lt.default,switchOn:Rt.default,switchOff:ht.default,error:xt.default,close:mt.default,airplay:Nt.default,...ge.option.icons};for(let zt in Zt)(0,n.def)(this,zt,{get:()=>(0,n.getIcon)(zt,Zt[zt])})}}},{"../utils":"71aH7","bundle-text:./loading.svg":"7tDub","bundle-text:./state.svg":"1ElZc","bundle-text:./check.svg":"lmgoP","bundle-text:./play.svg":"lVWoQ","bundle-text:./pause.svg":"5Mnax","bundle-text:./volume.svg":"w3eIa","bundle-text:./volume-close.svg":"rHjo1","bundle-text:./screenshot.svg":"2KcqM","bundle-text:./setting.svg":"8rQMV","bundle-text:./arrow-left.svg":"kqGBE","bundle-text:./arrow-right.svg":"aFjpC","bundle-text:./playback-rate.svg":"lx7ZM","bundle-text:./aspect-ratio.svg":"2sEjf","bundle-text:./config.svg":"fQTgE","bundle-text:./pip.svg":"2CaxO","bundle-text:./lock.svg":"aCGnW","bundle-text:./unlock.svg":"bTrAV","bundle-text:./fullscreen-off.svg":"bA3p0","bundle-text:./fullscreen-on.svg":"fTuY8","bundle-text:./fullscreen-web-off.svg":"tvKf4","bundle-text:./fullscreen-web-on.svg":"1F1oB","bundle-text:./switch-on.svg":"7qNHs","bundle-text:./switch-off.svg":"28aV8","bundle-text:./flip.svg":"1uXI6","bundle-text:./error.svg":"9f4dh","bundle-text:./close.svg":"4nTtS","bundle-text:./airplay.svg":"cDPXC","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7tDub":[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><path fill="none" class="bk" d="M0 0h100v100H0z"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(30 105.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(60 75.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(90 65 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(120 58.66 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(150 54.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(180 50 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-90 35 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>'},{}],"1ElZc":[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg>'},{}],lmgoP:[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"/></svg>'},{}],lVWoQ:[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"/></svg>'},{}],"5Mnax":[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zm8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"/></svg>'},{}],w3eIa:[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zm4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"/><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"/></svg>'},{}],rHjo1:[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"/><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zm5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"/></svg>'},{}],"2KcqM":[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10Zm0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8Z"/></svg>'},{}],"8rQMV":[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'},{}],kqGBE:[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z" fill="#fff"/></svg>'},{}],aFjpC:[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z" fill="#fff"/></svg>'},{}],lx7ZM:[function(t,s,r){s.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M10 8v8l6-4-6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2zM5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8zm0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4l.8-.7zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22l.1-1zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2sEjf":[function(t,s,r){s.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width:100%;height:100%;transform:translate(0,0)"><defs><clipPath id="a"><path d="M0 0h88v88H0z"/></clipPath></defs><g style="display:block" clip-path="url('#a')"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0zm-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13-2.83-2.82zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8h56z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>`},{}],fQTgE:[function(t,s,r){s.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M15 17h6v1h-6v-1zm-4 0H3v1h8v2h1v-5h-1v2zm3-9h1V3h-1v2H3v1h11v2zm4-3v1h3V5h-3zM6 14h1V9H6v2H3v1h3v2zm4-2h11v-1H10v1z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2CaxO":[function(t,s,r){s.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25 17h-8v6h8v-6Zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2Zm-2 .02H9V10.97h18v14.05Z"/></svg>'},{}],aCGnW:[function(t,s,r){s.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128z" fill="#fff"/></svg>'},{}],bTrAV:[function(t,s,r){s.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816z" fill="#fff"/></svg>'},{}],bA3p0:[function(t,s,r){s.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768v170.667zM341.333 384h-256v-85.333H256V128h85.333v256zM768 725.333V896h-85.333V640h256v85.333H768zM341.333 640v256H256V725.333H85.333V640h256z"/></svg>'},{}],fTuY8:[function(t,s,r){s.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256V256zM256 398.222V256h142.222V142.222h-256v256H256zm512 227.556V768H625.778v113.778h256v-256H768zM398.222 768H256V625.778H142.222v256h256V768z"/></svg>'},{}],tvKf4:[function(t,s,r){s.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384H896zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448H256z"/></svg>'},{}],"1F1oB":[function(t,s,r){s.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448H448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384H704z"/></svg>'},{}],"7qNHs":[function(t,s,r){s.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1664 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024zm0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448z"/></svg>'},{}],"28aV8":[function(t,s,r){s.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1740 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898zm-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.872 463.872 0 0 1 511.334 48.435v.205z"/></svg>'},{}],"1uXI6":[function(t,s,r){s.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M554.667 810.667V896h-85.334v-85.333h85.334zm-384-632.662a42.667 42.667 0 0 1 34.986 18.219l203.904 291.328a42.667 42.667 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667zm682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.667 42.667 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.667 42.667 0 0 1 34.944-18.219zM554.667 640v85.333h-85.334V640h85.334zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334h85.334zm0-170.667V384h-85.334v-85.333h85.334zm0-170.667v85.333h-85.334V128h85.334z" fill="#fff"/></svg>'},{}],"9f4dh":[function(t,s,r){s.exports='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.082 93.082 0 0 1 34.448 33.341zM512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88zm0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2z"/></svg>'},{}],"4nTtS":[function(t,s,r){s.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733L571.733 512z"/></svg>'},{}],cDPXC:[function(t,s,r){s.exports='<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],"3eYNH":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./flip"),c=e.interopDefault(n),i=t("./aspectRatio"),o=e.interopDefault(i),l=t("./playbackRate"),d=e.interopDefault(l),f=t("./subtitleOffset"),p=e.interopDefault(f),h=t("../utils/component"),m=e.interopDefault(h),g=t("../utils");class y extends m.default{constructor(v){super(v);let{option:b,controls:k,template:{$setting:j}}=v;this.name="setting",this.$parent=j,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...b.settings],b.setting&&(this.format(),this.render(),v.on("blur",()=>{this.show&&(this.show=!1,this.render())}),v.on("focus",x=>{let C=(0,g.includeFromEvent)(x,k.setting),_=(0,g.includeFromEvent)(x,this.$parent);!this.show||C||_||(this.show=!1,this.render())}),v.on("resize",()=>this.resize()))}get builtin(){let v=[],{option:b}=this.art;return b.playbackRate&&v.push((0,d.default)(this.art)),b.aspectRatio&&v.push((0,o.default)(this.art)),b.flip&&v.push((0,c.default)(this.art)),b.subtitleOffset&&v.push((0,p.default)(this.art)),v}traverse(v,b=this.option){var k;for(let j=0;j<b.length;j++){let x=b[j];v(x),(k=x.selector)!=null&&k.length&&this.traverse.call(this,v,x.selector)}}check(v){v.$parent.tooltip=v.html,this.traverse(b=>{b.default=b===v,b.default&&b.$item&&(0,g.inverseClass)(b.$item,"art-current")},v.$option),this.render(v.$parents)}format(v=this.option,b,k,j=[]){for(let x=0;x<v.length;x++){let C=v[x];if(C!=null&&C.name?((0,g.errorHandle)(!j.includes(C.name),`The [${C.name}] is already exist in [setting]`),j.push(C.name)):C.name=`setting-${this.id++}`,!C.$formatted){(0,g.def)(C,"$parent",{get:()=>b}),(0,g.def)(C,"$parents",{get:()=>k}),(0,g.def)(C,"$option",{get:()=>v});let _=[];(0,g.def)(C,"$events",{get:()=>_}),(0,g.def)(C,"$formatted",{get:()=>!0})}this.format(C.selector||[],C,v,j)}this.option=v}find(v=""){let b=null;return this.traverse(k=>{k.name===v&&(b=k)}),b}resize(){var C,_;let{controls:v,constructor:{SETTING_WIDTH:b,SETTING_ITEM_HEIGHT:k},template:{$player:j,$setting:x}}=this.art;if(v.setting&&this.show){let P=((_=(C=this.active[0])==null?void 0:C.$parent)==null?void 0:_.width)||b,{left:S,width:I}=(0,g.getRect)(v.setting),{left:E,width:T}=(0,g.getRect)(j),M=S-E+I/2-P/2,$=this.active===this.option?this.active.length*k:(this.active.length+1)*k;(0,g.setStyle)(x,"height",`${$}px`),(0,g.setStyle)(x,"width",`${P}px`),M+P>T?((0,g.setStyle)(x,"left",null),(0,g.setStyle)(x,"right",null)):((0,g.setStyle)(x,"left",`${M}px`),(0,g.setStyle)(x,"right","auto"))}}inactivate(v){for(let b=0;b<v.$events.length;b++)this.art.events.remove(v.$events[b]);v.$events.length=0}remove(v){let b=this.find(v);(0,g.errorHandle)(b,`Can't find [${v}] in the [setting]`);let k=b.$option.indexOf(b);b.$option.splice(k,1),this.inactivate(b),b.$item&&(0,g.remove)(b.$item),this.render()}update(v){let b=this.find(v.name);return b?(this.inactivate(b),Object.assign(b,v),this.format(),this.creatItem(b,!0),this.render(),b):this.add(v)}add(v,b=this.option){return b.push(v),this.format(),this.creatItem(v),this.render(),v}creatHeader(v){if(!this.cache.has(v.$option))return;let b=this.cache.get(v.$option),{proxy:k,icons:{arrowLeft:j},constructor:{SETTING_ITEM_HEIGHT:x}}=this.art,C=(0,g.createElement)("div");(0,g.setStyle)(C,"height",`${x}px`),(0,g.addClass)(C,"art-setting-item"),(0,g.addClass)(C,"art-setting-item-back");let _=(0,g.append)(C,'<div class="art-setting-item-left"></div>'),P=(0,g.createElement)("div");(0,g.addClass)(P,"art-setting-item-left-icon"),(0,g.append)(P,j),(0,g.append)(_,P),(0,g.append)(_,v.$parent.html);let S=k(C,"click",()=>this.render(v.$parents));v.$parent.$events.push(S),(0,g.append)(b,C)}creatItem(v,b=!1){var B,N;if(!this.cache.has(v.$option))return;let k=this.cache.get(v.$option),j=v.$item,x="selector";(0,g.has)(v,"switch")&&(x="switch"),(0,g.has)(v,"range")&&(x="range");let{icons:C,proxy:_,constructor:P}=this.art,S=(0,g.createElement)("div");(0,g.addClass)(S,"art-setting-item"),(0,g.setStyle)(S,"height",`${P.SETTING_ITEM_HEIGHT}px`),S.dataset.name=v.name||"",S.dataset.value=v.value||"";let I=(0,g.append)(S,'<div class="art-setting-item-left"></div>'),E=(0,g.append)(S,'<div class="art-setting-item-right"></div>'),T=(0,g.createElement)("div");switch((0,g.addClass)(T,"art-setting-item-left-icon"),x){case"switch":case"range":(0,g.append)(T,v.icon||C.config);break;case"selector":(B=v.selector)!=null&&B.length?(0,g.append)(T,v.icon||C.config):(0,g.append)(T,C.check)}(0,g.append)(I,T),(0,g.def)(v,"$icon",{configurable:!0,get:()=>T}),(0,g.def)(v,"icon",{configurable:!0,get:()=>T.innerHTML,set(L){T.innerHTML="",(0,g.append)(T,L)}});let M=(0,g.createElement)("div");(0,g.addClass)(M,"art-setting-item-left-text"),(0,g.append)(M,v.html||""),(0,g.append)(I,M),(0,g.def)(v,"$html",{configurable:!0,get:()=>M}),(0,g.def)(v,"html",{configurable:!0,get:()=>M.innerHTML,set(L){M.innerHTML="",(0,g.append)(M,L)}});let $=(0,g.createElement)("div");switch((0,g.addClass)($,"art-setting-item-right-tooltip"),(0,g.append)($,v.tooltip||""),(0,g.append)(E,$),(0,g.def)(v,"$tooltip",{configurable:!0,get:()=>$}),(0,g.def)(v,"tooltip",{configurable:!0,get:()=>$.innerHTML,set(L){$.innerHTML="",(0,g.append)($,L)}}),x){case"switch":{let L=(0,g.createElement)("div");(0,g.addClass)(L,"art-setting-item-right-icon");let z=(0,g.append)(L,C.switchOn),W=(0,g.append)(L,C.switchOff);(0,g.setStyle)(v.switch?W:z,"display","none"),(0,g.append)(E,L),(0,g.def)(v,"$switch",{configurable:!0,get:()=>L});let K=v.switch;(0,g.def)(v,"switch",{configurable:!0,get:()=>K,set(D){K=D,D?((0,g.setStyle)(W,"display","none"),(0,g.setStyle)(z,"display",null)):((0,g.setStyle)(W,"display",null),(0,g.setStyle)(z,"display","none"))}});break}case"range":{let L=(0,g.createElement)("div");(0,g.addClass)(L,"art-setting-item-right-icon");let z=(0,g.append)(L,'<input type="range">');z.value=v.range[0],z.min=v.range[1],z.max=v.range[2],z.step=v.range[3],(0,g.addClass)(z,"art-setting-range"),(0,g.append)(E,L),(0,g.def)(v,"$range",{configurable:!0,get:()=>z});let W=[...v.range];(0,g.def)(v,"range",{configurable:!0,get:()=>W,set(K){W=[...K],z.value=K[0],z.min=K[1],z.max=K[2],z.step=K[3]}})}break;case"selector":if((N=v.selector)!=null&&N.length){let L=(0,g.createElement)("div");(0,g.addClass)(L,"art-setting-item-right-icon"),(0,g.append)(L,C.arrowRight),(0,g.append)(E,L)}}switch(x){case"switch":if(v.onSwitch){let L=_(S,"click",async z=>{v.switch=await v.onSwitch.call(this.art,v,S,z)});v.$events.push(L)}break;case"range":if(v.$range){if(v.onRange){let L=_(v.$range,"change",async z=>{v.range[0]=v.$range.valueAsNumber,v.tooltip=await v.onRange.call(this.art,v,S,z)});v.$events.push(L)}if(v.onChange){let L=_(v.$range,"input",async z=>{v.range[0]=v.$range.valueAsNumber,v.tooltip=await v.onChange.call(this.art,v,S,z)});v.$events.push(L)}}break;case"selector":{let L=_(S,"click",async z=>{var W;(W=v.selector)!=null&&W.length?this.render(v.selector):(this.check(v),v.$parent.onSelect&&(v.$parent.tooltip=await v.$parent.onSelect.call(this.art,v,S,z)))});v.$events.push(L),v.default&&(0,g.addClass)(S,"art-current")}}(0,g.def)(v,"$item",{configurable:!0,get:()=>S}),b?(0,g.replaceElement)(S,j):(0,g.append)(k,S),v.mounted&&setTimeout(()=>v.mounted.call(this.art,v.$item,v),0)}render(v=this.option){var b;if(this.active=v,this.cache.has(v)){let k=this.cache.get(v);(0,g.inverseClass)(k,"art-current")}else{let k=(0,g.createElement)("div");this.cache.set(v,k),(0,g.addClass)(k,"art-setting-panel"),(0,g.append)(this.$parent,k),(0,g.inverseClass)(k,"art-current"),(b=v[0])!=null&&b.$parent&&this.creatHeader(v[0]);for(let j=0;j<v.length;j++)this.creatItem(v[j])}this.resize()}}r.default=y},{"./flip":"kONUB","./aspectRatio":"84NBV","./playbackRate":"aetWt","./subtitleOffset":"fIBkO","../utils/component":"18nVI","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kONUB:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:o,icons:l,constructor:{SETTING_ITEM_WIDTH:d,FLIP:f}}=i;function p(m){return o.get((0,n.capitalize)(m))}function h(){let m=i.setting.find(`flip-${i.flip}`);i.setting.check(m)}return{width:d,name:"flip",html:o.get("Video Flip"),tooltip:p(i.flip),icon:l.flip,selector:f.map(m=>({value:m,name:`flip-${m}`,default:m===i.flip,html:p(m)})),onSelect:m=>(i.flip=m.value,m.html),mounted:()=>{h(),i.on("flip",()=>h())}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"84NBV":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){let{i18n:i,icons:o,constructor:{SETTING_ITEM_WIDTH:l,ASPECT_RATIO:d}}=c;function f(h){return h==="default"?i.get("Default"):h}function p(){let h=c.setting.find(`aspect-ratio-${c.aspectRatio}`);c.setting.check(h)}return{width:l,name:"aspect-ratio",html:i.get("Aspect Ratio"),icon:o.aspectRatio,tooltip:f(c.aspectRatio),selector:d.map(h=>({value:h,name:`aspect-ratio-${h}`,default:h===c.aspectRatio,html:f(h)})),onSelect:h=>(c.aspectRatio=h.value,h.html),mounted:()=>{p(),c.on("aspectRatio",()=>p())}}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],aetWt:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){let{i18n:i,icons:o,constructor:{SETTING_ITEM_WIDTH:l,PLAYBACK_RATE:d}}=c;function f(h){return h===1?i.get("Normal"):h.toFixed(1)}function p(){let h=c.setting.find(`playback-rate-${c.playbackRate}`);c.setting.check(h)}return{width:l,name:"playback-rate",html:i.get("Play Speed"),tooltip:f(c.playbackRate),icon:o.playbackRate,selector:d.map(h=>({value:h,name:`playback-rate-${h}`,default:h===c.playbackRate,html:f(h)})),onSelect:h=>(c.playbackRate=h.value,h.html),mounted:()=>{p(),c.on("video:ratechange",()=>p())}}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fIBkO:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){let{i18n:i,icons:o,constructor:l}=c;return{width:l.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:i.get("Subtitle Offset"),icon:o.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:d=>(c.subtitleOffset=d.range[0],d.range[0]+"s"),mounted:(d,f)=>{c.on("subtitleOffset",p=>{f.$range.value=p,f.tooltip=p+"s"})}}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2aaJe":[function(t,s,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(e){try{let n=JSON.parse(window.localStorage.getItem(this.name))||{};return e?n[e]:n}catch{return e?this.settings[e]:this.settings}}set(e,n){try{let c=Object.assign({},this.get(),{[e]:n});window.localStorage.setItem(this.name,JSON.stringify(c))}catch{this.settings[e]=n}}del(e){try{let n=this.get();delete n[e],window.localStorage.setItem(this.name,JSON.stringify(n))}catch{delete this.settings[e]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8MTUM":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("./miniProgressBar"),i=e.interopDefault(c),o=t("./autoOrientation"),l=e.interopDefault(o),d=t("./autoPlayback"),f=e.interopDefault(d),p=t("./fastForward"),h=e.interopDefault(p),m=t("./lock"),g=e.interopDefault(m);r.default=class{constructor(y){this.art=y,this.id=0;let{option:w}=y;w.miniProgressBar&&!w.isLive&&this.add(i.default),w.lock&&n.isMobile&&this.add(g.default),w.autoPlayback&&!w.isLive&&this.add(f.default),w.autoOrientation&&n.isMobile&&this.add(l.default),w.fastForward&&n.isMobile&&!w.isLive&&this.add(h.default);for(let v=0;v<w.plugins.length;v++)this.add(w.plugins[v])}add(y){this.id+=1;let w=y.call(this.art,this.art);return w instanceof Promise?w.then(v=>this.next(y,v)):this.next(y,w)}next(y,w){let v=w&&w.name||y.name||`plugin${this.id}`;return(0,n.errorHandle)(!(0,n.has)(this,v),`Cannot add a plugin that already has the same name: ${v}`),(0,n.def)(this,v,{value:w}),this}}},{"../utils":"71aH7","./miniProgressBar":"87pSL","./autoOrientation":"ePEg5","./autoPlayback":"cVO99","./fastForward":"hFDwt","./lock":"1hsTH","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"87pSL":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return i.on("control",o=>{o?(0,n.removeClass)(i.template.$player,"art-mini-progress-bar"):(0,n.addClass)(i.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ePEg5:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{constructor:o,template:{$player:l,$video:d}}=i;return i.on("fullscreenWeb",f=>{if(f){let{videoWidth:p,videoHeight:h}=d,{clientWidth:m,clientHeight:g}=document.documentElement;(p>h&&m<g||p<h&&m>g)&&setTimeout(()=>{(0,n.setStyle)(l,"width",`${g}px`),(0,n.setStyle)(l,"height",`${m}px`),(0,n.setStyle)(l,"transform-origin","0 0"),(0,n.setStyle)(l,"transform",`rotate(90deg) translate(0, -${m}px)`),(0,n.addClass)(l,"art-auto-orientation"),i.isRotate=!0,i.emit("resize")},o.AUTO_ORIENTATION_TIME)}else(0,n.hasClass)(l,"art-auto-orientation")&&((0,n.removeClass)(l,"art-auto-orientation"),i.isRotate=!1,i.emit("resize"))}),i.on("fullscreen",async f=>{var h;if(!((h=screen==null?void 0:screen.orientation)!=null&&h.lock))return;let p=screen.orientation.type;if(f){let{videoWidth:m,videoHeight:g}=d,{clientWidth:y,clientHeight:w}=document.documentElement;if(m>g&&y<w||m<g&&y>w){let v=p.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(v),(0,n.addClass)(l,"art-auto-orientation-fullscreen")}}else(0,n.hasClass)(l,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(p),(0,n.removeClass)(l,"art-auto-orientation-fullscreen"))}),{name:"autoOrientation",get state(){return(0,n.hasClass)(l,"art-auto-orientation")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cVO99:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:o,icons:l,storage:d,constructor:f,proxy:p,template:{$poster:h}}=i,m=i.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),g=(0,n.query)(".art-auto-playback-last",m),y=(0,n.query)(".art-auto-playback-jump",m),w=(0,n.query)(".art-auto-playback-close",m);(0,n.append)(w,l.close);let v=null;function b(){let k=(d.get("times")||{})[i.option.id||i.option.url];clearTimeout(v),(0,n.setStyle)(m,"display","none"),k&&k>=f.AUTO_PLAYBACK_MIN&&((0,n.setStyle)(m,"display","flex"),g.innerText=`${o.get("Last Seen")} ${(0,n.secondToTime)(k)}`,y.innerText=o.get("Jump Play"),p(w,"click",()=>{(0,n.setStyle)(m,"display","none")}),p(y,"click",()=>{i.seek=k,i.play(),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","none")}),i.once("video:timeupdate",()=>{v=setTimeout(()=>{(0,n.setStyle)(m,"display","none")},f.AUTO_PLAYBACK_TIMEOUT)}))}return i.on("video:timeupdate",()=>{if(i.playing){let k=d.get("times")||{},j=Object.keys(k);j.length>f.AUTO_PLAYBACK_MAX&&delete k[j[0]],k[i.option.id||i.option.url]=i.currentTime,d.set("times",k)}}),i.on("ready",b),i.on("restart",b),{name:"auto-playback",get times(){return d.get("times")||{}},clear:()=>d.del("times"),delete(k){let j=d.get("times")||{};return delete j[k],d.set("times",j),j}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hFDwt:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{constructor:o,proxy:l,template:{$player:d,$video:f}}=i,p=null,h=!1,m=1,g=()=>{clearTimeout(p),h&&(h=!1,i.playbackRate=m,(0,n.removeClass)(d,"art-fast-forward"))};return l(f,"touchstart",y=>{y.touches.length===1&&i.playing&&!i.isLock&&(p=setTimeout(()=>{h=!0,m=i.playbackRate,i.playbackRate=o.FAST_FORWARD_VALUE,(0,n.addClass)(d,"art-fast-forward")},o.FAST_FORWARD_TIME))}),l(document,"touchmove",g),l(document,"touchend",g),{name:"fastForward",get state(){return(0,n.hasClass)(d,"art-fast-forward")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1hsTH":[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{layers:o,icons:l,template:{$player:d}}=i;function f(){return(0,n.hasClass)(d,"art-lock")}function p(){(0,n.addClass)(d,"art-lock"),i.isLock=!0,i.emit("lock",!0)}function h(){(0,n.removeClass)(d,"art-lock"),i.isLock=!1,i.emit("lock",!1)}return o.add({name:"lock",mounted(m){let g=(0,n.append)(m,l.lock),y=(0,n.append)(m,l.unlock);(0,n.setStyle)(g,"display","none"),i.on("lock",w=>{w?((0,n.setStyle)(g,"display","inline-flex"),(0,n.setStyle)(y,"display","none")):((0,n.setStyle)(g,"display","none"),(0,n.setStyle)(y,"display","inline-flex"))})},click(){f()?h():p()}}),{name:"lock",get state(){return f()},set state(m){m?p():h()}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["5lTcX"],"5lTcX","parcelRequire4dc0")})(se,se.exports);var on=se.exports;const sn=hr(on);var le={exports:{}};le.exports;(function(u,a){/*!
 * artplayer-plugin-chapter.js v1.0.0
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2024 Harvey Zack
 * Released under the MIT License.
 */(function(t,s,r,e,n){var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof ae<"u"?ae:{},i=typeof c[e]=="function"&&c[e],o=i.cache||{},l=typeof oe=="function"&&oe.bind(u);function d(h,m){if(!o[h]){if(!t[h]){var g=typeof c[e]=="function"&&c[e];if(!m&&g)return g(h,!0);if(i)return i(h,!0);if(l&&typeof h=="string")return l(h);var y=Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}v.resolve=function(b){var k=t[h][1][b];return k??b},v.cache={};var w=o[h]=new d.Module(h);t[h][0].call(w.exports,v,w,w.exports,this)}return o[h].exports;function v(b){var k=v.resolve(b);return k===!1?{}:d(k)}}d.isParcelRequire=!0,d.Module=function(h){this.id=h,this.bundle=d,this.exports={}},d.modules=t,d.cache=o,d.parent=i,d.register=function(h,m){t[h]=[function(g,y){y.exports=m},{}]},Object.defineProperty(d,"root",{get:function(){return c[e]}}),c[e]=d;for(var f=0;f<s.length;f++)d(s[f]);{var p=d(r);u.exports=p}})({eSFsM:[function(t,s,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>i);var n=t("bundle-text:./style.less"),c=e.interopDefault(n);function i(o={}){return l=>{let{$player:d}=l.template,{setStyle:f,append:p,clamp:h,query:m,isMobile:g,addClass:y,removeClass:w}=l.constructor.utils,v='<div class="art-chapter"><div class="art-chapter-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div></div></div>',b=null,k=[],j=l.query(".art-control-progress"),x=l.query(".art-control-progress-inner"),C=p(x,'<div class="art-chapters"></div>'),_=p(x,'<div class="art-chapter-title"></div>');function P({$chapter:I,width:E}){let T=I.dataset.title.trim();if(T){f(_,"display","flex"),_.innerText=T;let M=_.clientWidth;E<=M/2?f(_,"left",0):E>x.clientWidth-M/2?f(_,"left",`${x.clientWidth-M}px`):f(_,"left",`${E-M/2}px`)}else f(_,"display","none")}function S(I=[]){if(k=[],C.innerText="",w(d,"artplayer-plugin-chapter"),Array.isArray(I)&&I.length&&l.duration){I=I.sort((E,T)=>E.start-T.start);for(let E=0;E<I.length;E++){let T=I[E],M=I[E+1];if(T.end===1/0&&(T.end=l.duration),typeof T.start!="number"||typeof T.end!="number"||typeof T.title!="string")throw Error("Illegal chapter data type");if(T.start<0||T.end>l.duration||T.start>=T.end||M&&T.end>M.start)throw Error("Illegal chapter time point")}I[0].start>0&&I.unshift({start:0,end:I[0].start,title:""}),I[I.length-1].end<l.duration&&I.push({start:I[I.length-1].end,end:l.duration,title:""});for(let E=0;E<I.length-1;E++)I[E].end!==I[E+1].start&&I.splice(E+1,0,{start:I[E].end,end:I[E+1].start,title:""});k=I.map(E=>{let T=p(C,v),M=h(E.start,0,l.duration),$=h(E.end,0,l.duration),B=$-M,N=B/l.duration;return T.dataset.start=M,T.dataset.end=$,T.dataset.duration=B,T.dataset.title=E.title.trim(),T.style.width=`${100*N}%`,{$chapter:T,$hover:m(".art-progress-hover",T),$loaded:m(".art-progress-loaded",T),$played:m(".art-progress-played",T)}}),y(d,"artplayer-plugin-chapter"),l.emit("setBar","loaded",l.loaded||0)}}return l.on("setBar",(I,E,T)=>{if(k.length)for(let M=0;M<k.length;M++){let{$chapter:$,$loaded:B,$played:N,$hover:L}=k[M],z={hover:L,loaded:B,played:N}[I];if(!z)return;let W=C.clientWidth*E,K=l.duration*E,D=parseFloat($.dataset.duration),R=parseFloat($.dataset.start),U=parseFloat($.dataset.end);if(K<R&&f(z,"width",0),K>U&&f(z,"width","100%"),K>=R&&K<=U){let O=(K-R)/D;f(z,"width",`${100*O}%`),g?I==="played"&&T&&(P({$chapter:$,width:W}),clearTimeout(b),b=setTimeout(()=>{f(_,"display","none")},500)):I==="hover"&&P({$chapter:$,width:W})}}}),g||l.proxy(j,"mouseleave",()=>{k.length&&f(_,"display","none")}),l.once("video:loadedmetadata",()=>S(o.chapters)),{name:"artplayerPluginChapter",update:({chapters:I})=>S(I)}}}if(typeof document<"u"){let o="artplayer-plugin-chapter",l=document.getElementById(o);if(l)l.textContent=c.default;else{let d=document.createElement("style");d.id=o,d.textContent=c.default,document.head.appendChild(d)}}typeof window<"u"&&(window.artplayerPluginChapter=i)},{"bundle-text:./style.less":"9CXLk","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9CXLk":[function(t,s,r){s.exports=".artplayer-plugin-chapter .art-control-progress-inner{background-color:#0000!important;height:100%!important}.artplayer-plugin-chapter .art-control-progress-inner>.art-progress-hover,.artplayer-plugin-chapter .art-control-progress-inner>.art-progress-loaded,.artplayer-plugin-chapter .art-control-progress-inner>.art-progress-played{display:none!important}.artplayer-plugin-chapter .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 64px)!important}.artplayer-plugin-chapter .art-chapters{z-index:0;align-items:center;gap:4px;height:100%;display:flex;position:absolute;inset:0;transform:scaleY(1.25)}.artplayer-plugin-chapter .art-chapters .art-chapter{align-items:center;height:100%;display:flex}.artplayer-plugin-chapter .art-chapters .art-chapter .art-chapter-inner{cursor:pointer;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);border-radius:10px;width:100%;height:50%;position:relative;overflow:hidden}.artplayer-plugin-chapter .art-chapters .art-chapter:hover .art-chapter-inner{height:100%}.artplayer-plugin-chapter .art-chapter-title{z-index:70;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:14px;line-height:1;display:none;position:absolute;top:-50px;left:0}"},{}],"9pCYc":[function(t,s,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,n){return Object.keys(e).forEach(function(c){c==="default"||c==="__esModule"||Object.prototype.hasOwnProperty.call(n,c)||Object.defineProperty(n,c,{enumerable:!0,get:function(){return e[c]}})}),n},r.export=function(e,n,c){Object.defineProperty(e,n,{enumerable:!0,get:c})}},{}]},["eSFsM"],"eSFsM","parcelRequire4dc0")})(le,le.exports);le.exports;function ln(u){let a;return{c(){a=H("div"),a.innerHTML="",F(a,"class","artplayer-app")},m(t,s){Q(t,a,s),u[8](a)},p:rt,i:rt,o:rt,d(t){t&&X(a),u[8](null)}}}function cn(u,a,t){let{app:s}=a,{config:r}=a,e=null,n,c=null,i=0;jt(()=>{if(!n)return;const y={volume:70,speed:100,hotkey:!0,loop:!1,loopCount:3},w=r?{...y,...r}:y;e=new sn({container:n,url:"",volume:w.volume/100,isLive:!1,muted:!1,autoplay:!0,pip:!0,autoSize:!0,autoMini:!0,setting:!0,loop:w.loop,flip:!0,playbackRate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!0,mutex:!0,backdrop:!0,playsInline:!0,autoPlayback:!0,theme:"var(--b3-theme-primary)",lang:"zh-cn",crossOrigin:"anonymous"}),e.on("video:timeupdate",()=>{if(c&&e.currentTime>=c.end){const v=r.loopCount||3;if(v>0&&i>=v){c=null,i=0,e.notice.show="循环播放结束";return}e.currentTime=c.start,o.audio&&(o.audio.currentTime=c.start),i++,e.notice.show=`第 ${i}/${v} 次循环`}}),e.on("ready",()=>{console.log("[Player] Artplayer 就绪"),w&&f(w)})}),fr(()=>{e&&(o.destroy(),e.destroy(!0),e=null)});const o={audio:null,createAudio:async(y,w)=>{o.destroy();const v=new Audio;if(v.preload="auto",w){const b=new URL(y);w.Referer&&b.searchParams.set("referer",w.Referer),w.Cookie&&b.searchParams.set("cookie",w.Cookie),v.src=b.toString()}else v.src=y;await new Promise(b=>{v.addEventListener("canplaythrough",()=>{b()})}),o.audio=v},syncState:()=>{!o.audio||!e||(o.audio.currentTime=e.currentTime,e.playing?o.audio.play().catch(console.error):o.audio.pause(),o.audio.playbackRate=e.playbackRate,o.audio.volume=e.volume,o.audio.muted=e.muted)},registerEvents:()=>{e&&(e.on("play",()=>o.syncState()),e.on("pause",()=>{var y;return(y=o.audio)==null?void 0:y.pause()}),e.on("seek",()=>{o.audio&&(o.audio.currentTime=e.currentTime)}),e.on("video:ratechange",()=>{o.audio&&(o.audio.playbackRate=e.playbackRate)}),e.on("video:volumechange",()=>{o.audio&&(o.audio.volume=e.volume,o.audio.muted=e.muted)}))},destroy:()=>{o.audio&&(o.audio.pause(),o.audio.remove(),o.audio=null)}};function l(y,w){if(e)try{i=0,c=null,w!==void 0&&(c={start:y,end:w}),e.currentTime=y,o.audio&&(o.audio.currentTime=y)}catch(v){console.error("[Player] 设置播放时间失败:",v),V.showMessage("设置播放时间失败")}}async function d(y,w={}){try{c=null,i=0,o.destroy(),e.url=y,await new Promise(v=>{const b=()=>{v(),e.off("video:loadeddata",b)};e.on("video:loadeddata",b)}),w.audioUrl&&(await o.createAudio(w.audioUrl,w.headers),o.registerEvents()),w.headers&&(e.headers=w.headers),w.startTime!==void 0&&(w.isLoop&&w.endTime!==void 0?l(w.startTime,w.endTime):l(w.startTime)),e.play(),console.log("[Player] 开始播放:",{url:y,options:{time:w.startTime,loop:w.isLoop?{start:w.startTime,end:w.endTime,maxCount:r.loopCount}:null,audio:!!w.audioUrl}})}catch(v){if(console.error("[Player] 播放失败:",v),V.showMessage("播放失败，请重试"),o.destroy(),e!=null&&e.container){const b=new CustomEvent("streamError",{detail:{url:y,options:w}});e.container.dispatchEvent(b)}}}function f(y){e&&(e.volume=y.volume/100,e.playbackRate=y.speed/100,e.loop=y.loop,y.autoplay&&e.url&&e.play())}async function p(){return e?e.getDataURL():null}function h(y){e&&(e.currentTime=y)}function m(){return(e==null?void 0:e.currentTime)||0}function g(y){Mt[y?"unshift":"push"](()=>{n=y,t(0,n)})}return u.$$set=y=>{"app"in y&&t(1,s=y.app),"config"in y&&t(2,r=y.config)},[n,s,r,d,f,p,h,m,g]}class un extends Xt{constructor(a){super(),Gt(this,a,cn,ln,Kt,{app:1,config:2,play:3,updateConfig:4,getScreenshotDataURL:5,seekTo:6,getCurrentTime:7})}get play(){return this.$$.ctx[3]}get updateConfig(){return this.$$.ctx[4]}get getScreenshotDataURL(){return this.$$.ctx[5]}get seekTo(){return this.$$.ctx[6]}get getCurrentTime(){return this.$$.ctx[7]}}var Qt={},dn=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},mr={},st={};let Le;const fn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];st.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17};st.getSymbolTotalCodewords=function(a){return fn[a]};st.getBCHDigit=function(u){let a=0;for(;u!==0;)a++,u>>>=1;return a};st.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');Le=a};st.isKanjiModeEnabled=function(){return typeof Le<"u"};st.toSJIS=function(a){return Le(a)};var de={};(function(u){u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2};function a(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+t)}}u.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},u.from=function(s,r){if(u.isValid(s))return s;try{return a(s)}catch{return r}}})(de);function gr(){this.buffer=[],this.length=0}gr.prototype={get:function(u){const a=Math.floor(u/8);return(this.buffer[a]>>>7-u%8&1)===1},put:function(u,a){for(let t=0;t<a;t++)this.putBit((u>>>a-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(u){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),u&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var pn=gr;function Jt(u){if(!u||u<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=u,this.data=new Uint8Array(u*u),this.reservedBit=new Uint8Array(u*u)}Jt.prototype.set=function(u,a,t,s){const r=u*this.size+a;this.data[r]=t,s&&(this.reservedBit[r]=!0)};Jt.prototype.get=function(u,a){return this.data[u*this.size+a]};Jt.prototype.xor=function(u,a,t){this.data[u*this.size+a]^=t};Jt.prototype.isReserved=function(u,a){return this.reservedBit[u*this.size+a]};var hn=Jt,vr={};(function(u){const a=st.getSymbolSize;u.getRowColCoords=function(s){if(s===1)return[];const r=Math.floor(s/7)+2,e=a(s),n=e===145?26:Math.ceil((e-13)/(2*r-2))*2,c=[e-7];for(let i=1;i<r-1;i++)c[i]=c[i-1]-n;return c.push(6),c.reverse()},u.getPositions=function(s){const r=[],e=u.getRowColCoords(s),n=e.length;for(let c=0;c<n;c++)for(let i=0;i<n;i++)c===0&&i===0||c===0&&i===n-1||c===n-1&&i===0||r.push([e[c],e[i]]);return r}})(vr);var yr={};const mn=st.getSymbolSize,Ve=7;yr.getPositions=function(a){const t=mn(a);return[[0,0],[t-Ve,0],[0,t-Ve]]};var br={};(function(u){u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};u.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},u.from=function(r){return u.isValid(r)?parseInt(r,10):void 0},u.getPenaltyN1=function(r){const e=r.size;let n=0,c=0,i=0,o=null,l=null;for(let d=0;d<e;d++){c=i=0,o=l=null;for(let f=0;f<e;f++){let p=r.get(d,f);p===o?c++:(c>=5&&(n+=a.N1+(c-5)),o=p,c=1),p=r.get(f,d),p===l?i++:(i>=5&&(n+=a.N1+(i-5)),l=p,i=1)}c>=5&&(n+=a.N1+(c-5)),i>=5&&(n+=a.N1+(i-5))}return n},u.getPenaltyN2=function(r){const e=r.size;let n=0;for(let c=0;c<e-1;c++)for(let i=0;i<e-1;i++){const o=r.get(c,i)+r.get(c,i+1)+r.get(c+1,i)+r.get(c+1,i+1);(o===4||o===0)&&n++}return n*a.N2},u.getPenaltyN3=function(r){const e=r.size;let n=0,c=0,i=0;for(let o=0;o<e;o++){c=i=0;for(let l=0;l<e;l++)c=c<<1&2047|r.get(o,l),l>=10&&(c===1488||c===93)&&n++,i=i<<1&2047|r.get(l,o),l>=10&&(i===1488||i===93)&&n++}return n*a.N3},u.getPenaltyN4=function(r){let e=0;const n=r.data.length;for(let i=0;i<n;i++)e+=r.data[i];return Math.abs(Math.ceil(e*100/n/5)-10)*a.N4};function t(s,r,e){switch(s){case u.Patterns.PATTERN000:return(r+e)%2===0;case u.Patterns.PATTERN001:return r%2===0;case u.Patterns.PATTERN010:return e%3===0;case u.Patterns.PATTERN011:return(r+e)%3===0;case u.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(e/3))%2===0;case u.Patterns.PATTERN101:return r*e%2+r*e%3===0;case u.Patterns.PATTERN110:return(r*e%2+r*e%3)%2===0;case u.Patterns.PATTERN111:return(r*e%3+(r+e)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}u.applyMask=function(r,e){const n=e.size;for(let c=0;c<n;c++)for(let i=0;i<n;i++)e.isReserved(i,c)||e.xor(i,c,t(r,i,c))},u.getBestMask=function(r,e){const n=Object.keys(u.Patterns).length;let c=0,i=1/0;for(let o=0;o<n;o++){e(o),u.applyMask(o,r);const l=u.getPenaltyN1(r)+u.getPenaltyN2(r)+u.getPenaltyN3(r)+u.getPenaltyN4(r);u.applyMask(o,r),l<i&&(i=l,c=o)}return c}})(br);var fe={};const gt=de,ee=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],re=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];fe.getBlocksCount=function(a,t){switch(t){case gt.L:return ee[(a-1)*4+0];case gt.M:return ee[(a-1)*4+1];case gt.Q:return ee[(a-1)*4+2];case gt.H:return ee[(a-1)*4+3];default:return}};fe.getTotalCodewordsCount=function(a,t){switch(t){case gt.L:return re[(a-1)*4+0];case gt.M:return re[(a-1)*4+1];case gt.Q:return re[(a-1)*4+2];case gt.H:return re[(a-1)*4+3];default:return}};var wr={},pe={};const Vt=new Uint8Array(512),ce=new Uint8Array(256);(function(){let a=1;for(let t=0;t<255;t++)Vt[t]=a,ce[a]=t,a<<=1,a&256&&(a^=285);for(let t=255;t<512;t++)Vt[t]=Vt[t-255]})();pe.log=function(a){if(a<1)throw new Error("log("+a+")");return ce[a]};pe.exp=function(a){return Vt[a]};pe.mul=function(a,t){return a===0||t===0?0:Vt[ce[a]+ce[t]]};(function(u){const a=pe;u.mul=function(s,r){const e=new Uint8Array(s.length+r.length-1);for(let n=0;n<s.length;n++)for(let c=0;c<r.length;c++)e[n+c]^=a.mul(s[n],r[c]);return e},u.mod=function(s,r){let e=new Uint8Array(s);for(;e.length-r.length>=0;){const n=e[0];for(let i=0;i<r.length;i++)e[i]^=a.mul(r[i],n);let c=0;for(;c<e.length&&e[c]===0;)c++;e=e.slice(c)}return e},u.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let e=0;e<s;e++)r=u.mul(r,new Uint8Array([1,a.exp(e)]));return r}})(wr);const xr=wr;function $e(u){this.genPoly=void 0,this.degree=u,this.degree&&this.initialize(this.degree)}$e.prototype.initialize=function(a){this.degree=a,this.genPoly=xr.generateECPolynomial(this.degree)};$e.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(a.length+this.degree);t.set(a);const s=xr.mod(t,this.genPoly),r=this.degree-s.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(s,r),e}return s};var gn=$e,kr={},bt={},Re={};Re.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40};var dt={};const Er="[0-9]+",vn="[A-Z $%*+\\-./:]+";let Wt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Wt=Wt.replace(/u/g,"\\u");const yn="(?:(?![A-Z0-9 $%*+\\-./:]|"+Wt+`)(?:.|[\r
]))+`;dt.KANJI=new RegExp(Wt,"g");dt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");dt.BYTE=new RegExp(yn,"g");dt.NUMERIC=new RegExp(Er,"g");dt.ALPHANUMERIC=new RegExp(vn,"g");const bn=new RegExp("^"+Wt+"$"),wn=new RegExp("^"+Er+"$"),xn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");dt.testKanji=function(a){return bn.test(a)};dt.testNumeric=function(a){return wn.test(a)};dt.testAlphanumeric=function(a){return xn.test(a)};(function(u){const a=Re,t=dt;u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!a.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},u.getBestModeForData=function(e){return t.testNumeric(e)?u.NUMERIC:t.testAlphanumeric(e)?u.ALPHANUMERIC:t.testKanji(e)?u.KANJI:u.BYTE},u.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},u.isValid=function(e){return e&&e.bit&&e.ccBits};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+r)}}u.from=function(e,n){if(u.isValid(e))return e;try{return s(e)}catch{return n}}})(bt);(function(u){const a=st,t=fe,s=de,r=bt,e=Re,n=7973,c=a.getBCHDigit(n);function i(f,p,h){for(let m=1;m<=40;m++)if(p<=u.getCapacity(m,h,f))return m}function o(f,p){return r.getCharCountIndicator(f,p)+4}function l(f,p){let h=0;return f.forEach(function(m){const g=o(m.mode,p);h+=g+m.getBitsLength()}),h}function d(f,p){for(let h=1;h<=40;h++)if(l(f,h)<=u.getCapacity(h,p,r.MIXED))return h}u.from=function(p,h){return e.isValid(p)?parseInt(p,10):h},u.getCapacity=function(p,h,m){if(!e.isValid(p))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=r.BYTE);const g=a.getSymbolTotalCodewords(p),y=t.getTotalCodewordsCount(p,h),w=(g-y)*8;if(m===r.MIXED)return w;const v=w-o(m,p);switch(m){case r.NUMERIC:return Math.floor(v/10*3);case r.ALPHANUMERIC:return Math.floor(v/11*2);case r.KANJI:return Math.floor(v/13);case r.BYTE:default:return Math.floor(v/8)}},u.getBestVersionForData=function(p,h){let m;const g=s.from(h,s.M);if(Array.isArray(p)){if(p.length>1)return d(p,g);if(p.length===0)return 1;m=p[0]}else m=p;return i(m.mode,m.getLength(),g)},u.getEncodedBits=function(p){if(!e.isValid(p)||p<7)throw new Error("Invalid QR Code version");let h=p<<12;for(;a.getBCHDigit(h)-c>=0;)h^=n<<a.getBCHDigit(h)-c;return p<<12|h}})(kr);var Cr={};const _e=st,Tr=1335,kn=21522,qe=_e.getBCHDigit(Tr);Cr.getEncodedBits=function(a,t){const s=a.bit<<3|t;let r=s<<10;for(;_e.getBCHDigit(r)-qe>=0;)r^=Tr<<_e.getBCHDigit(r)-qe;return(s<<10|r)^kn};var Sr={};const En=bt;function Ft(u){this.mode=En.NUMERIC,this.data=u.toString()}Ft.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)};Ft.prototype.getLength=function(){return this.data.length};Ft.prototype.getBitsLength=function(){return Ft.getBitsLength(this.data.length)};Ft.prototype.write=function(a){let t,s,r;for(t=0;t+3<=this.data.length;t+=3)s=this.data.substr(t,3),r=parseInt(s,10),a.put(r,10);const e=this.data.length-t;e>0&&(s=this.data.substr(t),r=parseInt(s,10),a.put(r,e*3+1))};var Cn=Ft;const Tn=bt,ye=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function At(u){this.mode=Tn.ALPHANUMERIC,this.data=u}At.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)};At.prototype.getLength=function(){return this.data.length};At.prototype.getBitsLength=function(){return At.getBitsLength(this.data.length)};At.prototype.write=function(a){let t;for(t=0;t+2<=this.data.length;t+=2){let s=ye.indexOf(this.data[t])*45;s+=ye.indexOf(this.data[t+1]),a.put(s,11)}this.data.length%2&&a.put(ye.indexOf(this.data[t]),6)};var Sn=At;const _n=bt;function Dt(u){this.mode=_n.BYTE,typeof u=="string"?this.data=new TextEncoder().encode(u):this.data=new Uint8Array(u)}Dt.getBitsLength=function(a){return a*8};Dt.prototype.getLength=function(){return this.data.length};Dt.prototype.getBitsLength=function(){return Dt.getBitsLength(this.data.length)};Dt.prototype.write=function(u){for(let a=0,t=this.data.length;a<t;a++)u.put(this.data[a],8)};var jn=Dt;const Mn=bt,In=st;function Pt(u){this.mode=Mn.KANJI,this.data=u}Pt.getBitsLength=function(a){return a*13};Pt.prototype.getLength=function(){return this.data.length};Pt.prototype.getBitsLength=function(){return Pt.getBitsLength(this.data.length)};Pt.prototype.write=function(u){let a;for(a=0;a<this.data.length;a++){let t=In.toSJIS(this.data[a]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),u.put(t,13)}};var Fn=Pt,_r={exports:{}};(function(u){var a={single_source_shortest_paths:function(t,s,r){var e={},n={};n[s]=0;var c=a.PriorityQueue.make();c.push(s,0);for(var i,o,l,d,f,p,h,m,g;!c.empty();){i=c.pop(),o=i.value,d=i.cost,f=t[o]||{};for(l in f)f.hasOwnProperty(l)&&(p=f[l],h=d+p,m=n[l],g=typeof n[l]>"u",(g||m>h)&&(n[l]=h,c.push(l,h),e[l]=o))}if(typeof r<"u"&&typeof n[r]>"u"){var y=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(y)}return e},extract_shortest_path_from_predecessor_list:function(t,s){for(var r=[],e=s;e;)r.push(e),t[e],e=t[e];return r.reverse(),r},find_path:function(t,s,r){var e=a.single_source_shortest_paths(t,s,r);return a.extract_shortest_path_from_predecessor_list(e,r)},PriorityQueue:{make:function(t){var s=a.PriorityQueue,r={},e;t=t||{};for(e in s)s.hasOwnProperty(e)&&(r[e]=s[e]);return r.queue=[],r.sorter=t.sorter||s.default_sorter,r},default_sorter:function(t,s){return t.cost-s.cost},push:function(t,s){var r={value:t,cost:s};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};u.exports=a})(_r);var An=_r.exports;(function(u){const a=bt,t=Cn,s=Sn,r=jn,e=Fn,n=dt,c=st,i=An;function o(y){return unescape(encodeURIComponent(y)).length}function l(y,w,v){const b=[];let k;for(;(k=y.exec(v))!==null;)b.push({data:k[0],index:k.index,mode:w,length:k[0].length});return b}function d(y){const w=l(n.NUMERIC,a.NUMERIC,y),v=l(n.ALPHANUMERIC,a.ALPHANUMERIC,y);let b,k;return c.isKanjiModeEnabled()?(b=l(n.BYTE,a.BYTE,y),k=l(n.KANJI,a.KANJI,y)):(b=l(n.BYTE_KANJI,a.BYTE,y),k=[]),w.concat(v,b,k).sort(function(x,C){return x.index-C.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function f(y,w){switch(w){case a.NUMERIC:return t.getBitsLength(y);case a.ALPHANUMERIC:return s.getBitsLength(y);case a.KANJI:return e.getBitsLength(y);case a.BYTE:return r.getBitsLength(y)}}function p(y){return y.reduce(function(w,v){const b=w.length-1>=0?w[w.length-1]:null;return b&&b.mode===v.mode?(w[w.length-1].data+=v.data,w):(w.push(v),w)},[])}function h(y){const w=[];for(let v=0;v<y.length;v++){const b=y[v];switch(b.mode){case a.NUMERIC:w.push([b,{data:b.data,mode:a.ALPHANUMERIC,length:b.length},{data:b.data,mode:a.BYTE,length:b.length}]);break;case a.ALPHANUMERIC:w.push([b,{data:b.data,mode:a.BYTE,length:b.length}]);break;case a.KANJI:w.push([b,{data:b.data,mode:a.BYTE,length:o(b.data)}]);break;case a.BYTE:w.push([{data:b.data,mode:a.BYTE,length:o(b.data)}])}}return w}function m(y,w){const v={},b={start:{}};let k=["start"];for(let j=0;j<y.length;j++){const x=y[j],C=[];for(let _=0;_<x.length;_++){const P=x[_],S=""+j+_;C.push(S),v[S]={node:P,lastCount:0},b[S]={};for(let I=0;I<k.length;I++){const E=k[I];v[E]&&v[E].node.mode===P.mode?(b[E][S]=f(v[E].lastCount+P.length,P.mode)-f(v[E].lastCount,P.mode),v[E].lastCount+=P.length):(v[E]&&(v[E].lastCount=P.length),b[E][S]=f(P.length,P.mode)+4+a.getCharCountIndicator(P.mode,w))}}k=C}for(let j=0;j<k.length;j++)b[k[j]].end=0;return{map:b,table:v}}function g(y,w){let v;const b=a.getBestModeForData(y);if(v=a.from(w,b),v!==a.BYTE&&v.bit<b.bit)throw new Error('"'+y+'" cannot be encoded with mode '+a.toString(v)+`.
 Suggested mode is: `+a.toString(b));switch(v===a.KANJI&&!c.isKanjiModeEnabled()&&(v=a.BYTE),v){case a.NUMERIC:return new t(y);case a.ALPHANUMERIC:return new s(y);case a.KANJI:return new e(y);case a.BYTE:return new r(y)}}u.fromArray=function(w){return w.reduce(function(v,b){return typeof b=="string"?v.push(g(b,null)):b.data&&v.push(g(b.data,b.mode)),v},[])},u.fromString=function(w,v){const b=d(w,c.isKanjiModeEnabled()),k=h(b),j=m(k,v),x=i.find_path(j.map,"start","end"),C=[];for(let _=1;_<x.length-1;_++)C.push(j.table[x[_]].node);return u.fromArray(p(C))},u.rawSplit=function(w){return u.fromArray(d(w,c.isKanjiModeEnabled()))}})(Sr);const he=st,be=de,Dn=pn,Pn=hn,Bn=vr,Ln=yr,je=br,Me=fe,$n=gn,ue=kr,Rn=Cr,Hn=bt,we=Sr;function Nn(u,a){const t=u.size,s=Ln.getPositions(a);for(let r=0;r<s.length;r++){const e=s[r][0],n=s[r][1];for(let c=-1;c<=7;c++)if(!(e+c<=-1||t<=e+c))for(let i=-1;i<=7;i++)n+i<=-1||t<=n+i||(c>=0&&c<=6&&(i===0||i===6)||i>=0&&i<=6&&(c===0||c===6)||c>=2&&c<=4&&i>=2&&i<=4?u.set(e+c,n+i,!0,!0):u.set(e+c,n+i,!1,!0))}}function zn(u){const a=u.size;for(let t=8;t<a-8;t++){const s=t%2===0;u.set(t,6,s,!0),u.set(6,t,s,!0)}}function On(u,a){const t=Bn.getPositions(a);for(let s=0;s<t.length;s++){const r=t[s][0],e=t[s][1];for(let n=-2;n<=2;n++)for(let c=-2;c<=2;c++)n===-2||n===2||c===-2||c===2||n===0&&c===0?u.set(r+n,e+c,!0,!0):u.set(r+n,e+c,!1,!0)}}function Un(u,a){const t=u.size,s=ue.getEncodedBits(a);let r,e,n;for(let c=0;c<18;c++)r=Math.floor(c/3),e=c%3+t-8-3,n=(s>>c&1)===1,u.set(r,e,n,!0),u.set(e,r,n,!0)}function xe(u,a,t){const s=u.size,r=Rn.getEncodedBits(a,t);let e,n;for(e=0;e<15;e++)n=(r>>e&1)===1,e<6?u.set(e,8,n,!0):e<8?u.set(e+1,8,n,!0):u.set(s-15+e,8,n,!0),e<8?u.set(8,s-e-1,n,!0):e<9?u.set(8,15-e-1+1,n,!0):u.set(8,15-e-1,n,!0);u.set(s-8,8,1,!0)}function Yn(u,a){const t=u.size;let s=-1,r=t-1,e=7,n=0;for(let c=t-1;c>0;c-=2)for(c===6&&c--;;){for(let i=0;i<2;i++)if(!u.isReserved(r,c-i)){let o=!1;n<a.length&&(o=(a[n]>>>e&1)===1),u.set(r,c-i,o),e--,e===-1&&(n++,e=7)}if(r+=s,r<0||t<=r){r-=s,s=-s;break}}}function Vn(u,a,t){const s=new Dn;t.forEach(function(i){s.put(i.mode.bit,4),s.put(i.getLength(),Hn.getCharCountIndicator(i.mode,u)),i.write(s)});const r=he.getSymbolTotalCodewords(u),e=Me.getTotalCodewordsCount(u,a),n=(r-e)*8;for(s.getLengthInBits()+4<=n&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const c=(n-s.getLengthInBits())/8;for(let i=0;i<c;i++)s.put(i%2?17:236,8);return qn(s,u,a)}function qn(u,a,t){const s=he.getSymbolTotalCodewords(a),r=Me.getTotalCodewordsCount(a,t),e=s-r,n=Me.getBlocksCount(a,t),c=s%n,i=n-c,o=Math.floor(s/n),l=Math.floor(e/n),d=l+1,f=o-l,p=new $n(f);let h=0;const m=new Array(n),g=new Array(n);let y=0;const w=new Uint8Array(u.buffer);for(let x=0;x<n;x++){const C=x<i?l:d;m[x]=w.slice(h,h+C),g[x]=p.encode(m[x]),h+=C,y=Math.max(y,C)}const v=new Uint8Array(s);let b=0,k,j;for(k=0;k<y;k++)for(j=0;j<n;j++)k<m[j].length&&(v[b++]=m[j][k]);for(k=0;k<f;k++)for(j=0;j<n;j++)v[b++]=g[j][k];return v}function Wn(u,a,t,s){let r;if(Array.isArray(u))r=we.fromArray(u);else if(typeof u=="string"){let o=a;if(!o){const l=we.rawSplit(u);o=ue.getBestVersionForData(l,t)}r=we.fromString(u,o||40)}else throw new Error("Invalid data");const e=ue.getBestVersionForData(r,t);if(!e)throw new Error("The amount of data is too big to be stored in a QR Code");if(!a)a=e;else if(a<e)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+e+`.
`);const n=Vn(a,t,r),c=he.getSymbolSize(a),i=new Pn(c);return Nn(i,a),zn(i),On(i,a),xe(i,t,0),a>=7&&Un(i,a),Yn(i,n),isNaN(s)&&(s=je.getBestMask(i,xe.bind(null,i,t))),je.applyMask(s,i),xe(i,t,s),{modules:i,version:a,errorCorrectionLevel:t,maskPattern:s,segments:r}}mr.create=function(a,t){if(typeof a>"u"||a==="")throw new Error("No input text");let s=be.M,r,e;return typeof t<"u"&&(s=be.from(t.errorCorrectionLevel,be.M),r=ue.from(t.version),e=je.from(t.maskPattern),t.toSJISFunc&&he.setToSJISFunction(t.toSJISFunc)),Wn(a,r,s,e)};var jr={},He={};(function(u){function a(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let s=t.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+t);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(e){return[e,e]}))),s.length===6&&s.push("F","F");const r=parseInt(s.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+s.slice(0,6).join("")}}u.getOptions=function(s){s||(s={}),s.color||(s.color={});const r=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,e=s.width&&s.width>=21?s.width:void 0,n=s.scale||4;return{width:e,scale:e?4:n,margin:r,color:{dark:a(s.color.dark||"#000000ff"),light:a(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},u.getScale=function(s,r){return r.width&&r.width>=s+r.margin*2?r.width/(s+r.margin*2):r.scale},u.getImageWidth=function(s,r){const e=u.getScale(s,r);return Math.floor((s+r.margin*2)*e)},u.qrToImageData=function(s,r,e){const n=r.modules.size,c=r.modules.data,i=u.getScale(n,e),o=Math.floor((n+e.margin*2)*i),l=e.margin*i,d=[e.color.light,e.color.dark];for(let f=0;f<o;f++)for(let p=0;p<o;p++){let h=(f*o+p)*4,m=e.color.light;if(f>=l&&p>=l&&f<o-l&&p<o-l){const g=Math.floor((f-l)/i),y=Math.floor((p-l)/i);m=d[c[g*n+y]?1:0]}s[h++]=m.r,s[h++]=m.g,s[h++]=m.b,s[h]=m.a}}})(He);(function(u){const a=He;function t(r,e,n){r.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}u.render=function(e,n,c){let i=c,o=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(o=s()),i=a.getOptions(i);const l=a.getImageWidth(e.modules.size,i),d=o.getContext("2d"),f=d.createImageData(l,l);return a.qrToImageData(f.data,e,i),t(d,o,l),d.putImageData(f,0,0),o},u.renderToDataURL=function(e,n,c){let i=c;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});const o=u.render(e,n,i),l=i.type||"image/png",d=i.rendererOpts||{};return o.toDataURL(l,d.quality)}})(jr);var Mr={};const Kn=He;function We(u,a){const t=u.a/255,s=a+'="'+u.hex+'"';return t<1?s+" "+a+'-opacity="'+t.toFixed(2).slice(1)+'"':s}function ke(u,a,t){let s=u+a;return typeof t<"u"&&(s+=" "+t),s}function Gn(u,a,t){let s="",r=0,e=!1,n=0;for(let c=0;c<u.length;c++){const i=Math.floor(c%a),o=Math.floor(c/a);!i&&!e&&(e=!0),u[c]?(n++,c>0&&i>0&&u[c-1]||(s+=e?ke("M",i+t,.5+o+t):ke("m",r,0),r=0,e=!1),i+1<a&&u[c+1]||(s+=ke("h",n),n=0)):r++}return s}Mr.render=function(a,t,s){const r=Kn.getOptions(t),e=a.modules.size,n=a.modules.data,c=e+r.margin*2,i=r.color.light.a?"<path "+We(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",o="<path "+We(r.color.dark,"stroke")+' d="'+Gn(n,e,r.margin)+'"/>',l='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+l+' shape-rendering="crispEdges">'+i+o+`</svg>
`;return typeof s=="function"&&s(null,f),f};const Xn=dn,Ie=mr,Ir=jr,Qn=Mr;function Ne(u,a,t,s,r){const e=[].slice.call(arguments,1),n=e.length,c=typeof e[n-1]=="function";if(!c&&!Xn())throw new Error("Callback required as last argument");if(c){if(n<2)throw new Error("Too few arguments provided");n===2?(r=t,t=a,a=s=void 0):n===3&&(a.getContext&&typeof r>"u"?(r=s,s=void 0):(r=s,s=t,t=a,a=void 0))}else{if(n<1)throw new Error("Too few arguments provided");return n===1?(t=a,a=s=void 0):n===2&&!a.getContext&&(s=t,t=a,a=void 0),new Promise(function(i,o){try{const l=Ie.create(t,s);i(u(l,a,s))}catch(l){o(l)}})}try{const i=Ie.create(t,s);r(null,u(i,a,s))}catch(i){r(i)}}Qt.create=Ie.create;Qt.toCanvas=Ne.bind(null,Ir.render);Qt.toDataURL=Ne.bind(null,Ir.renderToDataURL);Qt.toString=Ne.bind(null,function(u,a,t){return Qn.render(u,t)});var Fr={exports:{}},Ar={exports:{}};(function(){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(t,s){return t<<s|t>>>32-s},rotr:function(t,s){return t<<32-s|t>>>s},endian:function(t){if(t.constructor==Number)return a.rotl(t,8)&16711935|a.rotl(t,24)&4278255360;for(var s=0;s<t.length;s++)t[s]=a.endian(t[s]);return t},randomBytes:function(t){for(var s=[];t>0;t--)s.push(Math.floor(Math.random()*256));return s},bytesToWords:function(t){for(var s=[],r=0,e=0;r<t.length;r++,e+=8)s[e>>>5]|=t[r]<<24-e%32;return s},wordsToBytes:function(t){for(var s=[],r=0;r<t.length*32;r+=8)s.push(t[r>>>5]>>>24-r%32&255);return s},bytesToHex:function(t){for(var s=[],r=0;r<t.length;r++)s.push((t[r]>>>4).toString(16)),s.push((t[r]&15).toString(16));return s.join("")},hexToBytes:function(t){for(var s=[],r=0;r<t.length;r+=2)s.push(parseInt(t.substr(r,2),16));return s},bytesToBase64:function(t){for(var s=[],r=0;r<t.length;r+=3)for(var e=t[r]<<16|t[r+1]<<8|t[r+2],n=0;n<4;n++)r*8+n*6<=t.length*8?s.push(u.charAt(e>>>6*(3-n)&63)):s.push("=");return s.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var s=[],r=0,e=0;r<t.length;e=++r%4)e!=0&&s.push((u.indexOf(t.charAt(r-1))&Math.pow(2,-2*e+8)-1)<<e*2|u.indexOf(t.charAt(r))>>>6-e*2);return s}};Ar.exports=a})();var Jn=Ar.exports,Fe={utf8:{stringToBytes:function(u){return Fe.bin.stringToBytes(unescape(encodeURIComponent(u)))},bytesToString:function(u){return decodeURIComponent(escape(Fe.bin.bytesToString(u)))}},bin:{stringToBytes:function(u){for(var a=[],t=0;t<u.length;t++)a.push(u.charCodeAt(t)&255);return a},bytesToString:function(u){for(var a=[],t=0;t<u.length;t++)a.push(String.fromCharCode(u[t]));return a.join("")}}},Ke=Fe;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Zn=function(u){return u!=null&&(Dr(u)||ti(u)||!!u._isBuffer)};function Dr(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function ti(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&Dr(u.slice(0,0))}(function(){var u=Jn,a=Ke.utf8,t=Zn,s=Ke.bin,r=function(e,n){e.constructor==String?n&&n.encoding==="binary"?e=s.stringToBytes(e):e=a.stringToBytes(e):t(e)?e=Array.prototype.slice.call(e,0):!Array.isArray(e)&&e.constructor!==Uint8Array&&(e=e.toString());for(var c=u.bytesToWords(e),i=e.length*8,o=1732584193,l=-271733879,d=-1732584194,f=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[i>>>5]|=128<<i%32,c[(i+64>>>9<<4)+14]=i;for(var h=r._ff,m=r._gg,g=r._hh,y=r._ii,p=0;p<c.length;p+=16){var w=o,v=l,b=d,k=f;o=h(o,l,d,f,c[p+0],7,-680876936),f=h(f,o,l,d,c[p+1],12,-389564586),d=h(d,f,o,l,c[p+2],17,606105819),l=h(l,d,f,o,c[p+3],22,-1044525330),o=h(o,l,d,f,c[p+4],7,-176418897),f=h(f,o,l,d,c[p+5],12,1200080426),d=h(d,f,o,l,c[p+6],17,-1473231341),l=h(l,d,f,o,c[p+7],22,-45705983),o=h(o,l,d,f,c[p+8],7,1770035416),f=h(f,o,l,d,c[p+9],12,-1958414417),d=h(d,f,o,l,c[p+10],17,-42063),l=h(l,d,f,o,c[p+11],22,-1990404162),o=h(o,l,d,f,c[p+12],7,1804603682),f=h(f,o,l,d,c[p+13],12,-40341101),d=h(d,f,o,l,c[p+14],17,-1502002290),l=h(l,d,f,o,c[p+15],22,1236535329),o=m(o,l,d,f,c[p+1],5,-165796510),f=m(f,o,l,d,c[p+6],9,-1069501632),d=m(d,f,o,l,c[p+11],14,643717713),l=m(l,d,f,o,c[p+0],20,-373897302),o=m(o,l,d,f,c[p+5],5,-701558691),f=m(f,o,l,d,c[p+10],9,38016083),d=m(d,f,o,l,c[p+15],14,-660478335),l=m(l,d,f,o,c[p+4],20,-405537848),o=m(o,l,d,f,c[p+9],5,568446438),f=m(f,o,l,d,c[p+14],9,-1019803690),d=m(d,f,o,l,c[p+3],14,-187363961),l=m(l,d,f,o,c[p+8],20,1163531501),o=m(o,l,d,f,c[p+13],5,-1444681467),f=m(f,o,l,d,c[p+2],9,-51403784),d=m(d,f,o,l,c[p+7],14,1735328473),l=m(l,d,f,o,c[p+12],20,-1926607734),o=g(o,l,d,f,c[p+5],4,-378558),f=g(f,o,l,d,c[p+8],11,-2022574463),d=g(d,f,o,l,c[p+11],16,1839030562),l=g(l,d,f,o,c[p+14],23,-35309556),o=g(o,l,d,f,c[p+1],4,-1530992060),f=g(f,o,l,d,c[p+4],11,1272893353),d=g(d,f,o,l,c[p+7],16,-155497632),l=g(l,d,f,o,c[p+10],23,-1094730640),o=g(o,l,d,f,c[p+13],4,681279174),f=g(f,o,l,d,c[p+0],11,-358537222),d=g(d,f,o,l,c[p+3],16,-722521979),l=g(l,d,f,o,c[p+6],23,76029189),o=g(o,l,d,f,c[p+9],4,-640364487),f=g(f,o,l,d,c[p+12],11,-421815835),d=g(d,f,o,l,c[p+15],16,530742520),l=g(l,d,f,o,c[p+2],23,-995338651),o=y(o,l,d,f,c[p+0],6,-198630844),f=y(f,o,l,d,c[p+7],10,1126891415),d=y(d,f,o,l,c[p+14],15,-1416354905),l=y(l,d,f,o,c[p+5],21,-57434055),o=y(o,l,d,f,c[p+12],6,1700485571),f=y(f,o,l,d,c[p+3],10,-1894986606),d=y(d,f,o,l,c[p+10],15,-1051523),l=y(l,d,f,o,c[p+1],21,-2054922799),o=y(o,l,d,f,c[p+8],6,1873313359),f=y(f,o,l,d,c[p+15],10,-30611744),d=y(d,f,o,l,c[p+6],15,-1560198380),l=y(l,d,f,o,c[p+13],21,1309151649),o=y(o,l,d,f,c[p+4],6,-145523070),f=y(f,o,l,d,c[p+11],10,-1120210379),d=y(d,f,o,l,c[p+2],15,718787259),l=y(l,d,f,o,c[p+9],21,-343485551),o=o+w>>>0,l=l+v>>>0,d=d+b>>>0,f=f+k>>>0}return u.endian([o,l,d,f])};r._ff=function(e,n,c,i,o,l,d){var f=e+(n&c|~n&i)+(o>>>0)+d;return(f<<l|f>>>32-l)+n},r._gg=function(e,n,c,i,o,l,d){var f=e+(n&i|c&~i)+(o>>>0)+d;return(f<<l|f>>>32-l)+n},r._hh=function(e,n,c,i,o,l,d){var f=e+(n^c^i)+(o>>>0)+d;return(f<<l|f>>>32-l)+n},r._ii=function(e,n,c,i,o,l,d){var f=e+(c^(n|~i))+(o>>>0)+d;return(f<<l|f>>>32-l)+n},r._blocksize=16,r._digestsize=16,Fr.exports=function(e,n){if(e==null)throw new Error("Illegal argument "+e);var c=u.wordsToBytes(r(e,n));return n&&n.asBytes?c:n&&n.asString?s.bytesToString(c):u.bytesToHex(c)}})();var ei=Fr.exports;const ri=hr(ei);class yt{static getMixinKey(a){return this.MIXIN_KEY_ENC_TAB.map(t=>a[t]).join("").slice(0,32)}static encWbi(a,t,s){const r=this.getMixinKey(t+s),e=Math.round(Date.now()/1e3),n=/[!'()*]/g;a={...a,wts:e};const c=Object.keys(a).sort().map(o=>{const l=a[o].toString().replace(n,"");return`${encodeURIComponent(o)}=${encodeURIComponent(l)}`}).join("&"),i=ri(c+r);return c+"&w_rid="+i}static getWbiKeysFromConfig(a){var r,e,n,c;if(!((e=(r=a==null?void 0:a.bilibiliLogin)==null?void 0:r.userInfo)!=null&&e.wbi_img))return null;const{img_url:t,sub_url:s}=a.bilibiliLogin.userInfo.wbi_img;return{imgKey:((n=t.split("/").pop())==null?void 0:n.split(".")[0])||"",subKey:((c=s.split("/").pop())==null?void 0:c.split(".")[0])||""}}static async proxyRequest(a,t={}){try{const r=await(await fetch(this.API.PROXY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a,method:"GET",timeout:7e3,contentType:"application/json",headers:Object.entries(t).map(([e,n])=>({[e]:n}))})})).json();if(r.code!==0)throw new Error("代理请求失败: "+r.msg);return JSON.parse(r.data.body)}catch(s){throw console.error("代理请求失败:",s),new Error("代理请求失败")}}static extractVideoId(a){try{const t=new URL(a);if(t.hostname==="b23.tv")return null;const s=parseInt(t.searchParams.get("p")||"1"),r=t.pathname.match(/\/(BV[\w]+)/);if(r)return{bvid:r[1],p:s};const e=t.searchParams.get("aid"),n=t.searchParams.get("bvid");return e?{aid:e,p:s}:n?{bvid:n,p:s}:null}catch{return null}}static async getVideoPages(a){try{const t=await this.proxyRequest(`${this.API.VIDEO_PAGES}?${new URLSearchParams(a).toString()}`);return t.code===0&&Array.isArray(t.data)?t.data:[]}catch(t){return console.error("获取视频分P信息失败:",t),[]}}static formatDuration(a){const t=Math.floor(a/3600),s=Math.floor(a%3600/60),r=a%60;return t>0?`${t}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${s}:${r.toString().padStart(2,"0")}`}static async generateQRCode(a){try{return await Qt.toDataURL(a,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(t){throw console.error("生成二维码失败:",t),new Error("生成二维码失败")}}static extractSessData(a){try{return new URL(a).searchParams.get("SESSDATA")}catch{return null}}static async getVideoInfo(a){const t=this.extractVideoId(a);if(!t)return null;try{const{p:s,...r}=t,e=await this.proxyRequest(`${this.API.VIDEO_INFO}?${new URLSearchParams(r).toString()}`);if(e.code===0){const n=e.data,c=await this.getVideoPages(r);let i=n.cid;if(c.length>0){const o=Math.min(Math.max(1,s||1),c.length)-1;i=c[o].cid,c.length>1&&(n.title=`${n.title} - P${o+1}${c[o].part?": "+c[o].part:""}`)}return{url:a,title:n.title,artist:n.owner.name,artistIcon:n.owner.face,duration:this.formatDuration(n.duration),thumbnail:n.pic,aid:String(n.aid),bvid:n.bvid,cid:String(i)}}return null}catch(s){return console.error("获取视频信息失败:",s),null}}static async getLoginQRCode(){try{const a=await this.proxyRequest(this.API.QR_LOGIN);if(a.code!==0)throw new Error("获取二维码失败: "+a.message);if(a.data)return{qrcodeData:await this.generateQRCode(a.data.url),qrcode_key:a.data.qrcode_key};throw new Error("获取二维码失败")}catch{throw new Error("获取二维码失败")}}static async checkQRCodeStatus(a){try{const t=await this.proxyRequest(`${this.API.QR_POLL}?qrcode_key=${a}`);if(t.code===0&&t.data.code===0){const s=this.extractSessData(t.data.url),r=s?await this.getUserInfo(s):null;return{code:0,message:"登录成功",url:t.data.url,refresh_token:t.data.refresh_token,timestamp:t.data.timestamp,userInfo:r}}return{code:t.data.code,message:t.data.message||"未知状态"}}catch{throw new Error("检查二维码状态失败")}}static async getUserInfo(a){try{const t=await this.proxyRequest(this.API.USER_INFO,{Cookie:`SESSDATA=${a}`});if(t.code===0){const{face:s,level_info:r,mid:e,uname:n,wbi_img:c}=t.data;return{face:s,level_info:r,mid:e,uname:n,wbi_img:c?{img_url:c.img_url,sub_url:c.sub_url}:void 0}}throw new Error(t.message||"获取用户信息失败")}catch{throw new Error("获取用户信息失败")}}static async getVideoUrl(a,t,s,r){var i,o,l,d,f;const e={bvid:a,cid:t,qn:s,fnval:16,fnver:0,fourk:1,platform:"html5",high_quality:1},n=this.getWbiKeysFromConfig(r);if(!n)throw new Error("无法获取WBI签名密钥");const c=this.encWbi(e,n.imgKey,n.subKey);console.log("[思源媒体播放器] 视频流API签名参数:",c);try{const p=(i=r.bilibiliLogin)!=null&&i.url?this.extractSessData(r.bilibiliLogin.url):null,h={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Referer:"https://www.bilibili.com",Origin:"https://www.bilibili.com"};p&&(h.Cookie=`SESSDATA=${p}`);const m=await this.proxyRequest(`${this.API.VIDEO_STREAM}?${c}`,h);if(m.data.durl)m.data.dash={video:[{id:m.data.quality,baseUrl:decodeURIComponent(m.data.durl[0].url),codecs:"avc1.640032",bandwidth:m.data.durl[0].size,frameRate:"30"}],audio:[]};else if(m.data.dash)m.data.dash.video&&(m.data.dash.video=m.data.dash.video.map(g=>({...g,baseUrl:decodeURIComponent(g.baseUrl)}))),m.data.dash.audio&&(m.data.dash.audio=m.data.dash.audio.map(g=>({...g,baseUrl:decodeURIComponent(g.baseUrl)})));else throw new Error("不支持的视频格式");return console.log("[思源媒体播放器] 视频流信息:",{状态码:m.code,消息:m.message,视频信息:{清晰度:m.data.quality,格式:m.data.format,时长:Math.floor(m.data.timelength/1e3)+"秒",支持清晰度:m.data.accept_description,视频编码:m.data.video_codecid,DASH信息:{视频流:(l=(o=m.data.dash)==null?void 0:o.video)==null?void 0:l.map(g=>({清晰度:g.id,编码格式:g.codecs,带宽:g.bandwidth,帧率:g.frameRate,播放地址:g.baseUrl})),音频流:(f=(d=m.data.dash)==null?void 0:d.audio)==null?void 0:f.map(g=>({编码格式:g.codecs,带宽:g.bandwidth,播放地址:g.baseUrl}))}}}),m}catch(p){throw console.error("[思源媒体播放器] 获取视频流失败:",p),p}}static selectBestStream(a,t=null){return a!=null&&a.length?a.sort((r,e)=>{if(t){if(r.id===t)return-1;if(e.id===t)return 1}return e.id-r.id||e.bandwidth-r.bandwidth})[0]:null}static async getProcessedVideoStream(a,t,s,r){var o;let e=null,n=null,c=0;const i=3;for(;c<i;)try{const l=await this.getVideoUrl(a,t,s,r);if(!l.data.dash&&!l.data.durl)throw new Error("不支持的视频格式");if(l.data.durl)e={id:l.data.quality,baseUrl:l.data.durl[0].url,codecs:"avc1.640032",bandwidth:l.data.durl[0].size,frameRate:"30"},n=null;else{const f=l.data.dash.video||[],p=l.data.dash.audio||[],h=c>0?null:s;e=this.selectBestStream(f,h),n=this.selectBestStream(p)}if(!e)throw new Error("无法获取合适的播放流");const d={Referer:`https://www.bilibili.com/video/${a}/`,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"};if((o=r.bilibiliLogin)!=null&&o.url){const f=new URL(r.bilibiliLogin.url),p=Array.from(f.searchParams.entries()).filter(([h])=>h!=="url").map(([h,m])=>`${h}=${m}`).join("; ");p&&(d.Cookie=p)}return{video:{url:e.baseUrl,quality:e.id,codecs:e.codecs,bandwidth:e.bandwidth,frameRate:e.frameRate},audio:n?{url:n.baseUrl,codecs:n.codecs,bandwidth:n.bandwidth}:void 0,headers:{...d,Origin:"https://www.bilibili.com"}}}catch(l){if(console.error(`[思源媒体播放器] 获取播放流失败 (重试 ${c+1}/${i}):`,l),c++,c===i)throw new Error(`获取播放流失败: ${l.message}`);await new Promise(d=>setTimeout(d,1e3*c))}throw new Error("无法获取播放流")}}et(yt,"API",{BASE:"https://api.bilibili.com",PROXY:"/api/network/forwardProxy",QR_LOGIN:"https://passport.bilibili.com/x/passport-login/web/qrcode/generate",QR_POLL:"https://passport.bilibili.com/x/passport-login/web/qrcode/poll",USER_INFO:"https://api.bilibili.com/x/web-interface/nav",VIDEO_INFO:"https://api.bilibili.com/x/web-interface/view",VIDEO_PAGES:"https://api.bilibili.com/x/player/pagelist",VIDEO_STREAM:"https://api.bilibili.com/x/player/wbi/playurl"}),et(yt,"MIXIN_KEY_ENC_TAB",[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52]);class St{static convertToFileUrl(a){return a.startsWith("http://")||a.startsWith("https://")||a.startsWith("file://")?a:/^[a-zA-Z]:\\/.test(a)?"file:///"+a.replace(/\\/g,"/"):"file://"+a}static getCachedInfo(a){try{const t=localStorage.getItem(`media_info_${a}`);if(!t)return null;const{timestamp:s,info:r}=JSON.parse(t);return Date.now()-s>this.CACHE_EXPIRY?(localStorage.removeItem(`media_info_${a}`),null):r}catch{return null}}static cacheInfo(a,t){if(t)try{localStorage.setItem(`media_info_${a}`,JSON.stringify({timestamp:Date.now(),info:t}))}catch(s){console.error("Failed to cache media info:",s)}}static cleanupCache(){try{const a=Date.now();for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);if(s!=null&&s.startsWith("media_info_"))try{const{timestamp:r}=JSON.parse(localStorage.getItem(s));a-r>this.CACHE_EXPIRY&&localStorage.removeItem(s)}catch{localStorage.removeItem(s)}}}catch(a){console.warn("Failed to cleanup cache:",a)}}static async getMediaInfoFromElement(a){return new Promise((t,s)=>{const r=this.convertToFileUrl(a),e=this.getMediaType(a),n=document.createElement(e);n.style.display="none",document.body.appendChild(n);let c;const i=async()=>{const d=this.formatDuration(n.duration);let f="";if(n instanceof HTMLVideoElement)try{n.currentTime=n.duration/2,await new Promise(m=>n.addEventListener("seeked",m,{once:!0}));const p=document.createElement("canvas");p.width=n.videoWidth,p.height=n.videoHeight,p.getContext("2d").drawImage(n,0,0,p.width,p.height),f=p.toDataURL("image/jpeg",.7)}catch(p){console.warn("Failed to get video thumbnail:",p)}l(),t({title:this.extractTitleFromUrl(a),duration:d,thumbnail:f,artist:"",artistIcon:""})},o=()=>{l(),s(new Error("Failed to load media"))},l=()=>{n.removeEventListener("loadedmetadata",i),n.removeEventListener("error",o),n.parentNode&&n.parentNode.removeChild(n),c&&clearTimeout(c)};c=window.setTimeout(()=>{l(),s(new Error("Media load timeout"))},1e4),n.addEventListener("loadedmetadata",i),n.addEventListener("error",o),n.src=r,n.load()})}static extractTitleFromUrl(a){try{const s=new URL(a).pathname.split("/"),r=s[s.length-1];return decodeURIComponent(r.split(".")[0])||"未知标题"}catch{return"未知标题"}}static formatDuration(a){const t=Math.floor(a/3600),s=Math.floor(a%3600/60),r=Math.floor(a%60);return t>0?`${t}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${s}:${r.toString().padStart(2,"0")}`}static getMediaType(a){const t=[".mp4",".webm",".ogg",".mov"],s=[".mp3",".wav",".aac",".m4a"];return t.some(r=>a.toLowerCase().endsWith(r))?"video":s.some(r=>a.toLowerCase().endsWith(r))?"audio":"video"}static async createMediaItem(a,t){try{const s=this.convertToFileUrl(a);let r=this.getCachedInfo(s);if(r||(s.includes("bilibili.com")?t!=null&&t.aid||t!=null&&t.bvid?r={...await yt.getVideoInfo(s),...t}:r=await yt.getVideoInfo(s):r=await this.getMediaInfoFromElement(s),r&&this.cacheInfo(s,r)),!r)return null;const e=s.includes("bilibili.com")?"bilibili":this.getMediaType(s);return{id:`media-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:r.title,artist:r.artist,artistIcon:r.artistIcon,duration:r.duration,thumbnail:r.thumbnail||(e==="audio"?this.DEFAULT_AUDIO_THUMBNAIL:""),url:s,type:e,isPinned:!1,isFavorite:!1,aid:r.aid,bvid:r.bvid,cid:r.cid}}catch(s){return console.error("Failed to create media item:",s),null}}static getMediaInfoFromItems(a){return a.map(t=>({url:t.url,...t.aid?{aid:t.aid}:{},...t.bvid?{bvid:t.bvid}:{},...t.cid?{cid:t.cid}:{}}))}static async createMediaItems(a){return(await Promise.all(a.map(s=>this.createMediaItem(s.url,s)))).filter(s=>s!==null)}}et(St,"DEFAULT_AUDIO_THUMBNAIL",`data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <path d="M628.905386 769.860427 628.905386 482.261019l169.381759-27.464779C771.308637 311.811584 645.822916 203.633728 494.993179 203.633728c-170.51599 0-308.738475 138.222485-308.738475 308.738875 0 170.516989 138.222485 308.738875 308.738475 308.738875 16.540186 0 32.756191-1.34209 48.589456-3.839397 12.391598-20.573051 34.625524-37.084856 62.858182-44.145869C613.897561 771.276467 621.429455 770.182208 628.905386 769.860427zM551.718919 228.830645l-33.079572 144.922942-33.078373 0-23.62798-144.922942C496.589896 211.497397 551.718919 228.830645 551.718919 228.830645zM494.993179 626.995689c-63.300482 0-114.622086-51.317007-114.622086-114.622886 0-63.30348 51.321604-114.622486 114.622086-114.622486 63.306478 0 114.622486 51.319006 114.622486 114.622486C609.615665 575.678482 558.299457 626.995689 494.993179 626.995689zM494.993179 424.978057c-48.20112 0-87.394147 39.192827-87.394147 87.394546 0 48.20112 39.192827 87.395546 87.394147 87.395546 48.201719 0 87.395946-39.194226 87.395946-87.395546C582.389124 464.170884 543.194698 424.978057 494.993179 424.978057zM494.993179 574.79708c-34.421063 0-62.423477-28.002015-62.423477-62.424476 0-34.421662 28.011408-62.424076 62.423477-62.424076 34.432055 0 62.416082 28.002414 62.416082 62.424076C557.409061 546.795265 529.425034 574.79708 494.993179 574.79708zM534.528574 870.531771c1.499983 8.297374 4.789753 16.008146 9.524542 22.939447-16.073102 2.058604-32.429013 3.239803-49.050144 3.239803-211.934708 0-384.347812-172.417701-384.347812-384.338419 0-211.922716 172.413104-384.338419 384.338019-384.338419 188.118456 0 345.001689 135.905456 377.892189 314.664258l-37.310503 6.059292c-29.969681-160.790984-171.236502-282.919381-340.581686-282.919381-191.084445 0-346.53365 155.451604-346.53365 346.53425 0 191.080048 155.449205 346.53425 346.53365 346.53425 12.796724 0 25.414169-0.748493 37.859731-2.104573C532.968631 861.361189 533.461497 865.948079 534.528574 870.531771zM912.096583 463.425989l0 333.227272c0 27.59629-20.573051 49.609165-52.658098 57.716668-35.234911 8.736077-69.250848-6.021917-75.997274-33.022611-6.760416-27.057655 16.31294-56.065787 51.53386-64.879811 15.920206-3.931335 31.587384-3.128879 44.698494 1.494986L879.673565 557.20001l-180.148459 32.927675-0.834434 249.757065-0.036975 0c-0.156894 23.646767-21.482435 46.868223-52.156438 54.45388-34.814196 8.759061-71.280472-7.807706-75.193819-32.597899-6.691463-26.747865 16.124068-55.470191 51.00222-64.201272 15.699356-3.904353 31.039755-3.119885 43.933013 1.402049L666.238674 503.300354 912.096583 463.425989z" fill="currentColor" style="color:var(--b3-theme-primary)"/></svg>`),et(St,"CACHE_EXPIRY",24*60*60*1e3);function Ge(u,a,t){const s=u.slice();return s[37]=a[t],s}function Xe(u,a,t){const s=u.slice();return s[40]=a[t],s}function ni(u){let a,t=u[40].name+"",s,r,e;function n(){return u[21](u[40])}function c(...i){return u[22](u[40],...i)}return{c(){a=H("button"),s=tt(t),F(a,"class","tab"),it(a,"active",u[5]===u[40].id)},m(i,o){Q(i,a,o),A(a,s),r||(e=[J(a,"click",n),J(a,"contextmenu",dr(c))],r=!0)},p(i,o){u=i,o[0]&16&&t!==(t=u[40].name+"")&&nt(s,t),o[0]&48&&it(a,"active",u[5]===u[40].id)},d(i){i&&X(a),r=!1,at(e)}}}function ii(u){let a,t,s,r,e,n;function c(...o){return u[19](u[40],...o)}function i(...o){return u[20](u[40],...o)}return{c(){a=H("div"),t=H("input"),F(t,"id",s="tab-edit-"+u[40].id),F(t,"type","text"),F(t,"class","tab-input"),t.value=r=u[40].name,F(a,"class","tab-edit-wrapper")},m(o,l){Q(o,a,l),A(a,t),e||(n=[J(t,"blur",c),J(t,"keydown",i)],e=!0)},p(o,l){u=o,l[0]&16&&s!==(s="tab-edit-"+u[40].id)&&F(t,"id",s),l[0]&16&&r!==(r=u[40].name)&&t.value!==r&&(t.value=r)},d(o){o&&X(a),e=!1,at(n)}}}function Qe(u,a){let t,s;function r(c,i){return c[40].isEditing?ii:ni}let e=r(a),n=e(a);return{key:u,first:null,c(){t=Oe(),n.c(),s=Oe(),this.first=t},m(c,i){Q(c,t,i),n.m(c,i),Q(c,s,i)},p(c,i){a=c,e===(e=r(a))&&n?n.p(a,i):(n.d(1),n=e(a),n&&(n.c(),n.m(s.parentNode,s)))},d(c){c&&(X(t),X(s)),n.d(c)}}}function ai(u){let a,t,s;return{c(){a=H("button"),a.textContent="+",F(a,"class","tab tab-add")},m(r,e){Q(r,a,e),t||(s=J(a,"click",u[13].add),t=!0)},p:rt,d(r){r&&X(a),t=!1,s()}}}function oi(u){let a,t,s;return{c(){a=H("input"),F(a,"type","text"),F(a,"class","tab-input"),F(a,"placeholder","新标签")},m(r,e){Q(r,a,e),u[23](a),t||(s=[J(a,"blur",u[13].save),J(a,"keydown",u[13].save)],t=!0)},p:rt,d(r){r&&X(a),u[23](null),t=!1,at(s)}}}function si(u){let a,t=[],s=new Map,r=It(u[6].items);const e=n=>n[37].id;for(let n=0;n<r.length;n+=1){let c=Ge(u,r,n),i=e(c);s.set(i,t[n]=Ze(i,c))}return{c(){a=H("div");for(let n=0;n<t.length;n+=1)t[n].c();F(a,"class","playlist-items")},m(n,c){Q(n,a,c);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(a,null)},p(n,c){c[0]&20545&&(r=It(n[6].items),t=Be(t,c,e,1,n,r,s,a,Pe,Ze,null,Ge))},d(n){n&&X(a);for(let c=0;c<t.length;c+=1)t[c].d()}}}function li(u){let a;return{c(){a=H("div"),a.textContent="暂无媒体文件",F(a,"class","playlist-empty")},m(t,s){Q(t,a,s)},p:rt,d(t){t&&X(a)}}}function Je(u){let a,t,s,r,e,n,c=u[37].artist+"",i;return{c(){a=H("div"),t=H("img"),e=q(),n=H("span"),i=tt(c),F(t,"class","artist-icon"),vt(t.src,s=u[37].artistIcon||"/images/default-avatar.png")||F(t,"src",s),F(t,"alt",r=u[37].artist),F(a,"class","item-artist")},m(o,l){Q(o,a,l),A(a,t),A(a,e),A(a,n),A(n,i)},p(o,l){l[0]&64&&!vt(t.src,s=o[37].artistIcon||"/images/default-avatar.png")&&F(t,"src",s),l[0]&64&&r!==(r=o[37].artist)&&F(t,"alt",r),l[0]&64&&c!==(c=o[37].artist+"")&&nt(i,c)},d(o){o&&X(a)}}}function Ze(u,a){let t,s,r,e,n,c,i,o=(a[37].duration||"--:--")+"",l,d,f,p,h=a[37].title+"",m,g,y,w,v,b,k=a[37].url+"",j,x,C,_,P,S=a[37].artist&&Je(a);function I(){return a[24](a[37])}function E(...T){return a[25](a[37],...T)}return{key:u,first:null,c(){var T;t=H("div"),s=H("div"),r=H("img"),c=q(),i=H("span"),l=tt(o),d=q(),f=H("div"),p=H("div"),m=tt(h),y=q(),S&&S.c(),w=q(),v=H("div"),b=H("div"),j=tt(k),C=q(),vt(r.src,e=a[37].thumbnail)||F(r,"src",e),F(r,"alt",n=a[37].title),F(i,"class","duration"),F(s,"class","item-thumbnail"),F(p,"class","item-title"),F(p,"title",g=a[37].title),F(b,"class","item-url"),F(b,"title",x=a[37].url),F(v,"class","item-meta-group"),F(f,"class","item-info"),F(t,"class","playlist-item"),it(t,"active",((T=a[0])==null?void 0:T.id)===a[37].id),this.first=t},m(T,M){Q(T,t,M),A(t,s),A(s,r),A(s,c),A(s,i),A(i,l),A(t,d),A(t,f),A(f,p),A(p,m),A(f,y),S&&S.m(f,null),A(f,w),A(f,v),A(v,b),A(b,j),A(t,C),_||(P=[J(t,"click",I),J(t,"contextmenu",dr(E))],_=!0)},p(T,M){var $;a=T,M[0]&64&&!vt(r.src,e=a[37].thumbnail)&&F(r,"src",e),M[0]&64&&n!==(n=a[37].title)&&F(r,"alt",n),M[0]&64&&o!==(o=(a[37].duration||"--:--")+"")&&nt(l,o),M[0]&64&&h!==(h=a[37].title+"")&&nt(m,h),M[0]&64&&g!==(g=a[37].title)&&F(p,"title",g),a[37].artist?S?S.p(a,M):(S=Je(a),S.c(),S.m(f,w)):S&&(S.d(1),S=null),M[0]&64&&k!==(k=a[37].url+"")&&nt(j,k),M[0]&64&&x!==(x=a[37].url)&&F(b,"title",x),M[0]&65&&it(t,"active",(($=a[0])==null?void 0:$.id)===a[37].id)},d(T){T&&X(t),S&&S.d(),_=!1,at(P)}}}function tr(u){let a,t,s;return{c(){a=H("span"),a.textContent="×",F(a,"class","clear-icon")},m(r,e){Q(r,a,e),t||(s=J(a,"click",u[28]),t=!0)},p:rt,d(r){r&&X(a),t=!1,s()}}}function ci(u){let a,t,s,r,e,n,c,i,o,l=[],d=new Map,f,p,h,m,g,y,w,v,b,k,j,x,C,_,P=It(u[4]);const S=L=>L[40].id;for(let L=0;L<P.length;L+=1){let z=Xe(u,P,L),W=S(z);d.set(W,l[L]=Qe(W,z))}function I(L,z){return L[7]?oi:ai}let E=I(u),T=E(u);function M(L,z){return L[10]?si:li}let $=M(u),B=$(u),N=u[8]&&tr(u);return{c(){a=H("div"),t=H("div"),s=H("h3"),s.textContent="播放列表",r=q(),e=H("span"),n=tt(u[10]),c=tt(" 个项目"),i=q(),o=H("div");for(let L=0;L<l.length;L+=1)l[L].c();f=q(),p=H("div"),T.c(),h=q(),m=H("div"),B.c(),g=q(),y=H("div"),w=H("div"),v=H("input"),b=q(),N&&N.c(),k=q(),j=H("button"),j.textContent="添加",F(e,"class","playlist-count"),F(t,"class","playlist-header"),F(p,"class","tab-add-wrapper"),F(o,"class","playlist-tabs"),F(m,"class","playlist-content"),F(v,"type","text"),F(v,"class","tab-input playlist-input"),F(v,"placeholder","输入媒体链接..."),F(w,"class","input-wrapper"),F(j,"class","add-btn"),F(y,"class","playlist-footer"),F(a,"class",x="playlist "+u[1]),it(a,"hidden",u[2])},m(L,z){Q(L,a,z),A(a,t),A(t,s),A(t,r),A(t,e),A(e,n),A(e,c),A(a,i),A(a,o);for(let W=0;W<l.length;W+=1)l[W]&&l[W].m(o,null);A(o,f),A(o,p),T.m(p,null),A(a,h),A(a,m),B.m(m,null),A(a,g),A(a,y),A(y,w),A(w,v),Ue(v,u[8]),A(w,b),N&&N.m(w,null),A(y,k),A(y,j),C||(_=[J(v,"input",u[26]),J(v,"keydown",u[27]),J(j,"click",u[29])],C=!0)},p(L,z){z[0]&1024&&nt(n,L[10]),z[0]&10288&&(P=It(L[4]),l=Be(l,z,S,1,L,P,d,o,Pe,Qe,f,Xe)),E===(E=I(L))&&T?T.p(L,z):(T.d(1),T=E(L),T&&(T.c(),T.m(p,null))),$===($=M(L))&&B?B.p(L,z):(B.d(1),B=$(L),B&&(B.c(),B.m(m,null))),z[0]&256&&v.value!==L[8]&&Ue(v,L[8]),L[8]?N?N.p(L,z):(N=tr(L),N.c(),N.m(w,null)):N&&(N.d(1),N=null),z[0]&2&&x!==(x="playlist "+L[1])&&F(a,"class",x),z[0]&6&&it(a,"hidden",L[2])},i:rt,o:rt,d(L){L&&X(a);for(let z=0;z<l.length;z+=1)l[z].d();T.d(),B.d(),N&&N.d(),C=!1,at(_)}}}function ui(u){try{const a=new URL(u),t=a.searchParams.get("t");a.searchParams.delete("t");const s=a.toString();if(!t)return console.log("[PlayList] 无时间参数:",{mediaUrl:s}),{mediaUrl:s};if(t.includes("-")){const[r,e]=t.split("-").map(Number);return console.log("[PlayList] 解析循环片段:",{mediaUrl:s,start:r,end:e}),{mediaUrl:s,startTime:isNaN(r)?void 0:r,endTime:isNaN(e)?void 0:e}}else{const r=Number(t);return console.log("[PlayList] 解析时间戳:",{mediaUrl:s,time:r}),{mediaUrl:s,startTime:isNaN(r)?void 0:r}}}catch(a){return console.error("[PlayList] 解析链接失败:",a),{mediaUrl:u}}}function di(u,a,t){let s,r,{items:e=[]}=a,{currentItem:n=null}=a,{configManager:c}=a,{className:i=""}=a,{hidden:o=!1}=a,l=[],d="default",f=!1,p="",h;const m=De();let g=null,y=0;async function w(D){try{const R=await c.getConfig();let U;if(D.type==="bilibili"&&D.bvid&&D.cid){const O=await yt.getProcessedVideoStream(D.bvid,D.cid,0,R);U={url:O.video.url,audioUrl:O.audio.url,headers:O.headers,title:D.title,originalUrl:D.originalUrl||D.url}}else U={url:D.url,title:D.title,originalUrl:D.originalUrl||D.url};U={...U,startTime:D.startTime,endTime:D.endTime,isLoop:D.startTime!==void 0&&D.endTime!==void 0},m("play",U),t(0,n=D)}catch(R){console.error("[Playlist] 播放失败:",R),V.showMessage("播放失败，请重试")}}async function v(D){const R=Date.now();g===D.id&&R-y<300?(await w(D),g=null,y=0):(g=D.id,y=R,m("select",D))}jt(async()=>{St.cleanupCache(),await b()});async function b(){const D=await c.load(),R=await Promise.all(D.playlists.map(async U=>({...U,items:await St.createMediaItems(U.items||[])})));t(4,l=R)}function k(){const D=l.map(R=>({id:R.id,name:R.name,isFixed:R.isFixed,items:St.getMediaInfoFromItems(R.items||[])}));c.updatePlaylists(D)}async function j(D){var R;try{console.log("[PlayList] 开始解析链接:",D);const{mediaUrl:U,startTime:O,endTime:Z}=ui(D);console.log("[PlayList] 解析结果:",{mediaUrl:U,startTime:O,endTime:Z});const ot=(R=s==null?void 0:s.items)==null?void 0:R.find(ct=>ct.url===U);if(ot){console.log("[PlayList] 使用已存在项:",ot);const ct={...ot,startTime:O,endTime:Z,originalUrl:D};console.log("[PlayList] 更新后的媒体项:",ct),await w(ct);return}const lt=await St.createMediaItem(U,{startTime:O,endTime:Z,originalUrl:D});if(console.log("[PlayList] 创建新媒体项:",lt),!lt){V.showMessage("无法解析媒体文件");return}s&&(t(6,s.items=[...s.items||[],lt],s),await k()),await w(lt)}catch(U){console.error("[Playlist] 添加媒体失败:",U),V.showMessage("添加媒体失败")}}const x={add(){f||(t(7,f=!0),setTimeout(()=>h==null?void 0:h.focus(),0))},save(D,R){if(D instanceof KeyboardEvent&&D.key!=="Enter")return;const U=D.target,O=U.value.trim();R?t(4,l=l.map(Z=>Z.id===R.id?{...Z,name:O||Z.name,isEditing:!1}:Z)):O&&(t(4,l=[...l,{id:`tab-${Date.now()}`,name:O}]),t(7,f=!1)),U.value=""},showContextMenu(D,R){if(R.isFixed)return;const U=new V.Menu("tabContextMenu");U.addItem({icon:"iconEdit",label:"重命名",click:()=>{t(4,l=l.map(O=>({...O,isEditing:O.id===R.id}))),setTimeout(()=>{const O=document.querySelector(`#tab-edit-${R.id}`);O==null||O.focus(),O==null||O.select()},0)}}),U.addItem({icon:"iconTrashcan",label:"删除",click:()=>{t(4,l=l.filter(O=>O.id!==R.id)),d===R.id&&t(5,d="default")}}),U.open({x:D.clientX,y:D.clientY})}},C={showContextMenu(D,R){const U=new V.Menu("mediaItemMenu");U.addItem({icon:"iconPlay",label:"播放",click:()=>C.play(R)}),U.addItem({icon:"iconPin",label:R.isPinned?"取消置顶":"置顶",click:()=>C.togglePin(R)}),U.addItem({icon:"iconHeart",label:R.isFavorite?"取消收藏":"收藏",click:()=>C.toggleFavorite(R)}),U.addSeparator(),U.addItem({icon:"iconTrashcan",label:"删除",click:()=>{const O=l.find(Z=>Z.id===d);if(O){if(O.items=O.items.filter(Z=>Z.id!==R.id),t(4,l),R.isFavorite){const Z=l.find(ot=>ot.id==="favorites");Z&&(Z.items=Z.items.filter(ot=>ot.id!==R.id))}m("play",{url:R.url,originalUrl:R.originalUrl||R.url,startTime:R.startTime,endTime:R.endTime,isLoop:R.startTime!==void 0&&R.endTime!==void 0,type:R.type,bvid:R.bvid,title:R.title})}}}),U.open({x:D.clientX,y:D.clientY})},togglePin(D){const R=l.find(O=>O.id===d);if(!R)return;const U=R.items.map(O=>O.id===D.id?{...O,isPinned:!O.isPinned}:O);R.items=[...U.filter(O=>O.isPinned),...U.filter(O=>!O.isPinned)],t(4,l)},toggleFavorite(D){const R=l.find(O=>O.id==="favorites"),U=l.find(O=>O.id===d);!R||!U||(D.isFavorite?R.items=R.items.filter(O=>O.id!==D.id):R.items=[...R.items||[],{...D,isFavorite:!0}],U.items=U.items.map(O=>O.id===D.id?{...O,isFavorite:!O.isFavorite}:O),t(4,l))},async play(D){await w(D)}};async function _(D){var R;try{const U=(R=s==null?void 0:s.items)==null?void 0:R.find(O=>O.url===D.url||O.originalUrl===D.originalUrl);if(U)await w(U),V.showMessage("媒体已在播放列表中，直接播放");else{const O=l.find(Z=>Z.id===d);if(!O)throw new Error("未找到活动标签页");O.items=[...O.items||[],D],t(4,l),await w(D),V.showMessage("已添加到播放列表并开始播放")}}catch(U){throw console.error("[Playlist] 处理媒体项失败:",U),V.showMessage("处理媒体失败"),U}}function P(D){t(15,e=[...e,D]),e.length===1&&w(D)}async function S(D){const R=D||p.trim();if(!R){V.showMessage("请输入媒体链接");return}await j(R),D||t(8,p="")}const I=(D,R)=>x.save(R,D),E=(D,R)=>x.save(R,D),T=D=>{t(5,d=D.id),m("play",{url:"",originalUrl:"",startTime:0,endTime:0,isLoop:!1,type:"",bvid:"",title:""})},M=(D,R)=>x.showContextMenu(R,D);function $(D){Mt[D?"unshift":"push"](()=>{h=D,t(9,h)})}const B=D=>v(D),N=(D,R)=>C.showContextMenu(R,D);function L(){p=this.value,t(8,p)}const z=D=>D.key==="Enter"&&S(),W=()=>t(8,p=""),K=()=>p&&S();return u.$$set=D=>{"items"in D&&t(15,e=D.items),"currentItem"in D&&t(0,n=D.currentItem),"configManager"in D&&t(16,c=D.configManager),"className"in D&&t(1,i=D.className),"hidden"in D&&t(2,o=D.hidden)},u.$$.update=()=>{var D;u.$$.dirty[0]&48&&t(6,s=l.find(R=>R.id===d)),u.$$.dirty[0]&64&&t(10,r=((D=s==null?void 0:s.items)==null?void 0:D.length)||0),u.$$.dirty[0]&16&&l.length>0&&k()},[n,i,o,S,l,d,s,f,p,h,r,m,v,x,C,e,c,_,P,I,E,T,M,$,B,N,L,z,W,K]}class fi extends Xt{constructor(a){super(),Gt(this,a,di,ci,Kt,{items:15,currentItem:0,configManager:16,className:1,hidden:2,handleMediaItem:17,addItem:18,handleSubmit:3},null,[-1,-1])}get handleMediaItem(){return this.$$.ctx[17]}get addItem(){return this.$$.ctx[18]}get handleSubmit(){return this.$$.ctx[3]}}function er(u,a,t){const s=u.slice();return s[21]=a[t],s}function pi(u){let a;return{c(){a=H("div"),a.textContent="登录B站账号以获取更多功能",F(a,"class","setting-description")},m(t,s){Q(t,a,s)},p:rt,d(t){t&&X(a)}}}function hi(u){let a,t,s,r,e,n,c=u[3].uname+"",i,o,l,d,f=u[3].level_info.current_level+"",p,h,m,g,y=u[3].mid+"",w;return{c(){a=H("div"),t=H("img"),r=q(),e=H("div"),n=H("div"),i=tt(c),o=q(),l=H("span"),d=tt("LV"),p=tt(f),h=q(),m=H("div"),g=tt("UID: "),w=tt(y),F(t,"class","user-avatar"),vt(t.src,s=u[3].face)||F(t,"src",s),F(t,"alt","头像"),F(l,"class","user-level"),F(n,"class","user-name"),F(m,"class","user-id"),F(e,"class","user-details"),F(a,"class","user-wrapper")},m(v,b){Q(v,a,b),A(a,t),A(a,r),A(a,e),A(e,n),A(n,i),A(n,o),A(n,l),A(l,d),A(l,p),A(e,h),A(e,m),A(m,g),A(m,w)},p(v,b){b&8&&!vt(t.src,s=v[3].face)&&F(t,"src",s),b&8&&c!==(c=v[3].uname+"")&&nt(i,c),b&8&&f!==(f=v[3].level_info.current_level+"")&&nt(p,f),b&8&&y!==(y=v[3].mid+"")&&nt(w,y)},d(v){v&&X(a)}}}function mi(u){let a,t,s;return{c(){a=H("button"),a.textContent="退出",F(a,"class","b3-button b3-button--outline")},m(r,e){Q(r,a,e),t||(s=J(a,"click",u[7]),t=!0)},p:rt,d(r){r&&X(a),t=!1,s()}}}function gi(u){let a,t,s,r,e;return{c(){a=H("button"),t=tt("登录"),F(a,"class","b3-button b3-button--outline"),a.disabled=s=!!u[1]},m(n,c){Q(n,a,c),A(a,t),r||(e=J(a,"click",u[6]),r=!0)},p(n,c){c&2&&s!==(s=!!n[1])&&(a.disabled=s)},d(n){n&&X(a),r=!1,e()}}}function rr(u){let a,t,s,r,e,n,c,i,o;return{c(){a=H("div"),t=H("div"),t.innerHTML='<div class="qrcode-title">哔哩哔哩扫码登录</div> <div class="qrcode-description">打开手机客户端扫描二维码</div>',s=q(),r=H("div"),e=H("img"),c=q(),i=H("div"),o=tt(u[4]),F(t,"class","qrcode-header"),vt(e.src,n=u[1])||F(e,"src",n),F(e,"alt","B站登录二维码"),F(i,"class","scan-status"),it(i,"success",u[2]),F(r,"class","qrcode-container"),F(a,"class","bilibili-qrcode")},m(l,d){Q(l,a,d),A(a,t),A(a,s),A(a,r),A(r,e),A(r,c),A(r,i),A(i,o)},p(l,d){d&2&&!vt(e.src,n=l[1])&&F(e,"src",n),d&16&&nt(o,l[4]),d&4&&it(i,"success",l[2])},d(l){l&&X(a)}}}function nr(u){let a,t=u[21].description+"",s;return{c(){a=H("div"),s=tt(t),F(a,"class","setting-description")},m(r,e){Q(r,a,e),A(a,s)},p(r,e){e&32&&t!==(t=r[21].description+"")&&nt(s,t)},d(r){r&&X(a)}}}function ir(u){let a,t,s,r,e,n,c,i,o,l,d;function f(...g){return u[12](u[21],...g)}function p(g,y){return g[21].key==="speed"?yi:vi}let h=p(u),m=h(u);return{c(){var g,y,w;a=H("div"),t=H("div"),s=H("input"),i=q(),o=H("span"),m.c(),F(s,"type","range"),F(s,"min",r=((g=u[21].slider)==null?void 0:g.min)??0),F(s,"max",e=((y=u[21].slider)==null?void 0:y.max)??100),F(s,"step",n=((w=u[21].slider)==null?void 0:w.step)??1),s.value=c=u[21].value,F(o,"class","slider-value"),F(t,"class","slider-wrapper"),F(a,"class","setting-content")},m(g,y){Q(g,a,y),A(a,t),A(t,s),A(t,i),A(t,o),m.m(o,null),l||(d=J(s,"input",f),l=!0)},p(g,y){var w,v,b;u=g,y&32&&r!==(r=((w=u[21].slider)==null?void 0:w.min)??0)&&F(s,"min",r),y&32&&e!==(e=((v=u[21].slider)==null?void 0:v.max)??100)&&F(s,"max",e),y&32&&n!==(n=((b=u[21].slider)==null?void 0:b.step)??1)&&F(s,"step",n),y&32&&c!==(c=u[21].value)&&(s.value=c),h===(h=p(u))&&m?m.p(u,y):(m.d(1),m=h(u),m&&(m.c(),m.m(o,null)))},d(g){g&&X(a),m.d(),l=!1,d()}}}function vi(u){let a=u[21].value+"",t;return{c(){t=tt(a)},m(s,r){Q(s,t,r)},p(s,r){r&32&&a!==(a=s[21].value+"")&&nt(t,a)},d(s){s&&X(t)}}}function yi(u){let a=u[21].value/100+"",t,s;return{c(){t=tt(a),s=tt("x")},m(r,e){Q(r,t,e),Q(r,s,e)},p(r,e){e&32&&a!==(a=r[21].value/100+"")&&nt(t,a)},d(r){r&&(X(t),X(s))}}}function ar(u){let a,t,s,r,e,n,c;function i(...o){return u[13](u[21],...o)}return{c(){a=H("label"),t=H("input"),r=q(),e=H("span"),F(t,"type","checkbox"),t.checked=s=u[21].value,F(e,"class","checkbox-custom"),F(a,"class","checkbox-wrapper")},m(o,l){Q(o,a,l),A(a,t),A(a,r),A(a,e),n||(c=J(t,"change",i),n=!0)},p(o,l){u=o,l&32&&s!==(s=u[21].value)&&(t.checked=s)},d(o){o&&X(a),n=!1,c()}}}function or(u,a){let t,s,r,e=a[21].title+"",n,c,i,o,l,d,f=a[21].description&&nr(a),p=a[21].type==="slider"&&ir(a),h=a[21].type==="checkbox"&&ar(a);return{key:u,first:null,c(){t=H("div"),s=H("div"),r=H("div"),n=tt(e),c=q(),f&&f.c(),i=q(),p&&p.c(),o=q(),l=H("div"),h&&h.c(),d=q(),F(r,"class","setting-title"),F(s,"class","setting-info"),F(l,"class","setting-control"),F(t,"class","setting-item"),this.first=t},m(m,g){Q(m,t,g),A(t,s),A(s,r),A(r,n),A(s,c),f&&f.m(s,null),A(s,i),p&&p.m(s,null),A(t,o),A(t,l),h&&h.m(l,null),A(t,d)},p(m,g){a=m,g&32&&e!==(e=a[21].title+"")&&nt(n,e),a[21].description?f?f.p(a,g):(f=nr(a),f.c(),f.m(s,i)):f&&(f.d(1),f=null),a[21].type==="slider"?p?p.p(a,g):(p=ir(a),p.c(),p.m(s,null)):p&&(p.d(1),p=null),a[21].type==="checkbox"?h?h.p(a,g):(h=ar(a),h.c(),h.m(l,null)):h&&(h.d(1),h=null)},d(m){m&&X(t),f&&f.d(),p&&p.d(),h&&h.d()}}}function bi(u){let a,t,s,r,e,n,c,i,o,l,d,f,p,h,m,g,y,w,v,b=[],k=new Map,j,x;function C(B,N){return B[2]&&B[3]?hi:pi}let _=C(u),P=_(u);function S(B,N){return B[2]?mi:gi}let I=S(u),E=I(u),T=u[1]&&!u[2]&&rr(u),M=It(u[5]);const $=B=>B[21].key;for(let B=0;B<M.length;B+=1){let N=er(u,M,B),L=$(N);k.set(L,b[B]=or(L,N))}return{c(){a=H("div"),t=H("div"),s=H("h3"),s.textContent="设置",r=q(),e=H("div"),n=H("button"),n.innerHTML="<span>重置</span>",c=q(),i=H("button"),i.innerHTML="<span>保存</span>",o=q(),l=H("div"),d=H("div"),f=H("div"),p=H("div"),p.textContent="B站账号",h=q(),m=H("div"),P.c(),g=q(),y=H("div"),E.c(),w=q(),T&&T.c(),v=q();for(let B=0;B<b.length;B+=1)b[B].c();F(n,"class","btn"),F(i,"class","btn primary"),F(e,"class","header-actions"),F(t,"class","settings-header"),F(p,"class","setting-title"),F(m,"class","setting-content"),F(f,"class","setting-info"),F(y,"class","setting-control"),F(d,"class","setting-item"),F(l,"class","setting-panel"),F(a,"class","settings"),F(a,"data-name",u[0])},m(B,N){Q(B,a,N),A(a,t),A(t,s),A(t,r),A(t,e),A(e,n),A(e,c),A(e,i),A(a,o),A(a,l),A(l,d),A(d,f),A(f,p),A(f,h),A(f,m),P.m(m,null),A(d,g),A(d,y),E.m(y,null),A(l,w),T&&T.m(l,null),A(l,v);for(let L=0;L<b.length;L+=1)b[L]&&b[L].m(l,null);j||(x=[J(n,"click",u[9]),J(i,"click",u[8])],j=!0)},p(B,[N]){_===(_=C(B))&&P?P.p(B,N):(P.d(1),P=_(B),P&&(P.c(),P.m(m,null))),I===(I=S(B))&&E?E.p(B,N):(E.d(1),E=I(B),E&&(E.c(),E.m(y,null))),B[1]&&!B[2]?T?T.p(B,N):(T=rr(B),T.c(),T.m(l,v)):T&&(T.d(1),T=null),N&1056&&(M=It(B[5]),b=Be(b,N,$,1,B,M,k,l,Pe,or,null,er)),N&1&&F(a,"data-name",B[0])},i:rt,o:rt,d(B){B&&X(a),P.d(),E.d(),T&&T.d();for(let N=0;N<b.length;N+=1)b[N].d();j=!1,at(x)}}}function wi(u,a,t){let{group:s}=a,{configManager:r}=a,e="",n="",c,i=!1,o=null,l="等待扫码...";jt(()=>()=>{c&&clearInterval(c)});async function d(){try{const x=await yt.getLoginQRCode();t(1,e=x.qrcodeData),n=x.qrcode_key,h()}catch(x){V.showMessage(x.message||"获取二维码失败")}}async function f(x){t(2,i=!0),x.timestamp,t(3,o=x.userInfo);const C=await r.getConfig();C.bilibiliLogin={url:x.url,refresh_token:x.refresh_token,timestamp:x.timestamp,userInfo:x.userInfo},await r.save(),V.showMessage("登录成功")}async function p(){t(2,i=!1),t(3,o=null);const x=await r.getConfig();delete x.bilibiliLogin,await r.save(),V.showMessage("已退出登录")}function h(){c&&clearInterval(c),c=window.setInterval(async()=>{try{const x=await yt.checkQRCodeStatus(n);switch(x.code){case 0:clearInterval(c),t(4,l="登录成功"),await f(x);break;case 86038:clearInterval(c),t(4,l="二维码已失效，请重新获取"),t(1,e="");break;case 86090:t(4,l="二维码已扫描，请在手机上确认登录");break;case 86101:t(4,l="等待扫码...");break;default:t(4,l=x.message||"未知状态")}}catch{clearInterval(c),V.showMessage("检查扫码状态失败")}},3e3)}const m=[{key:"volume",value:70,type:"slider",title:"音量",description:"默认音量大小",slider:{min:0,max:100,step:1}},{key:"speed",value:100,type:"slider",title:"播放速度",description:"默认播放速度",slider:{min:25,max:200,step:25}},{key:"loopCount",value:3,type:"slider",title:"循环次数",description:"片段循环播放次数",slider:{min:1,max:10,step:1}},{key:"hotkey",value:!0,type:"checkbox",title:"快捷键",description:"启用播放器快捷键"},{key:"loop",value:!1,type:"checkbox",title:"循环播放",description:"启用视频循环播放"}];let g=[...m];jt(async()=>{const x=await r.load();x.bilibiliLogin&&(t(2,i=!0),x.bilibiliLogin.timestamp,t(3,o=x.bilibiliLogin.userInfo||null)),t(5,g=g.map(C=>({...C,value:x.settings[C.key]??C.value})))});const y=De();async function w(){const x=g.reduce((C,_)=>({...C,[_.key]:_.value}),{});await r.updateSettings(x),y("changed",{settings:x}),V.showMessage("设置已保存")}function v(){t(5,g=m.map(x=>({...x}))),y("changed",{settings:g.reduce((x,C)=>({...x,[C.key]:C.value}),{})}),V.showMessage("设置已重置")}function b(x,C){const _=x.target;let P=_.type==="checkbox"?_.checked:_.value;C.type==="slider"&&(P=Number(P),C.value=P,t(5,g));const S=g.findIndex(I=>I.key===C.key);S!==-1&&(t(5,g[S].value=P,g),t(5,g))}const k=(x,C)=>b(C,x),j=(x,C)=>b(C,x);return u.$$set=x=>{"group"in x&&t(0,s=x.group),"configManager"in x&&t(11,r=x.configManager)},[s,e,i,o,l,g,d,p,w,v,b,r,k,j]}class xi extends Xt{constructor(a){super(),Gt(this,a,wi,bi,Kt,{group:0,configManager:11})}}function sr(u){let a;return{c(){a=Ce("path"),F(a,"d","M608.256 321.609143q-41.106286-17.773714-86.308571-17.773714-45.129143 0-86.162286 17.627428-35.401143 15.213714-63.341714 41.618286v-9.947429q0-14.043429-10.020572-23.990857-9.874286-9.801143-23.771428-9.801143t-23.844572 10.020572q-10.020571 9.947429-10.020571 23.771428V470.308571q0 14.116571 10.020571 24.064 9.947429 9.801143 23.844572 9.801143h117.174857q14.043429 0 23.990857-10.020571 9.801143-9.947429 9.801143-23.844572 0-13.824-10.020572-23.844571-9.947429-9.947429-23.771428-9.947429h-43.885715q19.602286-25.746286 48.859429-40.228571 33.645714-16.603429 71.460571-13.750857 50.980571 3.876571 87.478858 40.521143 36.571429 36.571429 40.082285 87.478857 4.242286 60.416-37.010285 104.448-40.96 43.885714-100.937143 43.885714-43.739429 0-79.36-25.161143-34.742857-24.576-49.883429-64.365714-4.388571-11.702857-14.409143-18.797714-10.093714-7.094857-22.308571-7.094857-20.187429 0-32.182857 16.530285-11.922286 16.676571-4.973715 35.401143 24.137143 65.097143 81.334858 104.155429 58.733714 40.155429 130.413714 37.156571 84.260571-33.364571 144.457143-63.561143 60.196571-60.050286 63.634285-144.091428 1.828571-45.494857-14.482285-87.332572-15.725714-40.374857-45.933715-71.68-30.208-31.232-69.924571-48.420571z")},m(t,s){Q(t,a,s)},d(t){t&&X(a)}}}function ki(u){let a,t,s,r,e,n,c,i,o,l,d,f,p=(u[0]||"未播放")+"",h,m,g,y,w,v,b,k,j=!u[1]&&sr();return{c(){a=H("div"),t=H("div"),s=H("button"),s.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M853.333333 170.666667a73.142857 73.142857 0 0 1 73.142857 73.142857v536.380952a73.142857 73.142857 0 0 1-73.142857 73.142857H170.666667a73.142857 73.142857 0 0 1-73.142857-73.142857V243.809524a73.142857 73.142857 0 0 1 73.142857-73.142857h682.666666z m0 73.142857H170.666667v536.380952h682.666666V243.809524z m-375.856762 168.057905l120.685715 120.685714 51.687619-51.712 172.422095 172.373333-51.712 51.736381-120.685714-120.685714-51.736381 51.736381-120.685715-120.685714-224.109714 224.109714-51.712-51.687619 275.846095-275.870476zM731.428571 292.571429a48.761905 48.761905 0 1 1 0 97.523809 48.761905 48.761905 0 0 1 0-97.523809z"></path></svg>',r=q(),e=H("button"),e.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M511.292952 121.904762c80.408381 0 155.087238 24.405333 217.136762 66.218667l-49.737143 49.785904a318.756571 318.756571 0 0 0-167.399619-47.152762C334.189714 190.756571 190.610286 334.57981 190.610286 512s143.60381 321.243429 320.682666 321.243429c177.103238 0 320.682667-143.823238 320.682667-321.243429 0-49.127619-11.02019-95.695238-30.72-137.337905l51.102476-51.078095A388.87619 388.87619 0 0 1 900.681143 512c0 215.454476-174.32381 390.095238-389.36381 390.095238C296.228571 902.095238 121.904762 727.454476 121.904762 512S296.228571 121.904762 511.292952 121.904762z m0 137.679238c42.179048 0 81.968762 10.386286 116.906667 28.769524l-51.955809 51.931428a182.54019 182.54019 0 0 0-64.950858-11.849142c-101.180952 0-183.247238 82.16381-183.247238 183.56419 0 101.376 82.041905 183.588571 183.247238 183.588571s183.247238-82.212571 183.247238-183.588571a185.295238 185.295238 0 0 0-2.194285-28.42819l56.344381-56.32c9.435429 26.477714 14.57981 55.003429 14.579809 84.74819 0 139.410286-112.810667 252.416-251.977143 252.416-139.142095 0-251.952762-113.005714-251.952762-252.416s112.810667-252.416 251.952762-252.416zM853.577143 143.433143L902.095238 192.146286 566.613333 527.676952l-51.102476 2.681905 2.535619-51.297524 335.481905-335.62819z"></path></svg>',n=q(),c=H("button"),i=Ce("svg"),o=Ce("path"),j&&j.c(),l=q(),d=H("div"),f=H("span"),h=tt(p),m=q(),g=H("div"),y=H("button"),y.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M414.47619 121.904762a73.142857 73.142857 0 0 1 73.142858 73.142857v219.428571a73.142857 73.142857 0 0 1-73.142858 73.142858H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142858V195.047619a73.142857 73.142857 0 0 1 73.142857-73.142857h219.428571zM195.047619 195.047619v219.428571h219.428571V195.047619H195.047619z m219.428571 341.333333a73.142857 73.142857 0 0 1 73.142858 73.142858v219.428571a73.142857 73.142857 0 0 1-73.142858 73.142857H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142857v-219.428571a73.142857 73.142857 0 0 1 73.142857-73.142858h219.428571z m-219.428571 73.142858v219.428571h219.428571v-219.428571H195.047619zM536.380952 182.857143v73.142857h353.52381v-73.142857H536.380952zM536.380952 609.52381v73.142857h353.52381v-73.142857H536.380952z m0-268.190477v73.142857h353.52381v-73.142857H536.380952z m0 426.666667v73.142857h353.52381v-73.142857H536.380952z"></path></svg>',w=q(),v=H("button"),v.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M448.487619 97.52381l130.096762 0.170666c40.399238 0.073143 73.142857 32.792381 73.191619 73.216l0.048762 21.211429a345.283048 345.283048 0 0 1 71.143619 39.960381l17.408-10.044953a73.313524 73.313524 0 0 1 99.961905 26.819048l65.219047 112.566857a73.313524 73.313524 0 0 1-22.893714 97.816381l-3.974095 2.438095-17.481143 10.093715a341.479619 341.479619 0 0 1-1.292191 83.968l12.361143 7.168a73.313524 73.313524 0 0 1 28.867048 96.329142l-2.023619 3.803429-61.098667 105.813333a73.313524 73.313524 0 0 1-96.329143 28.867048l-3.803428-2.048-16.896-9.752381a341.918476 341.918476 0 0 1-68.291048 38.083048l0.024381 29.062095a73.313524 73.313524 0 0 1-68.754286 73.264762l-4.632381 0.146285-130.121142-0.170666a73.313524 73.313524 0 0 1-73.191619-73.216l-0.048762-35.035429a346.599619 346.599619 0 0 1-57.368381-34.035809l-31.158857 17.944381a73.313524 73.313524 0 0 1-99.986286-26.819048l-65.219048-112.566857a73.313524 73.313524 0 0 1 22.918095-97.816381l3.949715-2.438095 31.719619-18.285715c-2.438095-23.161905-2.56-46.665143-0.219429-70.119619l-35.206095-20.333714a73.313524 73.313524 0 0 1-28.891429-96.329143l2.048-3.803428 61.098667-105.813334a73.313524 73.313524 0 0 1 96.329143-28.867047l3.803429 2.048 30.72 17.724952a341.284571 341.284571 0 0 1 64.609523-39.716571l-0.048762-27.89181a73.313524 73.313524 0 0 1 68.754286-73.264762L448.487619 97.52381z m-0.097524 73.313523l0.073143 74.48381-42.130286 19.846095c-18.041905 8.46019-35.05981 18.919619-50.761142 31.158857l-38.936381 30.403048-71.655619-41.398857-1.852953-1.024-61.074286 105.813333 76.239239 44.007619-4.729905 47.104a268.434286 268.434286 0 0 0 0.170666 55.100952l5.022477 47.445334-73.069715 42.081524 65.194667 112.566857 72.557714-41.740191 38.473143 28.184381a272.579048 272.579048 0 0 0 45.226667 26.819048l42.057143 19.772952 0.146285 81.529905 130.072381 0.170667-0.073143-78.019048 45.202286-18.822095a268.629333 268.629333 0 0 0 53.638095-29.915429l38.448762-27.648 57.904762 33.426286 61.049905-105.813333-55.100952-31.890286 6.826666-48.88381a268.190476 268.190476 0 0 0 1.024-65.950476l-5.12-47.494095 58.928762-34.011429-65.219047-112.566857L718.262857 319.390476l-38.497524-28.086857a272.62781 272.62781 0 0 0-56.051809-31.50019l-45.104762-18.724572-0.121905-70.070857-130.096762-0.170667z m145.895619 210.407619a146.773333 146.773333 0 0 1 53.686857 200.362667 146.407619 146.407619 0 0 1-200.167619 53.638095 146.773333 146.773333 0 0 1-53.662476-200.362666 146.407619 146.407619 0 0 1 200.167619-53.638096z m-136.655238 90.258286a73.48419 73.48419 0 0 0 26.86781 100.278857 73.118476 73.118476 0 0 0 99.961904-26.770285c19.529143-33.865143 9.020952-76.824381-23.186285-98.03581l-3.657143-2.267429-3.803429-2.048a73.118476 73.118476 0 0 0-96.182857 28.842667z"></path></svg>',F(s,"class","control-btn"),F(s,"title","截图"),F(e,"class","control-btn"),F(e,"title","添加时间戳"),F(o,"d","M1020.562286 846.555429q0 43.885714-43.885715 43.885714h-50.029714v85.284571q0 18.212571-12.873143 31.085715t-31.012571 12.873142q-43.885714 0-43.885714-43.885714v-85.357714H140.726857q-43.885714 0-43.885714-43.885714V215.04H45.348571q-43.885714 0-43.885714-43.885714t43.885714-43.885715h51.565715V48.493714q0-43.885714 43.885714-43.885714t43.885714 43.885714V127.268571h698.148572q18.139429 0 31.012571 12.873143 12.8 12.873143 12.8 31.012572v631.588571h50.102857q43.885714 0 43.885715 43.812572z m-181.686857-43.885715V215.04H184.612571v587.702857h654.262858z"),F(i,"viewBox","0 0 1024 1024"),F(i,"class","icon"),F(c,"class","control-btn"),F(c,"title","循环片段"),F(t,"class","left-controls"),F(f,"class","media-title"),F(d,"class","title-area"),F(y,"class","control-btn"),F(y,"title","播放列表"),F(v,"class","control-btn"),F(v,"title","设置"),F(g,"class","right-controls"),F(a,"class","control-bar")},m(x,C){Q(x,a,C),A(a,t),A(t,s),A(t,r),A(t,e),A(t,n),A(t,c),A(c,i),A(i,o),j&&j.m(i,null),A(a,l),A(a,d),A(d,f),A(f,h),A(a,m),A(a,g),A(g,y),A(g,w),A(g,v),b||(k=[J(s,"click",u[2]),J(e,"click",u[3]),J(c,"click",u[4]),J(y,"click",u[5]),J(v,"click",u[6])],b=!0)},p(x,[C]){x[1]?j&&(j.d(1),j=null):j||(j=sr(),j.c(),j.m(i,null)),C&1&&p!==(p=(x[0]||"未播放")+"")&&nt(h,p)},i:rt,o:rt,d(x){x&&X(a),j&&j.d(),b=!1,at(k)}}}function Ei(u,a,t){const s=De();let{title:r=null}=a,{loopStartTime:e=null}=a;function n(){if(!r){V.showMessage("请先播放媒体");return}s("screenshot")}function c(){if(!r){V.showMessage("请先播放媒体");return}s("timestamp")}function i(){if(!r){V.showMessage("请先播放媒体");return}e===null?(s("loopSegment",{action:"start"}),V.showMessage("已记录循环片段开始时间")):(s("loopSegment",{action:"end"}),V.showMessage("已记录循环片段结束时间"))}function o(){s("playlist")}function l(){s("settings")}return u.$$set=d=>{"title"in d&&t(0,r=d.title),"loopStartTime"in d&&t(1,e=d.loopStartTime)},[r,e,n,c,i,o,l]}class Ci extends Xt{constructor(a){super(),Gt(this,a,Ei,ki,Kt,{title:0,loopStartTime:1})}}class Ti{constructor(a,t){et(this,"configManager");et(this,"playlist");et(this,"isListening",!1);et(this,"openTabCallback");et(this,"MEDIA_EXTENSIONS",[".mp4",".webm",".ogg",".mov",".m4v",".mp3",".wav",".aac",".m4a"]);et(this,"clickHandler",null);this.configManager=a,this.openTabCallback=t}startListening(){this.isListening||(this.clickHandler=async a=>{const t=a.target;if(!t.matches('span[data-type="a"]'))return;const s=t.getAttribute("data-href");s&&this.isSupportedLink(s)&&(a.preventDefault(),a.stopPropagation(),await this.handleMediaLink(s))},document.addEventListener("click",this.clickHandler,!0),this.isListening=!0)}isSupportedLink(a){try{const t=new URL(a),s=t.pathname.toLowerCase(),r=a.toLowerCase();if(t.hostname.includes("bilibili.com"))return!0;const e=["mp3","mp4","webm","ogg","wav","m4v","mov","aac","m4a"];if(e.some(i=>r.includes(i)))return!0;const n=this.MEDIA_EXTENSIONS.some(i=>s.endsWith(i)),c=t.protocol==="file:"&&(e.some(i=>r.includes(i))||this.MEDIA_EXTENSIONS.some(i=>s.endsWith(i)));return n||c}catch{const s=a.toLowerCase();return this.MEDIA_EXTENSIONS.some(r=>s.includes(r))||s.includes("bilibili.com")}}async handleMediaLink(a){try{this.openTabCallback(),await new Promise(t=>setTimeout(t,100)),this.playlist&&await this.playlist.handleSubmit(a)}catch(t){console.error("[LinkHandler] 处理链接失败:",t),V.showMessage(t.message||"播放失败，请重试")}}setPlaylist(a){this.playlist=a}stopListening(){this.clickHandler&&document.removeEventListener("click",this.clickHandler,!0),this.isListening=!1}}function lr(u){let a,t;return a=new xi({props:{group:"mediaPlayer",configManager:u[1]}}),a.$on("changed",u[10]),{c(){ie(a.$$.fragment)},m(s,r){Ut(a,s,r),t=!0},p(s,r){const e={};r&2&&(e.configManager=s[1]),a.$set(e)},i(s){t||(pt(a.$$.fragment,s),t=!0)},o(s){Tt(a.$$.fragment,s),t=!1},d(s){Yt(a,s)}}}function Si(u){var w;let a,t,s,r,e,n,c,i,o,l,d,f,p,h,m={app:u[0],config:u[8]};r=new un({props:m}),u[17](r),c=new Ci({props:{title:(w=u[7])==null?void 0:w.title,loopStartTime:u[9]}}),c.$on("screenshot",u[13]),c.$on("timestamp",u[13]),c.$on("loopSegment",u[13]),c.$on("playlist",u[13]),c.$on("settings",u[13]);let g={configManager:u[1],currentItem:u[7],className:"playlist-container",hidden:!u[5]};l=new fi({props:g}),u[18](l),l.$on("select",u[14]),l.$on("play",u[15]);let y=u[6]&&lr(u);return{c(){a=H("div"),t=H("div"),s=H("div"),ie(r.$$.fragment),e=q(),n=H("div"),ie(c.$$.fragment),i=q(),o=H("div"),ie(l.$$.fragment),d=q(),y&&y.c(),F(n,"class","control-bar"),it(n,"hidden",!u[4]),F(s,"class","player-area"),F(o,"class","sidebar"),it(o,"show",u[5]||u[6]),F(t,"class","content-area"),it(t,"with-sidebar",u[5]||u[6]),F(a,"class","media-player-tab")},m(v,b){Q(v,a,b),A(a,t),A(t,s),Ut(r,s,null),A(s,e),A(s,n),Ut(c,n,null),A(t,i),A(t,o),Ut(l,o,null),A(o,d),y&&y.m(o,null),f=!0,p||(h=[J(a,"mousemove",u[11]),J(a,"mouseleave",u[12])],p=!0)},p(v,[b]){var C;const k={};b&1&&(k.app=v[0]),b&256&&(k.config=v[8]),r.$set(k);const j={};b&128&&(j.title=(C=v[7])==null?void 0:C.title),b&512&&(j.loopStartTime=v[9]),c.$set(j),(!f||b&16)&&it(n,"hidden",!v[4]);const x={};b&2&&(x.configManager=v[1]),b&128&&(x.currentItem=v[7]),b&32&&(x.hidden=!v[5]),l.$set(x),v[6]?y?(y.p(v,b),b&64&&pt(y,1)):(y=lr(v),y.c(),pt(y,1),y.m(o,null)):y&&(en(),Tt(y,1,1,()=>{y=null}),rn()),(!f||b&96)&&it(o,"show",v[5]||v[6]),(!f||b&96)&&it(t,"with-sidebar",v[5]||v[6])},i(v){f||(pt(r.$$.fragment,v),pt(c.$$.fragment,v),pt(l.$$.fragment,v),pt(y),f=!0)},o(v){Tt(r.$$.fragment,v),Tt(c.$$.fragment,v),Tt(l.$$.fragment,v),Tt(y),f=!1},d(v){v&&X(a),u[17](null),Yt(r),Yt(c),u[18](null),Yt(l),y&&y.d(),p=!1,at(h)}}}function _i(){var t;const u=window.getSelection();if(!u||!u.focusNode)throw new Error("未找到光标位置");let a=u.focusNode;for(;a&&!((t=a.dataset)!=null&&t.nodeId);)a=a.parentElement;if(!a||!a.dataset.nodeId)throw new Error("未找到目标块");return a.dataset.nodeId}function Ee(u,a=!1){if(isNaN(u))return"0:00";const t=a?Math.round(u):Number(u.toFixed(1)),s=Math.floor(t/3600),r=Math.floor(t%3600/60),e=a?Math.floor(t%60):Number((t%60).toFixed(1));return s>0?`${s}:${r.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`:`${r}:${e.toString().padStart(2,"0")}`}function ji(u,a,t){let{app:s}=a,{configManager:r}=a,{linkHandler:e}=a,n=!0,c,i=!1,o=!1,l=null,d,f,p=null,h;globalThis.Lute.New;async function m(S){try{const I=_i();if(!(await fetch("/api/block/insertBlock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:S,dataType:"markdown",previousID:I})})).ok)throw new Error("插入块失败");V.showMessage("链接已插入")}catch(I){console.error("[MediaPlayerTab] 插入块失败:",I),await navigator.clipboard.writeText(S),V.showMessage("插入失败，已复制到剪贴板")}}jt(async()=>{const S=await r.load();t(8,f=S.settings),f.loopCount||t(8,f.loopCount=3,f)}),fr(()=>{e&&e.setPlaylist(null)});function g(S){const{settings:I}=S.detail;t(8,f=I),d&&d.updateConfig(I)}function y(){t(4,n=!0),clearTimeout(c),c=window.setTimeout(()=>{t(4,n=!1)},3e3)}function w(){clearTimeout(c),t(4,n=!1)}function v(S,I){if(!d)return null;try{const E=I.startTime??d.getCurrentTime(),T=I.endTime??(I.isLoop?E+3:void 0),M=S.originalUrl||S.url;if(!M)throw new Error("无法获取媒体链接");const $=new URL(M);if($.searchParams.delete("t"),I.isLoop&&T){$.searchParams.set("t",`${E.toFixed(1)}-${T.toFixed(1)}`);const B=Ee(E,!0),N=Ee(T,!0);return`- [${B}-${N}](${$.toString()})`}else return $.searchParams.set("t",E.toFixed(1)),`- [${Ee(E,!0)}](${$.toString()})`}catch(E){return console.error("[MediaPlayerTab] 生成链接失败:",E),V.showMessage("生成链接失败"),null}}async function b(){if(!d)return null;try{const S=await d.getScreenshotDataURL();return S?await(await fetch(S)).blob():null}catch(S){return console.error("[MediaPlayerTab] 截图失败:",S),null}}async function k(S){switch(S.type){case"screenshot":if(d&&l)try{const E=await b();if(E){const T=new Date().getTime(),M=`${l.title||"screenshot"}_${T}.png`,$=new FormData;$.append("file[]",E,M);const B=await fetch("/api/asset/upload",{method:"POST",body:$});if(!B.ok)throw new Error("上传图片失败");const N=await B.json();if(N.code!==0)throw new Error(N.msg||"上传图片失败");const L=N.data.succMap[M],z=`![${M}](${L})`;await m(z),V.showMessage("截图已插入")}else V.showMessage("截图失败，请确保视频正在播放")}catch(E){console.error("[MediaPlayerTab] 截图失败:",E),V.showMessage("截图失败，请重试")}else V.showMessage("请先播放视频");break;case"timestamp":if(d&&l){const E=v(l,{isLoop:!1,count:0});E&&await m(E)}else V.showMessage("请先播放媒体");break;case"loopSegment":if(!d||!l)return;const I=d.getCurrentTime();if(p===null)t(9,p=I),V.showMessage("已记录循环片段开始时间");else{const E=v(l,{isLoop:!0,startTime:p,endTime:I,count:f.loopCount});E&&await m(E),t(9,p=null)}break;case"playlist":t(5,i=!i),i&&t(6,o=!1);break;case"settings":t(6,o=!o),o&&t(5,i=!1);break}}function j(S){t(7,l=S.detail)}async function x(S){t(7,l={...l,title:S.detail.title,url:S.detail.url,originalUrl:S.detail.originalUrl||S.detail.url}),d&&d.play(S.detail.url,S.detail)}async function C(S){const{type:I,url:E,options:T}=S.detail;if(I==="bilibili"&&(l!=null&&l.bvid)&&(l!=null&&l.cid))try{console.log("[播放器] 重新获取B站播放流");const M=await r.getConfig(),$=await yt.getProcessedVideoStream(l.bvid,l.cid,0,M,l.page);d&&d.play($.video.url,{type:"bilibili",audioUrl:$.audio.url,headers:$.headers,title:l.title})}catch(M){console.error("[播放器] 重新获取播放流失败:",M),V.showMessage("视频播放失败，请稍后重试")}}jt(()=>{const S=document.querySelector(".artplayer-app");return S&&S.addEventListener("streamError",C),()=>{S&&S.removeEventListener("streamError",C)}});function _(S){Mt[S?"unshift":"push"](()=>{d=S,t(2,d)})}function P(S){Mt[S?"unshift":"push"](()=>{h=S,t(3,h)})}return u.$$set=S=>{"app"in S&&t(0,s=S.app),"configManager"in S&&t(1,r=S.configManager),"linkHandler"in S&&t(16,e=S.linkHandler)},u.$$.update=()=>{u.$$.dirty&4&&d&&setTimeout(()=>{console.log("[MediaPlayerTab] 播放器就绪")},100),u.$$.dirty&65544&&h&&e&&(console.log("[MediaPlayerTab] 播放列表就绪，更新 LinkHandler"),e.setPlaylist(h))},[s,r,d,h,n,i,o,l,f,p,g,y,w,k,j,x,e,_,P]}class Mi extends Xt{constructor(a){super(),Gt(this,a,ji,Si,Kt,{app:0,configManager:1,linkHandler:16})}}class Ii{constructor(a){et(this,"plugin");et(this,"config");this.plugin=a,this.config=this.getDefaultConfig()}getDefaultConfig(){return{playlists:[{id:"default",name:"默认列表",items:[],isFixed:!0},{id:"favorites",name:"收藏夹",items:[],isFixed:!0}],settings:{volume:70,speed:100,hotkey:!0,loop:!1}}}async load(){try{const a=await this.plugin.loadData("config.json");a&&(this.config={...this.config,...a})}catch(a){console.error("Failed to load config:",a)}return this.config}async save(){try{await this.plugin.saveData("config.json",this.config)}catch(a){console.error("Failed to save config:",a)}}async updatePlaylists(a){this.config.playlists=a,await this.save()}async updateSettings(a){this.config.settings=a,await this.save()}getConfig(){return this.config}}class Fi extends V.Plugin{constructor(){super(...arguments);et(this,"configManager");et(this,"linkHandler");et(this,"mediaPlayerTab");et(this,"activeContainer",null);et(this,"TAB_TYPE","custom_tab");et(this,"isMobile")}async onload(){console.log("思源媒体播放器加载");const t=V.getFrontend();this.isMobile=t==="mobile"||t==="browser-mobile",this.addIcons(`<symbol id="iconMediaPlayer" viewBox="0 0 1024 1024">
            <path d="M513.792 514.5088m-457.0112 0a457.0112 457.0112 0 1 0 914.0224 0 457.0112 457.0112 0 1 0-914.0224 0Z" fill="#8C7BFD"></path>
            <path d="M440.6272 732.16c-17.6128 0-35.2768-4.6592-51.3024-13.9264-32.1536-18.5344-51.3024-51.7632-51.3024-88.8832V399.6672c0-37.12 19.2-70.3488 51.3024-88.8832 32.1536-18.5856 70.5024-18.5344 102.656 0l198.912 114.8416c32.1536 18.5344 51.3024 51.7632 51.3024 88.8832s-19.2 70.3488-51.3024 88.8832l-198.912 114.8416c-16.0768 9.2672-33.7408 13.9264-51.3536 13.9264z m0.0512-332.6976c-0.1024 0-0.3072 0.1024-0.4096 0.2048l0.1024 229.6832c0 0.1536 0.256 0.3072 0.4096 0.3072l198.8608-114.944c0.1536-0.0512 0.1536-0.3584 0.1024-0.512l-0.1024 0.1024-198.8608-114.8416h-0.1024z" fill="#FFE37B"></path>
        </symbol>`),this.configManager=new Ii(this),await this.configManager.load(),this.addTopBar({icon:"iconMediaPlayer",title:this.i18n.name,position:"right",callback:()=>{this.openMediaPlayerTab()}}),this.registerHotkeys(),this.linkHandler=new Ti(this.configManager,()=>this.openMediaPlayerTab()),this.linkHandler.startListening()}onLayoutReady(){console.log("思源媒体播放器布局加载完成")}onunload(){var t;console.log("思源媒体播放器卸载");try{if((t=this.mediaPlayerTab)!=null&&t.player){if(typeof this.mediaPlayerTab.player.pause=="function"&&this.mediaPlayerTab.player.pause(),this.mediaPlayerTab.player.plugins){const s=this.mediaPlayerTab.player.plugins.bilibili;s&&typeof s.destroy=="function"&&s.destroy()}this.mediaPlayerTab.player.destroy(!0)}this.linkHandler&&this.linkHandler.stopListening(),this.mediaPlayerTab=null,this.activeContainer=null}catch(s){console.error("插件卸载时清理播放器失败:",s)}}registerHotkeys(){this.addCommand({langKey:"screenshot",langText:this.i18n.screenshot.text,hotkey:"",callback:()=>{this.handleHotkeyAction("screenshot")}}),this.addCommand({langKey:"timestamp",langText:this.i18n.timestamp.text,hotkey:"",callback:()=>{this.handleHotkeyAction("timestamp")}}),this.addCommand({langKey:"loopSegment",langText:this.i18n.loopSegment.text,hotkey:"",callback:()=>{this.handleHotkeyAction("loopSegment")}})}async handleHotkeyAction(t){if(!this.activeContainer){V.showMessage(this.i18n.openPlayer);return}const s=this.activeContainer.querySelector(".control-bar");if(!s){V.showMessage(this.i18n.playerNotReady);return}const r={screenshot:this.i18n.screenshot.name,timestamp:this.i18n.timestamp.name,loopSegment:this.i18n.loopSegment.name}[t],e=s.querySelector(`button[title="${r}"]`);e instanceof HTMLElement?e.click():(console.warn(`找不到标题为 "${r}" 的按钮`),V.showMessage(this.i18n.buttonNotFound))}openMediaPlayerTab(){const t=this;this.addTab({type:this.TAB_TYPE,init(){const s=document.createElement("div");s.className="media-player-container",t.activeContainer=s,t.mediaPlayerTab=new Mi({target:s,props:{app:t.app,configManager:t.configManager,linkHandler:t.linkHandler}}),this.element.appendChild(s)},destroy(){var s,r;console.log("Destroying media player tab");try{if((s=t.mediaPlayerTab)!=null&&s.player){if(typeof t.mediaPlayerTab.player.pause=="function"&&t.mediaPlayerTab.player.pause(),t.mediaPlayerTab.player.plugins){const e=t.mediaPlayerTab.player.plugins.bilibili;e&&typeof e.destroy=="function"&&e.destroy()}t.mediaPlayerTab.player.destroy(!0)}(r=t.mediaPlayerTab)!=null&&r.$destroy&&t.mediaPlayerTab.$destroy()}catch(e){console.error("销毁播放器失败:",e)}t.mediaPlayerTab=null,t.activeContainer=null}}),V.openTab({app:this.app,custom:{icon:"iconMediaPlayer",title:this.i18n.name,id:this.name+this.TAB_TYPE}})}}module.exports=Fi;
