"use strict";var Gr=Object.defineProperty;var Qr=(u,a,t)=>a in u?Gr(u,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[a]=t;var et=(u,a,t)=>Qr(u,typeof a!="symbol"?a+"":a,t);const q=require("siyuan");function nt(){}function hr(u){return u()}function Oe(){return Object.create(null)}function st(u){u.forEach(hr)}function mr(u){return typeof u=="function"}function Gt(u,a){return u!=u?a==a:u!==a||u&&typeof u=="object"||typeof u=="function"}let ee;function xt(u,a){return u===a?!0:(ee||(ee=document.createElement("a")),ee.href=a,u===ee.href)}function Xr(u){return Object.keys(u).length===0}function F(u,a){u.appendChild(a)}function G(u,a,t){u.insertBefore(a,t||null)}function W(u){u.parentNode&&u.parentNode.removeChild(u)}function z(u){return document.createElement(u)}function xe(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function tt(u){return document.createTextNode(u)}function V(){return tt(" ")}function ke(){return tt("")}function Z(u,a,t,o){return u.addEventListener(a,t,o),()=>u.removeEventListener(a,t,o)}function gr(u){return function(a){return a.preventDefault(),u.call(this,a)}}function S(u,a,t){t==null?u.removeAttribute(a):u.getAttribute(a)!==t&&u.setAttribute(a,t)}function Jr(u){return Array.from(u.childNodes)}function at(u,a){a=""+a,u.data!==a&&(u.data=a)}function Ue(u,a){u.value=a??""}function ut(u,a,t){u.classList.toggle(a,!!t)}function Zr(u,a,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(u,{detail:a,bubbles:t,cancelable:o})}let Vt;function Ut(u){Vt=u}function Ae(){if(!Vt)throw new Error("Function called outside component initialization");return Vt}function jt(u){Ae().$$.on_mount.push(u)}function tn(u){Ae().$$.on_destroy.push(u)}function De(){const u=Ae();return(a,t,{cancelable:o=!1}={})=>{const n=u.$$.callbacks[a];if(n){const e=Zr(a,t,{cancelable:o});return n.slice().forEach(r=>{r.call(u,e)}),!e.defaultPrevented}return!0}}const It=[],St=[];let Mt=[];const Ye=[],en=Promise.resolve();let Ee=!1;function rn(){Ee||(Ee=!0,en.then(vr))}function Ce(u){Mt.push(u)}const me=new Set;let _t=0;function vr(){if(_t!==0)return;const u=Vt;do{try{for(;_t<It.length;){const a=It[_t];_t++,Ut(a),nn(a.$$)}}catch(a){throw It.length=0,_t=0,a}for(Ut(null),It.length=0,_t=0;St.length;)St.pop()();for(let a=0;a<Mt.length;a+=1){const t=Mt[a];me.has(t)||(me.add(t),t())}Mt.length=0}while(It.length);for(;Ye.length;)Ye.pop()();Ee=!1,me.clear(),Ut(u)}function nn(u){if(u.fragment!==null){u.update(),st(u.before_update);const a=u.dirty;u.dirty=[-1],u.fragment&&u.fragment.p(u.ctx,a),u.after_update.forEach(Ce)}}function an(u){const a=[],t=[];Mt.forEach(o=>u.indexOf(o)===-1?a.push(o):t.push(o)),t.forEach(o=>o()),Mt=a}const ie=new Set;let Et;function Ve(){Et={r:0,c:[],p:Et}}function qe(){Et.r||st(Et.c),Et=Et.p}function ct(u,a){u&&u.i&&(ie.delete(u),u.i(a))}function yt(u,a,t,o){if(u&&u.o){if(ie.has(u))return;ie.add(u),Et.c.push(()=>{ie.delete(u),o&&(t&&u.d(1),o())}),u.o(a)}else o&&o()}function Ft(u){return(u==null?void 0:u.length)!==void 0?u:Array.from(u)}function Pe(u,a){u.d(1),a.delete(u.key)}function Be(u,a,t,o,n,e,r,c,i,s,l,d){let f=u.length,p=e.length,h=f;const m={};for(;h--;)m[u[h].key]=h;const g=[],y=new Map,w=new Map,v=[];for(h=p;h--;){const x=d(n,e,h),k=t(x);let T=r.get(k);T?v.push(()=>T.p(x,a)):(T=s(k,x),T.c()),y.set(k,g[h]=T),k in m&&w.set(k,Math.abs(h-m[k]))}const b=new Set,E=new Set;function j(x){ct(x,1),x.m(c,l),r.set(x.key,x),l=x.first,p--}for(;f&&p;){const x=g[p-1],k=u[f-1],T=x.key,B=k.key;x===k?(l=x.first,f--,p--):y.has(B)?!r.has(T)||b.has(T)?j(x):E.has(B)?f--:w.get(T)>w.get(B)?(E.add(T),j(x)):(b.add(B),f--):(i(k,r),f--)}for(;f--;){const x=u[f];y.has(x.key)||i(x,r)}for(;p;)j(g[p-1]);return st(v),g}function ae(u){u&&u.c()}function qt(u,a,t){const{fragment:o,after_update:n}=u.$$;o&&o.m(a,t),Ce(()=>{const e=u.$$.on_mount.map(hr).filter(mr);u.$$.on_destroy?u.$$.on_destroy.push(...e):st(e),u.$$.on_mount=[]}),n.forEach(Ce)}function Wt(u,a){const t=u.$$;t.fragment!==null&&(an(t.after_update),st(t.on_destroy),t.fragment&&t.fragment.d(a),t.on_destroy=t.fragment=null,t.ctx=[])}function on(u,a){u.$$.dirty[0]===-1&&(It.push(u),rn(),u.$$.dirty.fill(0)),u.$$.dirty[a/31|0]|=1<<a%31}function Qt(u,a,t,o,n,e,r=null,c=[-1]){const i=Vt;Ut(u);const s=u.$$={fragment:null,ctx:[],props:e,update:nt,not_equal:n,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(i?i.$$.context:[])),callbacks:Oe(),dirty:c,skip_bound:!1,root:a.target||i.$$.root};r&&r(s.root);let l=!1;if(s.ctx=t?t(u,a.props||{},(d,f,...p)=>{const h=p.length?p[0]:f;return s.ctx&&n(s.ctx[d],s.ctx[d]=h)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](h),l&&on(u,d)),f}):[],s.update(),l=!0,st(s.before_update),s.fragment=o?o(s.ctx):!1,a.target){if(a.hydrate){const d=Jr(a.target);s.fragment&&s.fragment.l(d),d.forEach(W)}else s.fragment&&s.fragment.c();a.intro&&ct(u.$$.fragment),qt(u,a.target,a.anchor),vr()}Ut(i)}class Xt{constructor(){et(this,"$$");et(this,"$$set")}$destroy(){Wt(this,1),this.$destroy=nt}$on(a,t){if(!mr(t))return nt;const o=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);return o.push(t),()=>{const n=o.indexOf(t);n!==-1&&o.splice(n,1)}}$set(a){this.$$set&&!Xr(a)&&(this.$$.skip_bound=!0,this.$$set(a),this.$$.skip_bound=!1)}}const sn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sn);var Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $e(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function _e(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oe={exports:{}};oe.exports;(function(u,a){/*!
 * artplayer.js v5.2.1
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2024 Harvey Zack
 * Released under the MIT License.
 */(function(t,o,n,e,r){var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Te<"u"?Te:{},i=typeof c[e]=="function"&&c[e],s=i.cache||{},l=typeof _e=="function"&&_e.bind(u);function d(h,m){if(!s[h]){if(!t[h]){var g=typeof c[e]=="function"&&c[e];if(!m&&g)return g(h,!0);if(i)return i(h,!0);if(l&&typeof h=="string")return l(h);var y=Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}v.resolve=function(b){var E=t[h][1][b];return E??b},v.cache={};var w=s[h]=new d.Module(h);t[h][0].call(w.exports,v,w,w.exports,this)}return s[h].exports;function v(b){var E=v.resolve(b);return E===!1?{}:d(E)}}d.isParcelRequire=!0,d.Module=function(h){this.id=h,this.bundle=d,this.exports={}},d.modules=t,d.cache=s,d.parent=i,d.register=function(h,m){t[h]=[function(g,y){y.exports=m},{}]},Object.defineProperty(d,"root",{get:function(){return c[e]}}),c[e]=d;for(var f=0;f<o.length;f++)d(o[f]);{var p=d(n);u.exports=p}})({"5lTcX":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("bundle-text:./style/index.less"),c=e.interopDefault(r),i=t("option-validator"),s=e.interopDefault(i),l=t("./utils/emitter"),d=e.interopDefault(l),f=t("./utils"),p=t("./scheme"),h=e.interopDefault(p),m=t("./config"),g=e.interopDefault(m),y=t("./template"),w=e.interopDefault(y),v=t("./i18n"),b=e.interopDefault(v),E=t("./player"),j=e.interopDefault(E),x=t("./control"),k=e.interopDefault(x),T=t("./contextmenu"),B=e.interopDefault(T),_=t("./info"),D=e.interopDefault(_),C=t("./subtitle"),I=e.interopDefault(C),M=t("./events"),$=e.interopDefault(M),P=t("./hotkey"),L=e.interopDefault(P),R=t("./layer"),O=e.interopDefault(R),J=t("./loading"),X=e.interopDefault(J),rt=t("./notice"),A=e.interopDefault(rt),H=t("./mask"),U=e.interopDefault(H),N=t("./icons"),Q=e.interopDefault(N),it=t("./setting"),ot=e.interopDefault(it),pt=t("./storage"),$t=e.interopDefault(pt),Lt=t("./plugins"),Rt=e.interopDefault(Lt);let Ht=0,gt=[];class Y extends d.default{constructor(dt,Ct){super(),this.id=++Ht;let Tt=f.mergeDeep(Y.option,dt);if(Tt.container=dt.container,this.option=(0,s.default)(Tt,h.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new w.default(this),this.events=new $.default(this),this.storage=new $t.default(this),this.icons=new Q.default(this),this.i18n=new b.default(this),this.notice=new A.default(this),this.player=new j.default(this),this.layers=new O.default(this),this.controls=new k.default(this),this.contextmenu=new B.default(this),this.subtitle=new I.default(this),this.info=new D.default(this),this.loading=new X.default(this),this.hotkey=new L.default(this),this.mask=new U.default(this),this.setting=new ot.default(this),this.plugins=new Rt.default(this),typeof Ct=="function"&&this.on("ready",()=>Ct.call(this,this)),Y.DEBUG){let vt=ht=>console.log(`[ART.${this.id}] -> ${ht}`);vt("Version@"+Y.version),vt("Env@"+Y.env),vt("Build@"+Y.build);for(let ht=0;ht<g.default.events.length;ht++)this.on("video:"+g.default.events[ht],zt=>vt("Event@"+zt.type))}gt.push(this)}static get instances(){return gt}static get version(){return"5.2.1"}static get env(){return"production"}static get build(){return"2024-10-26 15:26:30"}static get config(){return g.default}static get utils(){return f}static get scheme(){return h.default}static get Emitter(){return d.default}static get validator(){return s.default}static get kindOf(){return s.default.kindOf}static get html(){return w.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:dt=>dt},moreVideoAttr:{controls:!1,preload:f.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(dt=!0){this.events.destroy(),this.template.destroy(dt),gt.splice(gt.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}n.default=Y,Y.STYLE=c.default,Y.DEBUG=!1,Y.CONTEXTMENU=!0,Y.NOTICE_TIME=2e3,Y.SETTING_WIDTH=250,Y.SETTING_ITEM_WIDTH=200,Y.SETTING_ITEM_HEIGHT=35,Y.RESIZE_TIME=200,Y.SCROLL_TIME=200,Y.SCROLL_GAP=50,Y.AUTO_PLAYBACK_MAX=10,Y.AUTO_PLAYBACK_MIN=5,Y.AUTO_PLAYBACK_TIMEOUT=3e3,Y.RECONNECT_TIME_MAX=5,Y.RECONNECT_SLEEP_TIME=1e3,Y.CONTROL_HIDE_TIME=3e3,Y.DBCLICK_TIME=300,Y.DBCLICK_FULLSCREEN=!0,Y.MOBILE_DBCLICK_PLAY=!0,Y.MOBILE_CLICK_PLAY=!1,Y.AUTO_ORIENTATION_TIME=200,Y.INFO_LOOP_TIME=1e3,Y.FAST_FORWARD_VALUE=3,Y.FAST_FORWARD_TIME=1e3,Y.TOUCH_MOVE_RATIO=.5,Y.VOLUME_STEP=.1,Y.SEEK_STEP=5,Y.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],Y.ASPECT_RATIO=["default","4:3","16:9"],Y.FLIP=["normal","horizontal","vertical"],Y.FULLSCREEN_WEB_IN_BODY=!1,Y.LOG_VERSION=!0,Y.USE_RAF=!1,f.isBrowser&&(window.Artplayer=Y,f.setStyleText("artplayer-style",c.default),setTimeout(()=>{Y.LOG_VERSION&&console.log(`%c ArtPlayer %c ${Y.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"0016T","option-validator":"bAWi2","./utils/emitter":"66mFZ","./utils":"71aH7","./scheme":"AKEiO","./config":"lyjeQ","./template":"X13Zf","./i18n":"3jKkj","./player":"a90nx","./control":"8Z0Uf","./contextmenu":"2KYsr","./info":"02ajl","./subtitle":"eSWto","./events":"jo4S1","./hotkey":"6NoFy","./layer":"6G6hZ","./loading":"3dsEe","./notice":"dWGTw","./mask":"5POkG","./icons":"6OeNg","./setting":"3eYNH","./storage":"2aaJe","./plugins":"8MTUM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"0016T":[function(t,o,n){o.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;width:100%;height:100%;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;width:100%;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;width:100%;height:100%;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;width:100%;height:50%;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);width:100%;height:100%;position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;padding:var(--art-padding);pointer-events:none;width:100%;height:auto;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{fill:var(--art-theme);width:15px;height:15px}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(t,o,n){var e;e=function(){function r(p){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}var c=Object.prototype.toString,i=function(p){if(p===void 0)return"undefined";if(p===null)return"null";var h=r(p);if(h==="boolean")return"boolean";if(h==="string")return"string";if(h==="number")return"number";if(h==="symbol")return"symbol";if(h==="function")return s(p)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(p):p instanceof Array)return"array";if(p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p))return"buffer";if(function(m){try{if(typeof m.length=="number"&&typeof m.callee=="function")return!0}catch(g){if(g.message.indexOf("callee")!==-1)return!0}return!1}(p))return"arguments";if(p instanceof Date||typeof p.toDateString=="function"&&typeof p.getDate=="function"&&typeof p.setDate=="function")return"date";if(p instanceof Error||typeof p.message=="string"&&p.constructor&&typeof p.constructor.stackTraceLimit=="number")return"error";if(p instanceof RegExp||typeof p.flags=="string"&&typeof p.ignoreCase=="boolean"&&typeof p.multiline=="boolean"&&typeof p.global=="boolean")return"regexp";switch(s(p)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof p.throw=="function"&&typeof p.return=="function"&&typeof p.next=="function")return"generator";switch(h=c.call(p)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return h.slice(8,-1).toLowerCase().replace(/\s/g,"")};function s(p){return p.constructor?p.constructor.name:null}function l(p,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return d(p,h,m),f(p,h,m),function(g,y,w){var v=i(y),b=i(g);if(v==="object"){if(b!=="object")throw Error("[Type Error]: '".concat(w.join("."),"' require 'object' type, but got '").concat(b,"'"));Object.keys(y).forEach(function(E){var j=g[E],x=y[E],k=w.slice();k.push(E),d(j,x,k),f(j,x,k),l(j,x,k)})}if(v==="array"){if(b!=="array")throw Error("[Type Error]: '".concat(w.join("."),"' require 'array' type, but got '").concat(b,"'"));g.forEach(function(E,j){var x=g[j],k=y[j]||y[0],T=w.slice();T.push(j),d(x,k,T),f(x,k,T),l(x,k,T)})}}(p,h,m),p}function d(p,h,m){if(i(h)==="string"){var g=i(p);if(h[0]==="?"&&(h=h.slice(1)+"|undefined"),!(-1<h.indexOf("|")?h.split("|").map(function(y){return y.toLowerCase().trim()}).filter(Boolean).some(function(y){return g===y}):h.toLowerCase().trim()===g))throw Error("[Type Error]: '".concat(m.join("."),"' require '").concat(h,"' type, but got '").concat(g,"'"))}}function f(p,h,m){if(i(h)==="function"){var g=h(p,i(p),m);if(g!==!0){var y=i(g);throw y==="string"?Error(g):y==="error"?g:Error("[Validator Error]: The scheme for '".concat(m.join("."),"' validator require return true, but got '").concat(g,"'"))}}}return l.kindOf=i,l},o.exports=e()},{}],"66mFZ":[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=class{on(e,r,c){let i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:r,ctx:c}),this}once(e,r,c){let i=this;function s(...l){i.off(e,s),r.apply(c,l)}return s._=r,this.on(e,s,c)}emit(e,...r){let c=((this.e||(this.e={}))[e]||[]).slice();for(let i=0;i<c.length;i+=1)c[i].fn.apply(c[i].ctx,r);return this}off(e,r){let c=this.e||(this.e={}),i=c[e],s=[];if(i&&r)for(let l=0,d=i.length;l<d;l+=1)i[l].fn!==r&&i[l].fn._!==r&&s.push(i[l]);return s.length?c[e]=s:delete c[e],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(t,o,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,r){return Object.keys(e).forEach(function(c){c==="default"||c==="__esModule"||Object.prototype.hasOwnProperty.call(r,c)||Object.defineProperty(r,c,{enumerable:!0,get:function(){return e[c]}})}),r},n.export=function(e,r,c){Object.defineProperty(e,r,{enumerable:!0,get:c})}},{}],"71aH7":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./dom");e.exportAll(r,n);var c=t("./error");e.exportAll(c,n);var i=t("./subtitle");e.exportAll(i,n);var s=t("./file");e.exportAll(s,n);var l=t("./property");e.exportAll(l,n);var d=t("./time");e.exportAll(d,n);var f=t("./format");e.exportAll(f,n);var p=t("./compatibility");e.exportAll(p,n)},{"./dom":"bSNiV","./error":"hwmZz","./subtitle":"inzwq","./file":"6b7Ip","./property":"5NSdr","./time":"epmNy","./format":"gapRl","./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bSNiV:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"query",()=>c),e.export(n,"queryAll",()=>i),e.export(n,"addClass",()=>s),e.export(n,"removeClass",()=>l),e.export(n,"hasClass",()=>d),e.export(n,"append",()=>f),e.export(n,"remove",()=>p),e.export(n,"setStyle",()=>h),e.export(n,"setStyles",()=>m),e.export(n,"getStyle",()=>g),e.export(n,"sublings",()=>y),e.export(n,"inverseClass",()=>w),e.export(n,"tooltip",()=>v),e.export(n,"isInViewport",()=>b),e.export(n,"includeFromEvent",()=>E),e.export(n,"replaceElement",()=>j),e.export(n,"createElement",()=>x),e.export(n,"getIcon",()=>k),e.export(n,"setStyleText",()=>T),e.export(n,"supportsFlex",()=>B),e.export(n,"getRect",()=>_),e.export(n,"loadImg",()=>D);var r=t("./compatibility");function c(C,I=document){return I.querySelector(C)}function i(C,I=document){return Array.from(I.querySelectorAll(C))}function s(C,I){return C.classList.add(I)}function l(C,I){return C.classList.remove(I)}function d(C,I){return C.classList.contains(I)}function f(C,I){return I instanceof Element?C.appendChild(I):C.insertAdjacentHTML("beforeend",String(I)),C.lastElementChild||C.lastChild}function p(C){return C.parentNode.removeChild(C)}function h(C,I,M){return C.style[I]=M,C}function m(C,I){for(let M in I)h(C,M,I[M]);return C}function g(C,I,M=!0){let $=window.getComputedStyle(C,null).getPropertyValue(I);return M?parseFloat($):$}function y(C){return Array.from(C.parentElement.children).filter(I=>I!==C)}function w(C,I){y(C).forEach(M=>l(M,I)),s(C,I)}function v(C,I,M="top"){r.isMobile||(C.setAttribute("aria-label",I),s(C,"hint--rounded"),s(C,`hint--${M}`))}function b(C,I=0){let M=C.getBoundingClientRect(),$=window.innerHeight||document.documentElement.clientHeight,P=window.innerWidth||document.documentElement.clientWidth,L=M.top-I<=$&&M.top+M.height+I>=0,R=M.left-I<=P+I&&M.left+M.width+I>=0;return L&&R}function E(C,I){return C.composedPath&&C.composedPath().indexOf(I)>-1}function j(C,I){return I.parentNode.replaceChild(C,I),C}function x(C){return document.createElement(C)}function k(C="",I=""){let M=x("i");return s(M,"art-icon"),s(M,`art-icon-${C}`),f(M,I),M}function T(C,I){let M=document.getElementById(C);if(M)M.textContent=I;else{let $=x("style");$.id=C,$.textContent=I,document.head.appendChild($)}}function B(){let C=document.createElement("div");return C.style.display="flex",C.style.display==="flex"}function _(C){return C.getBoundingClientRect()}function D(C,I){return new Promise((M,$)=>{let P=new Image;P.crossOrigin="Anonymous",P.onload=function(){if(I&&I!==1){let L=document.createElement("canvas"),R=L.getContext("2d");L.width=P.width*I,L.height=P.height*I,R.drawImage(P,0,0,L.width,L.height),L.toBlob(O=>{let J=URL.createObjectURL(O),X=new Image;X.onload=function(){M(X)},X.onerror=function(){URL.revokeObjectURL(J),$(Error(`Image load failed: ${C}`))},X.src=J})}else M(P)},P.onerror=function(){$(Error(`Image load failed: ${C}`))},P.src=C})}},{"./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6ZTr6":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"userAgent",()=>r),e.export(n,"isSafari",()=>c),e.export(n,"isWechat",()=>i),e.export(n,"isIE",()=>s),e.export(n,"isAndroid",()=>l),e.export(n,"isIOS",()=>d),e.export(n,"isIOS13",()=>f),e.export(n,"isMobile",()=>p),e.export(n,"isBrowser",()=>h);let r=typeof navigator<"u"?navigator.userAgent:"",c=/^((?!chrome|android).)*safari/i.test(r),i=/MicroMessenger/i.test(r),s=/MSIE|Trident/i.test(r),l=/android/i.test(r),d=/iPad|iPhone|iPod/i.test(r)&&!window.MSStream,f=d||r.includes("Macintosh")&&navigator.maxTouchPoints>=1,p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r)||f,h=typeof window<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hwmZz:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"ArtPlayerError",()=>r),e.export(n,"errorHandle",()=>c);class r extends Error{constructor(s,l){super(s),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,l||this.constructor),this.name="ArtPlayerError"}}function c(i,s){if(!i)throw new r(s);return i}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],inzwq:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(s){return`WEBVTT \r
\r
`.concat(s.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(l,d,f)=>{let p=f.slice(0,3);return f.length===1&&(p=f+"00"),f.length===2&&(p=f+"0"),`${d},${p}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function c(s){return URL.createObjectURL(new Blob([s],{type:"text/vtt"}))}function i(s){let l=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function d(f=""){return f.split(/[:.]/).map((p,h,m)=>{if(h===m.length-1){if(p.length===1)return`.${p}00`;if(p.length===2)return`.${p}0`}else if(p.length===1)return(h===0?"0":":0")+p;return h===0?p:h===m.length-1?`.${p}`:`:${p}`}).join("")}return`WEBVTT

`+s.split(/\r?\n/).map(f=>{let p=f.match(l);return p?{start:d(p[1].trim()),end:d(p[2].trim()),text:p[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(h=>h.trim()).join(`
`)}:null}).filter(f=>f).map((f,p)=>f?p+1+`
${f.start} --> ${f.end}
${f.text}`:"").filter(f=>f.trim()).join(`

`)}e.defineInteropFlag(n),e.export(n,"srtToVtt",()=>r),e.export(n,"vttToBlob",()=>c),e.export(n,"assToVtt",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6b7Ip":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c,i){let s=document.createElement("a");s.style.display="none",s.href=c,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}e.defineInteropFlag(n),e.export(n,"getExt",()=>function c(i){return i.includes("?")?c(i.split("?")[0]):i.includes("#")?c(i.split("#")[0]):i.trim().toLowerCase().split(".").pop()}),e.export(n,"download",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5NSdr":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"def",()=>r),e.export(n,"has",()=>i),e.export(n,"get",()=>s),e.export(n,"mergeDeep",()=>function l(...d){let f=p=>p&&typeof p=="object"&&!Array.isArray(p);return d.reduce((p,h)=>(Object.keys(h).forEach(m=>{let g=p[m],y=h[m];Array.isArray(g)&&Array.isArray(y)?p[m]=g.concat(...y):f(g)&&f(y)?p[m]=l(g,y):p[m]=y}),p),{})});let r=Object.defineProperty,{hasOwnProperty:c}=Object.prototype;function i(l,d){return c.call(l,d)}function s(l,d){return Object.getOwnPropertyDescriptor(l,d)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],epmNy:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(s=0){return new Promise(l=>setTimeout(l,s))}function c(s,l){let d;return function(...f){clearTimeout(d),d=setTimeout(()=>(d=null,s.apply(this,f)),l)}}function i(s,l){let d=!1;return function(...f){d||(s.apply(this,f),d=!0,setTimeout(function(){d=!1},l))}}e.defineInteropFlag(n),e.export(n,"sleep",()=>r),e.export(n,"debounce",()=>c),e.export(n,"throttle",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gapRl:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(d,f,p){return Math.max(Math.min(d,Math.max(f,p)),Math.min(f,p))}function c(d){return d.charAt(0).toUpperCase()+d.slice(1)}function i(d){if(!d)return"00:00";let f=Math.floor(d/3600),p=Math.floor((d-3600*f)/60),h=Math.floor(d-3600*f-60*p);return(f>0?[f,p,h]:[p,h]).map(m=>m<10?`0${m}`:String(m)).join(":")}function s(d){return d.replace(/[&<>'"]/g,f=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[f]||f)}function l(d){let f={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},p=RegExp(`(${Object.keys(f).join("|")})`,"g");return d.replace(p,h=>f[h]||h)}e.defineInteropFlag(n),e.export(n,"clamp",()=>r),e.export(n,"capitalize",()=>c),e.export(n,"secondToTime",()=>i),e.export(n,"escape",()=>s),e.export(n,"unescape",()=>l)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],AKEiO:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"ComponentOption",()=>h);var r=t("../utils");let c="array",i="boolean",s="string",l="number",d="object",f="function";function p(m,g,y){return(0,r.errorHandle)(g===s||g===l||m instanceof Element,`${y.join(".")} require '${s}' or 'Element' type`)}let h={html:p,disable:`?${i}`,name:`?${s}`,index:`?${l}`,style:`?${d}`,click:`?${f}`,mounted:`?${f}`,tooltip:`?${s}|${l}`,width:`?${l}`,selector:`?${c}`,onSelect:`?${f}`,switch:`?${i}`,onSwitch:`?${f}`,range:`?${c}`,onRange:`?${f}`,onChange:`?${f}`};n.default={id:s,container:p,url:s,poster:s,type:s,theme:s,lang:s,volume:l,isLive:i,muted:i,autoplay:i,autoSize:i,autoMini:i,loop:i,flip:i,playbackRate:i,aspectRatio:i,screenshot:i,setting:i,hotkey:i,pip:i,mutex:i,backdrop:i,fullscreen:i,fullscreenWeb:i,subtitleOffset:i,miniProgressBar:i,useSSR:i,playsInline:i,lock:i,fastForward:i,autoPlayback:i,autoOrientation:i,airplay:i,proxy:`?${f}`,plugins:[f],layers:[h],contextmenu:[h],settings:[h],controls:[{...h,position:(m,g,y)=>{let w=["top","left","right"];return(0,r.errorHandle)(w.includes(m),`${y.join(".")} only accept ${w.toString()} as parameters`)}}],quality:[{default:`?${i}`,html:s,url:s}],highlight:[{time:l,text:s}],thumbnails:{url:s,number:l,column:l,width:l,height:l,scale:l},subtitle:{url:s,name:s,type:s,style:d,escape:i,encoding:s,onVttLoad:f},moreVideoAttr:d,i18n:d,icons:d,cssVar:d,customType:d}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lyjeQ:[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],X13Zf:[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var e=t("./utils");class r{constructor(i){this.art=i;let{option:s,constructor:l}=i;s.container instanceof Element?this.$container=s.container:(this.$container=(0,e.query)(s.container),(0,e.errorHandle)(this.$container,`No container element found by ${s.container}`)),(0,e.errorHandle)((0,e.supportsFlex)(),"The current browser does not support flex layout");let d=this.$container.tagName.toLowerCase();(0,e.errorHandle)(d==="div",`Unsupported container element type, only support 'div' but got '${d}'`),(0,e.errorHandle)(l.instances.every(f=>f.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=i.id,this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.2.1</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(i){return(0,e.query)(i,this.$container)}init(){let{option:i}=this.art;if(i.useSSR||(this.$container.innerHTML=r.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),i.proxy){let s=i.proxy.call(this.art,this.art);(0,e.errorHandle)(s instanceof HTMLVideoElement||s instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,e.replaceElement)(s,this.$video),s.className="art-video",this.$video=s}i.backdrop&&(0,e.addClass)(this.$player,"art-backdrop"),e.isMobile&&(0,e.addClass)(this.$player,"art-mobile")}destroy(i){i?this.$container.innerHTML="":(0,e.addClass)(this.$player,"art-destroy")}}n.default=r},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3jKkj":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("../utils"),c=t("./zh-cn"),i=e.interopDefault(c);n.default=class{constructor(s){this.art=s,this.languages={"zh-cn":i.default},this.language={},this.update(s.option.i18n)}init(){let s=this.art.option.lang.toLowerCase();this.language=this.languages[s]||{}}get(s){return this.language[s]||s}update(s){this.languages=(0,r.mergeDeep)(this.languages,s),this.init()}}},{"../utils":"71aH7","./zh-cn":"5Y91w","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5Y91w":[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);let e={"Video Info":"统计信息",Close:"关闭","Video Load Failed":"加载失败",Volume:"音量",Play:"播放",Pause:"暂停",Rate:"速度",Mute:"静音","Video Flip":"画面翻转",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新连接","Show Setting":"显示设置","Hide Setting":"隐藏设置",Screenshot:"截图","Play Speed":"播放速度","Aspect Ratio":"画面比例",Default:"默认",Normal:"正常",Open:"打开","Switch Video":"切换","Switch Subtitle":"切换字幕",Fullscreen:"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"网页全屏","Exit Web Fullscreen":"退出网页全屏","Mini Player":"迷你播放器","PIP Mode":"开启画中画","Exit PIP Mode":"退出画中画","PIP Not Supported":"不支持画中画","Fullscreen Not Supported":"不支持全屏","Subtitle Offset":"字幕偏移","Last Seen":"上次看到","Jump Play":"跳转播放",AirPlay:"隔空播放","AirPlay Not Available":"隔空播放不可用"};n.default=e,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],a90nx:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./urlMix"),c=e.interopDefault(r),i=t("./attrMix"),s=e.interopDefault(i),l=t("./playMix"),d=e.interopDefault(l),f=t("./pauseMix"),p=e.interopDefault(f),h=t("./toggleMix"),m=e.interopDefault(h),g=t("./seekMix"),y=e.interopDefault(g),w=t("./volumeMix"),v=e.interopDefault(w),b=t("./currentTimeMix"),E=e.interopDefault(b),j=t("./durationMix"),x=e.interopDefault(j),k=t("./switchMix"),T=e.interopDefault(k),B=t("./playbackRateMix"),_=e.interopDefault(B),D=t("./aspectRatioMix"),C=e.interopDefault(D),I=t("./screenshotMix"),M=e.interopDefault(I),$=t("./fullscreenMix"),P=e.interopDefault($),L=t("./fullscreenWebMix"),R=e.interopDefault(L),O=t("./pipMix"),J=e.interopDefault(O),X=t("./loadedMix"),rt=e.interopDefault(X),A=t("./playedMix"),H=e.interopDefault(A),U=t("./playingMix"),N=e.interopDefault(U),Q=t("./autoSizeMix"),it=e.interopDefault(Q),ot=t("./rectMix"),pt=e.interopDefault(ot),$t=t("./flipMix"),Lt=e.interopDefault($t),Rt=t("./miniMix"),Ht=e.interopDefault(Rt),gt=t("./posterMix"),Y=e.interopDefault(gt),pe=t("./autoHeightMix"),dt=e.interopDefault(pe),Ct=t("./cssVarMix"),Tt=e.interopDefault(Ct),vt=t("./themeMix"),ht=e.interopDefault(vt),zt=t("./typeMix"),he=e.interopDefault(zt),te=t("./stateMix"),Nt=e.interopDefault(te),Lr=t("./subtitleOffsetMix"),Rr=e.interopDefault(Lr),Hr=t("./airplayMix"),zr=e.interopDefault(Hr),Nr=t("./qualityMix"),Or=e.interopDefault(Nr),Ur=t("./thumbnailsMix"),Yr=e.interopDefault(Ur),Vr=t("./optionInit"),qr=e.interopDefault(Vr),Wr=t("./eventInit"),Kr=e.interopDefault(Wr);n.default=class{constructor(K){(0,c.default)(K),(0,s.default)(K),(0,d.default)(K),(0,p.default)(K),(0,m.default)(K),(0,y.default)(K),(0,v.default)(K),(0,E.default)(K),(0,x.default)(K),(0,T.default)(K),(0,_.default)(K),(0,C.default)(K),(0,M.default)(K),(0,P.default)(K),(0,R.default)(K),(0,J.default)(K),(0,rt.default)(K),(0,H.default)(K),(0,N.default)(K),(0,it.default)(K),(0,pt.default)(K),(0,Lt.default)(K),(0,Ht.default)(K),(0,Y.default)(K),(0,dt.default)(K),(0,Tt.default)(K),(0,ht.default)(K),(0,he.default)(K),(0,Nt.default)(K),(0,Rr.default)(K),(0,zr.default)(K),(0,Or.default)(K),(0,Yr.default)(K),(0,Kr.default)(K),(0,qr.default)(K)}}},{"./urlMix":"kQoac","./attrMix":"deCma","./playMix":"fOJuP","./pauseMix":"fzHAy","./toggleMix":"cBHxQ","./seekMix":"koAPr","./volumeMix":"6eyuR","./currentTimeMix":"faaWv","./durationMix":"5y91K","./switchMix":"iceD8","./playbackRateMix":"keKwh","./aspectRatioMix":"jihET","./screenshotMix":"36kPY","./fullscreenMix":"2GYOJ","./fullscreenWebMix":"5aYAP","./pipMix":"7EnIB","./loadedMix":"3N9mP","./playedMix":"et96R","./playingMix":"9DzzM","./autoSizeMix":"i1LDY","./rectMix":"IqARI","./flipMix":"7E7Vs","./miniMix":"gpugx","./posterMix":"1SuFS","./autoHeightMix":"8x4te","./cssVarMix":"1CaTA","./themeMix":"2FqhO","./typeMix":"1fQQs","./stateMix":"iBOQW","./subtitleOffsetMix":"6vlBV","./airplayMix":"eftqT","./qualityMix":"5SdyX","./thumbnailsMix":"4HcqV","./optionInit":"fCWZK","./eventInit":"f8Lv3","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kQoac:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{option:s,template:{$video:l}}=i;(0,r.def)(i,"url",{get:()=>l.src,async set(d){if(d){let f=i.url,p=s.type||(0,r.getExt)(d),h=s.customType[p];p&&h?(await(0,r.sleep)(),i.loading.show=!0,h.call(i,l,d,i)):(URL.revokeObjectURL(f),l.src=d),f!==i.url&&(i.option.url=d,i.isReady&&f&&i.once("video:canplay",()=>{i.emit("restart",d)}))}else await(0,r.sleep)(),i.loading.show=!0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],deCma:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$video:s}}=i;(0,r.def)(i,"attr",{value(l,d){if(d===void 0)return s[l];s[l]=d}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fOJuP:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{i18n:s,notice:l,option:d,constructor:{instances:f},template:{$video:p}}=i;(0,r.def)(i,"play",{value:async function(){let h=await p.play();if(l.show=s.get("Play"),i.emit("play"),d.mutex)for(let m=0;m<f.length;m++){let g=f[m];g!==i&&g.pause()}return h}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fzHAy:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$video:s},i18n:l,notice:d}=i;(0,r.def)(i,"pause",{value(){let f=s.pause();return d.show=l.get("Pause"),i.emit("pause"),f}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cBHxQ:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"toggle",{value:()=>i.playing?i.pause():i.play()})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],koAPr:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{notice:s}=i;(0,r.def)(i,"seek",{set(l){i.currentTime=l,i.emit("seek",i.currentTime),i.duration&&(s.show=`${(0,r.secondToTime)(i.currentTime)} / ${(0,r.secondToTime)(i.duration)}`)}}),(0,r.def)(i,"forward",{set(l){i.seek=i.currentTime+l}}),(0,r.def)(i,"backward",{set(l){i.seek=i.currentTime-l}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6eyuR":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$video:s},i18n:l,notice:d,storage:f}=i;(0,r.def)(i,"volume",{get:()=>s.volume||0,set:p=>{s.volume=(0,r.clamp)(p,0,1),d.show=`${l.get("Volume")}: ${parseInt(100*s.volume,10)}`,s.volume!==0&&f.set("volume",s.volume)}}),(0,r.def)(i,"muted",{get:()=>s.muted,set:p=>{s.muted=p,i.emit("muted",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],faaWv:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{$video:s}=i.template;(0,r.def)(i,"currentTime",{get:()=>s.currentTime||0,set:l=>{Number.isNaN(l=parseFloat(l))||(s.currentTime=(0,r.clamp)(l,0,i.duration))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5y91K":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"duration",{get:()=>{let{duration:s}=i.template.$video;return s===1/0?0:s||0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iceD8:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){function s(l,d){return new Promise((f,p)=>{if(l===i.url)return;let{playing:h,aspectRatio:m,playbackRate:g}=i;i.pause(),i.url=l,i.notice.show="",i.once("video:error",p),i.once("video:loadedmetadata",()=>{i.currentTime=d}),i.once("video:canplay",async()=>{i.playbackRate=g,i.aspectRatio=m,h&&await i.play(),i.notice.show="",f()})})}(0,r.def)(i,"switchQuality",{value:l=>s(l,i.currentTime)}),(0,r.def)(i,"switchUrl",{value:l=>s(l,0)}),(0,r.def)(i,"switch",{set:i.switchUrl})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],keKwh:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$video:s},i18n:l,notice:d}=i;(0,r.def)(i,"playbackRate",{get:()=>s.playbackRate,set(f){f?f!==s.playbackRate&&(s.playbackRate=f,d.show=`${l.get("Rate")}: ${f===1?l.get("Normal"):`${f}x`}`):i.playbackRate=1}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jihET:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{i18n:s,notice:l,template:{$video:d,$player:f}}=i;(0,r.def)(i,"aspectRatio",{get:()=>f.dataset.aspectRatio||"default",set(p){if(p||(p="default"),p==="default")(0,r.setStyle)(d,"width",null),(0,r.setStyle)(d,"height",null),(0,r.setStyle)(d,"margin",null),delete f.dataset.aspectRatio;else{let h=p.split(":").map(Number),{clientWidth:m,clientHeight:g}=f,y=h[0]/h[1];m/g>y?((0,r.setStyle)(d,"width",`${y*g}px`),(0,r.setStyle)(d,"height","100%"),(0,r.setStyle)(d,"margin","0 auto")):((0,r.setStyle)(d,"width","100%"),(0,r.setStyle)(d,"height",`${m/y}px`),(0,r.setStyle)(d,"margin","auto 0")),f.dataset.aspectRatio=p}l.show=`${s.get("Aspect Ratio")}: ${p==="default"?s.get("Default"):p}`,i.emit("aspectRatio",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"36kPY":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{notice:s,template:{$video:l}}=i,d=(0,r.createElement)("canvas");(0,r.def)(i,"getDataURL",{value:()=>new Promise((f,p)=>{try{d.width=l.videoWidth,d.height=l.videoHeight,d.getContext("2d").drawImage(l,0,0),f(d.toDataURL("image/png"))}catch(h){s.show=h,p(h)}})}),(0,r.def)(i,"getBlobUrl",{value:()=>new Promise((f,p)=>{try{d.width=l.videoWidth,d.height=l.videoHeight,d.getContext("2d").drawImage(l,0,0),d.toBlob(h=>{f(URL.createObjectURL(h))})}catch(h){s.show=h,p(h)}})}),(0,r.def)(i,"screenshot",{value:async f=>{let p=await i.getDataURL(),h=f||`artplayer_${(0,r.secondToTime)(l.currentTime)}`;return(0,r.download)(p,`${h}.png`),i.emit("screenshot",p),p}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2GYOJ":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>s);var r=t("../libs/screenfull"),c=e.interopDefault(r),i=t("../utils");function s(l){let{i18n:d,notice:f,template:{$video:p,$player:h}}=l,m=y=>{c.default.on("change",()=>{y.emit("fullscreen",c.default.isFullscreen)}),c.default.on("error",w=>{y.emit("fullscreenError",w)}),(0,i.def)(y,"fullscreen",{get:()=>c.default.isFullscreen,async set(w){w?(y.state="fullscreen",await c.default.request(h),(0,i.addClass)(h,"art-fullscreen")):(await c.default.exit(),(0,i.removeClass)(h,"art-fullscreen")),y.emit("resize")}})},g=y=>{y.proxy(document,"webkitfullscreenchange",()=>{y.emit("fullscreen",y.fullscreen),y.emit("resize")}),(0,i.def)(y,"fullscreen",{get:()=>document.fullscreenElement===p,set(w){w?(y.state="fullscreen",p.webkitEnterFullscreen()):p.webkitExitFullscreen()}})};l.once("video:loadedmetadata",()=>{c.default.isEnabled?m(l):p.webkitSupportsFullscreen?g(l):(0,i.def)(l,"fullscreen",{get:()=>!1,set(){f.show=d.get("Fullscreen Not Supported")}}),(0,i.def)(l,"fullscreen",(0,i.get)(l,"fullscreen"))})}},{"../libs/screenfull":"8v40z","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8v40z":[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);let e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=(()=>{if(typeof document>"u")return!1;let s=e[0],l={};for(let d of e)if(d[1]in document){for(let[f,p]of d.entries())l[s[f]]=p;return l}return!1})(),c={change:r.fullscreenchange,error:r.fullscreenerror},i={request:(s=document.documentElement,l)=>new Promise((d,f)=>{let p=()=>{i.off("change",p),d()};i.on("change",p);let h=s[r.requestFullscreen](l);h instanceof Promise&&h.then(p).catch(f)}),exit:()=>new Promise((s,l)=>{if(!i.isFullscreen){s();return}let d=()=>{i.off("change",d),s()};i.on("change",d);let f=document[r.exitFullscreen]();f instanceof Promise&&f.then(d).catch(l)}),toggle:(s,l)=>i.isFullscreen?i.exit():i.request(s,l),onchange(s){i.on("change",s)},onerror(s){i.on("error",s)},on(s,l){let d=c[s];d&&document.addEventListener(d,l,!1)},off(s,l){let d=c[s];d&&document.removeEventListener(d,l,!1)},raw:r};Object.defineProperties(i,{isFullscreen:{get:()=>!!document[r.fullscreenElement]},element:{enumerable:!0,get:()=>document[r.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[r.fullscreenEnabled]}}),r||(i={isEnabled:!1}),n.default=i},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aYAP":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{constructor:s,template:{$container:l,$player:d}}=i,f="";(0,r.def)(i,"fullscreenWeb",{get:()=>(0,r.hasClass)(d,"art-fullscreen-web"),set(p){p?(f=d.style.cssText,s.FULLSCREEN_WEB_IN_BODY&&(0,r.append)(document.body,d),i.state="fullscreenWeb",(0,r.setStyle)(d,"width","100%"),(0,r.setStyle)(d,"height","100%"),(0,r.addClass)(d,"art-fullscreen-web"),i.emit("fullscreenWeb",!0)):(s.FULLSCREEN_WEB_IN_BODY&&(0,r.append)(l,d),f&&(d.style.cssText=f,f=""),(0,r.removeClass)(d,"art-fullscreen-web"),i.emit("fullscreenWeb",!1)),i.emit("resize")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7EnIB":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{i18n:s,notice:l,template:{$video:d}}=i;document.pictureInPictureEnabled?function(f){let{template:{$video:p},proxy:h,notice:m}=f;p.disablePictureInPicture=!1,(0,r.def)(f,"pip",{get:()=>document.pictureInPictureElement,set(g){g?(f.state="pip",p.requestPictureInPicture().catch(y=>{throw m.show=y,y})):document.exitPictureInPicture().catch(y=>{throw m.show=y,y})}}),h(p,"enterpictureinpicture",()=>{f.emit("pip",!0)}),h(p,"leavepictureinpicture",()=>{f.emit("pip",!1)})}(i):d.webkitSupportsPresentationMode?function(f){let{$video:p}=f.template;p.webkitSetPresentationMode("inline"),(0,r.def)(f,"pip",{get:()=>p.webkitPresentationMode==="picture-in-picture",set(h){h?(f.state="pip",p.webkitSetPresentationMode("picture-in-picture"),f.emit("pip",!0)):(p.webkitSetPresentationMode("inline"),f.emit("pip",!1))}})}(i):(0,r.def)(i,"pip",{get:()=>!1,set(){l.show=s.get("PIP Not Supported")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3N9mP":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{$video:s}=i.template;(0,r.def)(i,"loaded",{get:()=>i.loadedTime/s.duration}),(0,r.def)(i,"loadedTime",{get:()=>s.buffered.length?s.buffered.end(s.buffered.length-1):0})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],et96R:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"played",{get:()=>i.currentTime/i.duration})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9DzzM":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{$video:s}=i.template;(0,r.def)(i,"playing",{get:()=>typeof s.playing=="boolean"?s.playing:s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],i1LDY:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{$container:s,$player:l,$video:d}=i.template;(0,r.def)(i,"autoSize",{value(){let{videoWidth:f,videoHeight:p}=d,{width:h,height:m}=(0,r.getRect)(s),g=f/p;h/m>g?((0,r.setStyle)(l,"width",`${m*g/h*100}%`),(0,r.setStyle)(l,"height","100%")):((0,r.setStyle)(l,"width","100%"),(0,r.setStyle)(l,"height",`${h/g/m*100}%`)),i.emit("autoSize",{width:i.width,height:i.height})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],IqARI:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"rect",{get:()=>(0,r.getRect)(i.template.$player)});let s=["bottom","height","left","right","top","width"];for(let l=0;l<s.length;l++){let d=s[l];(0,r.def)(i,d,{get:()=>i.rect[d]})}(0,r.def)(i,"x",{get:()=>i.left+window.pageXOffset}),(0,r.def)(i,"y",{get:()=>i.top+window.pageYOffset})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7E7Vs":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$player:s},i18n:l,notice:d}=i;(0,r.def)(i,"flip",{get:()=>s.dataset.flip||"normal",set(f){f||(f="normal"),f==="normal"?delete s.dataset.flip:s.dataset.flip=f,d.show=`${l.get("Video Flip")}: ${l.get((0,r.capitalize)(f))}`,i.emit("flip",f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gpugx:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{icons:s,proxy:l,storage:d,template:{$player:f,$video:p}}=i,h=!1,m=0,g=0;function y(){let{$mini:b}=i.template;b&&((0,r.removeClass)(f,"art-mini"),(0,r.setStyle)(b,"display","none"),f.prepend(p),i.emit("mini",!1))}function w(b,E){i.playing?((0,r.setStyle)(b,"display","none"),(0,r.setStyle)(E,"display","flex")):((0,r.setStyle)(b,"display","flex"),(0,r.setStyle)(E,"display","none"))}function v(){let{$mini:b}=i.template,E=(0,r.getRect)(b),j=window.innerHeight-E.height-50,x=window.innerWidth-E.width-50;d.set("top",j),d.set("left",x),(0,r.setStyle)(b,"top",`${j}px`),(0,r.setStyle)(b,"left",`${x}px`)}(0,r.def)(i,"mini",{get:()=>(0,r.hasClass)(f,"art-mini"),set(b){if(b){i.state="mini",(0,r.addClass)(f,"art-mini");let E=function(){let{$mini:k}=i.template;if(k)return(0,r.append)(k,p),(0,r.setStyle)(k,"display","flex");{let T=(0,r.createElement)("div");(0,r.addClass)(T,"art-mini-popup"),(0,r.append)(document.body,T),i.template.$mini=T,(0,r.append)(T,p);let B=(0,r.append)(T,'<div class="art-mini-close"></div>');(0,r.append)(B,s.close),l(B,"click",y);let _=(0,r.append)(T,'<div class="art-mini-state"></div>'),D=(0,r.append)(_,s.play),C=(0,r.append)(_,s.pause);return l(D,"click",()=>i.play()),l(C,"click",()=>i.pause()),w(D,C),i.on("video:playing",()=>w(D,C)),i.on("video:pause",()=>w(D,C)),i.on("video:timeupdate",()=>w(D,C)),l(T,"mousedown",I=>{h=I.button===0,m=I.pageX,g=I.pageY}),i.on("document:mousemove",I=>{if(h){(0,r.addClass)(T,"art-mini-droging");let M=I.pageX-m,$=I.pageY-g;(0,r.setStyle)(T,"transform",`translate(${M}px, ${$}px)`)}}),i.on("document:mouseup",()=>{if(h){h=!1,(0,r.removeClass)(T,"art-mini-droging");let I=(0,r.getRect)(T);d.set("left",I.left),d.set("top",I.top),(0,r.setStyle)(T,"left",`${I.left}px`),(0,r.setStyle)(T,"top",`${I.top}px`),(0,r.setStyle)(T,"transform",null)}}),T}}(),j=d.get("top"),x=d.get("left");j&&x?((0,r.setStyle)(E,"top",`${j}px`),(0,r.setStyle)(E,"left",`${x}px`),(0,r.isInViewport)(E)||v()):v(),i.emit("mini",!0)}else y()}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1SuFS":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$poster:s}}=i;(0,r.def)(i,"poster",{get:()=>{try{return s.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(l){(0,r.setStyle)(s,"backgroundImage",`url(${l})`)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8x4te":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{template:{$container:s,$video:l}}=i;(0,r.def)(i,"autoHeight",{value(){let{clientWidth:d}=s,{videoHeight:f,videoWidth:p}=l,h=d/p*f;(0,r.setStyle)(s,"height",h+"px"),i.emit("autoHeight",h)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1CaTA":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{$player:s}=i.template;(0,r.def)(i,"cssVar",{value:(l,d)=>d?s.style.setProperty(l,d):getComputedStyle(s).getPropertyValue(l)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2FqhO":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"theme",{get:()=>i.cssVar("--art-theme"),set(s){i.cssVar("--art-theme",s)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1fQQs":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"type",{get:()=>i.option.type,set(s){i.option.type=s}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iBOQW:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let s=["mini","pip","fullscreen","fullscreenWeb"];(0,r.def)(i,"state",{get:()=>s.find(l=>i[l])||"standard",set(l){for(let d=0;d<s.length;d++){let f=s[d];f!==l&&i[f]&&(i[f]=!1)}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6vlBV":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{notice:s,i18n:l,template:d}=i;(0,r.def)(i,"subtitleOffset",{get:()=>{var f;return((f=d.$track)==null?void 0:f.offset)||0},set(f){let{cues:p}=i.subtitle;if(!d.$track||p.length===0)return;let h=(0,r.clamp)(f,-10,10);d.$track.offset=h;for(let m=0;m<p.length;m++){let g=p[m];g.originalStartTime=g.originalStartTime??g.startTime,g.originalEndTime=g.originalEndTime??g.endTime,g.startTime=(0,r.clamp)(g.originalStartTime+h,0,i.duration),g.endTime=(0,r.clamp)(g.originalEndTime+h,0,i.duration)}i.subtitle.update(),s.show=`${l.get("Subtitle Offset")}: ${f}s`,i.emit("subtitleOffset",f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eftqT:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{i18n:s,notice:l,proxy:d,template:{$video:f}}=i,p=!0;window.WebKitPlaybackTargetAvailabilityEvent&&f.webkitShowPlaybackTargetPicker?d(f,"webkitplaybacktargetavailabilitychanged",h=>{switch(h.availability){case"available":p=!0;break;case"not-available":p=!1}}):p=!1,(0,r.def)(i,"airplay",{value(){p?(f.webkitShowPlaybackTargetPicker(),i.emit("airplay")):l.show=s.get("AirPlay Not Available")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5SdyX":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){(0,r.def)(i,"quality",{set(s){let{controls:l,notice:d,i18n:f}=i,p=s.find(h=>h.default)||s[0];l.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:(p==null?void 0:p.html)||"",selector:s,onSelect:async h=>(await i.switchQuality(h.url),d.show=`${f.get("Switch Video")}: ${h.html}`,h.html)})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4HcqV":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{events:s,option:l,template:{$progress:d,$video:f}}=i,p=null,h=null,m=!1,g=!1,y=!1;s.hover(d,()=>{y=!0},()=>{y=!1}),i.on("setBar",async(w,v,b)=>{var T;let E=(T=i.controls)==null?void 0:T.thumbnails,{url:j,scale:x}=l.thumbnails;if(!E||!j)return;let k=w==="played"&&b&&r.isMobile;if(w==="hover"||k){if(m||(m=!0,h=await(0,r.loadImg)(j,x),g=!0),!g||!y)return;let B=d.clientWidth*v;(0,r.setStyle)(E,"display","flex"),B>0&&B<d.clientWidth?function(_){var X;let D=(X=i.controls)==null?void 0:X.thumbnails;if(!D)return;let{number:C,column:I,width:M,height:$,scale:P}=l.thumbnails,L=M*P||h.naturalWidth/I,R=$*P||L/(f.videoWidth/f.videoHeight),O=Math.floor(_/(d.clientWidth/C)),J=Math.ceil(O/I)-1;(0,r.setStyle)(D,"backgroundImage",`url(${h.src})`),(0,r.setStyle)(D,"height",`${R}px`),(0,r.setStyle)(D,"width",`${L}px`),(0,r.setStyle)(D,"backgroundPosition",`-${(O%I||I-1)*L}px -${J*R}px`),_<=L/2?(0,r.setStyle)(D,"left",0):_>d.clientWidth-L/2?(0,r.setStyle)(D,"left",`${d.clientWidth-L}px`):(0,r.setStyle)(D,"left",`${_-L/2}px`)}(B):r.isMobile||(0,r.setStyle)(E,"display","none"),k&&(clearTimeout(p),p=setTimeout(()=>{(0,r.setStyle)(E,"display","none")},500))}}),(0,r.def)(i,"thumbnails",{get:()=>i.option.thumbnails,set(w){w.url&&!i.option.isLive&&(i.option.thumbnails=w,clearTimeout(p),p=null,h=null,m=!1,g=!1)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fCWZK:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{option:s,storage:l,template:{$video:d,$poster:f}}=i;for(let h in s.moreVideoAttr)i.attr(h,s.moreVideoAttr[h]);s.muted&&(i.muted=s.muted),s.volume&&(d.volume=(0,r.clamp)(s.volume,0,1));let p=l.get("volume");for(let h in typeof p=="number"&&(d.volume=(0,r.clamp)(p,0,1)),s.poster&&(0,r.setStyle)(f,"backgroundImage",`url(${s.poster})`),s.autoplay&&(d.autoplay=s.autoplay),s.playsInline&&(d.playsInline=!0,d["webkit-playsinline"]=!0),s.theme&&(s.cssVar["--art-theme"]=s.theme),s.cssVar)i.cssVar(h,s.cssVar[h]);i.url=s.url}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f8Lv3:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>s);var r=t("../config"),c=e.interopDefault(r),i=t("../utils");function s(l){let{i18n:d,notice:f,option:p,constructor:h,proxy:m,template:{$player:g,$video:y,$poster:w}}=l,v=0;for(let b=0;b<c.default.events.length;b++)m(y,c.default.events[b],E=>{l.emit(`video:${E.type}`,E)});l.on("video:canplay",()=>{v=0,l.loading.show=!1}),l.once("video:canplay",()=>{l.loading.show=!1,l.controls.show=!0,l.mask.show=!0,l.isReady=!0,l.emit("ready")}),l.on("video:ended",()=>{p.loop?(l.seek=0,l.play(),l.controls.show=!1,l.mask.show=!1):(l.controls.show=!0,l.mask.show=!0)}),l.on("video:error",async b=>{v<h.RECONNECT_TIME_MAX?(await(0,i.sleep)(h.RECONNECT_SLEEP_TIME),v+=1,l.url=p.url,f.show=`${d.get("Reconnect")}: ${v}`,l.emit("error",b,v)):(l.mask.show=!0,l.loading.show=!1,l.controls.show=!0,(0,i.addClass)(g,"art-error"),await(0,i.sleep)(h.RECONNECT_SLEEP_TIME),f.show=d.get("Video Load Failed"))}),l.on("video:loadedmetadata",()=>{l.emit("resize"),i.isMobile&&(l.loading.show=!1,l.controls.show=!0,l.mask.show=!0)}),l.on("video:loadstart",()=>{l.loading.show=!0,l.mask.show=!1,l.controls.show=!0}),l.on("video:pause",()=>{l.controls.show=!0,l.mask.show=!0}),l.on("video:play",()=>{l.mask.show=!1,(0,i.setStyle)(w,"display","none")}),l.on("video:playing",()=>{l.mask.show=!1}),l.on("video:progress",()=>{l.playing&&(l.loading.show=!1)}),l.on("video:seeked",()=>{l.loading.show=!1,l.mask.show=!0}),l.on("video:seeking",()=>{l.loading.show=!0,l.mask.show=!1}),l.on("video:timeupdate",()=>{l.mask.show=!1}),l.on("video:waiting",()=>{l.loading.show=!0,l.mask.show=!1})}},{"../config":"lyjeQ","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8Z0Uf":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("../utils/component"),c=e.interopDefault(r),i=t("./fullscreen"),s=e.interopDefault(i),l=t("./fullscreenWeb"),d=e.interopDefault(l),f=t("./pip"),p=e.interopDefault(f),h=t("./playAndPause"),m=e.interopDefault(h),g=t("./progress"),y=e.interopDefault(g),w=t("./time"),v=e.interopDefault(w),b=t("./volume"),E=e.interopDefault(b),j=t("./setting"),x=e.interopDefault(j),k=t("./screenshot"),T=e.interopDefault(k),B=t("./airplay"),_=e.interopDefault(B),D=t("../utils");class C extends c.default{constructor(M){super(M),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:$}=M,{$player:P,$bottom:L}=this.art.template;M.on("mousemove",()=>{D.isMobile||(this.show=!0)}),M.on("click",()=>{D.isMobile?this.toggle():this.show=!0}),M.on("document:mousemove",R=>{this.isHover=(0,D.includeFromEvent)(R,L)}),M.on("video:timeupdate",()=>{!M.setting.show&&!this.isHover&&!M.isInput&&M.playing&&this.show&&Date.now()-this.timer>=$.CONTROL_HIDE_TIME&&(this.show=!1)}),M.on("control",R=>{R?((0,D.removeClass)(P,"art-hide-cursor"),(0,D.addClass)(P,"art-hover"),this.timer=Date.now()):((0,D.addClass)(P,"art-hide-cursor"),(0,D.removeClass)(P,"art-hover"))}),this.init()}init(){let{option:M}=this.art;M.isLive||this.add((0,y.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,m.default)({name:"playAndPause",position:"left",index:10})),this.add((0,E.default)({name:"volume",position:"left",index:20})),M.isLive||this.add((0,v.default)({name:"time",position:"left",index:30})),M.quality.length&&(0,D.sleep)().then(()=>{this.art.quality=M.quality}),M.screenshot&&!D.isMobile&&this.add((0,T.default)({name:"screenshot",position:"right",index:20})),M.setting&&this.add((0,x.default)({name:"setting",position:"right",index:30})),M.pip&&this.add((0,p.default)({name:"pip",position:"right",index:40})),M.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,_.default)({name:"airplay",position:"right",index:50})),M.fullscreenWeb&&this.add((0,d.default)({name:"fullscreenWeb",position:"right",index:60})),M.fullscreen&&this.add((0,s.default)({name:"fullscreen",position:"right",index:70}));for(let $=0;$<M.controls.length;$++)this.add(M.controls[$])}add(M){let $=typeof M=="function"?M(this.art):M,{$progress:P,$controlsLeft:L,$controlsRight:R}=this.art.template;switch($.position){case"top":this.$parent=P;break;case"left":this.$parent=L;break;case"right":this.$parent=R;break;default:(0,D.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add($)}check(M){M.$control_value.innerHTML=M.html;for(let $=0;$<M.$control_option.length;$++){let P=M.$control_option[$];P.default=P===M,P.default&&(0,D.inverseClass)(P.$control_item,"art-current")}}selector(M,$,P){let{proxy:L}=this.art.events;(0,D.addClass)($,"art-control-selector");let R=(0,D.createElement)("div");(0,D.addClass)(R,"art-selector-value"),(0,D.append)(R,M.html),$.innerText="",(0,D.append)($,R);let O=(0,D.createElement)("div");(0,D.addClass)(O,"art-selector-list"),(0,D.append)($,O);for(let X=0;X<M.selector.length;X++){let rt=M.selector[X],A=(0,D.createElement)("div");(0,D.addClass)(A,"art-selector-item"),rt.default&&(0,D.addClass)(A,"art-current"),A.dataset.index=X,A.dataset.value=rt.value,A.innerHTML=rt.html,(0,D.append)(O,A),(0,D.def)(rt,"$control_option",{get:()=>M.selector}),(0,D.def)(rt,"$control_item",{get:()=>A}),(0,D.def)(rt,"$control_value",{get:()=>R})}let J=L(O,"click",async X=>{let rt=X.composedPath()||[],A=M.selector.find(H=>H.$control_item===rt.find(U=>H.$control_item===U));this.check(A),M.onSelect&&(R.innerHTML=await M.onSelect.call(this.art,A,A.$control_item,X))});P.push(J)}}n.default=C},{"../utils/component":"18nVI","./fullscreen":"c61Lj","./fullscreenWeb":"03jeB","./pip":"u8l8e","./playAndPause":"ebXtb","./progress":"bgoVP","./time":"ikc2j","./volume":"b8NFx","./setting":"03o9l","./screenshot":"4KCF5","./airplay":"4IS2d","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"18nVI":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./dom"),c=t("./error"),i=t("option-validator"),s=e.interopDefault(i),l=t("../scheme");n.default=class{constructor(d){this.id=0,this.art=d,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,r.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(d){let{$player:f}=this.art.template,p=`art-${this.name}-show`;d?(0,r.addClass)(f,p):(0,r.removeClass)(f,p),this.art.emit(this.name,d)}toggle(){this.show=!this.show}add(d){let f=typeof d=="function"?d(this.art):d;if(f.html=f.html||"",(0,s.default)(f,l.ComponentOption),!this.$parent||!this.name||f.disable)return;let p=f.name||`${this.name}${this.id}`,h=this.cache.get(p);(0,c.errorHandle)(!h,`Can't add an existing [${p}] to the [${this.name}]`),this.id+=1;let m=(0,r.createElement)("div");(0,r.addClass)(m,`art-${this.name}`),(0,r.addClass)(m,`art-${this.name}-${p}`);let g=Array.from(this.$parent.children);m.dataset.index=f.index||this.id;let y=g.find(v=>Number(v.dataset.index)>=Number(m.dataset.index));y?y.insertAdjacentElement("beforebegin",m):(0,r.append)(this.$parent,m),f.html&&(0,r.append)(m,f.html),f.style&&(0,r.setStyles)(m,f.style),f.tooltip&&(0,r.tooltip)(m,f.tooltip);let w=[];if(f.click){let v=this.art.events.proxy(m,"click",b=>{b.preventDefault(),f.click.call(this.art,this,b)});w.push(v)}return f.selector&&["left","right"].includes(f.position)&&this.selector(f,m,w),this[p]=m,this.cache.set(p,{$ref:m,events:w,option:f}),f.mounted&&f.mounted.call(this.art,m),m}remove(d){let f=this.cache.get(d);(0,c.errorHandle)(f,`Can't find [${d}] from the [${this.name}]`),f.option.beforeUnmount&&f.option.beforeUnmount.call(this.art,f.$ref);for(let p=0;p<f.events.length;p++)this.art.events.remove(f.events[p]);this.cache.delete(d),delete this[d],(0,r.remove)(f.$ref)}update(d){let f=this.cache.get(d.name);return f&&(d=Object.assign(f.option,d),this.remove(d.name)),this.add(d)}}},{"./dom":"bSNiV","./error":"hwmZz","option-validator":"bAWi2","../scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],c61Lj:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Fullscreen"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s,h=(0,r.append)(l,f.fullscreenOn),m=(0,r.append)(l,f.fullscreenOff);(0,r.setStyle)(m,"display","none"),d(l,"click",()=>{s.fullscreen=!s.fullscreen}),s.on("fullscreen",g=>{g?((0,r.tooltip)(l,p.get("Exit Fullscreen")),(0,r.setStyle)(h,"display","none"),(0,r.setStyle)(m,"display","inline-flex")):((0,r.tooltip)(l,p.get("Fullscreen")),(0,r.setStyle)(h,"display","inline-flex"),(0,r.setStyle)(m,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03jeB":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Web Fullscreen"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s,h=(0,r.append)(l,f.fullscreenWebOn),m=(0,r.append)(l,f.fullscreenWebOff);(0,r.setStyle)(m,"display","none"),d(l,"click",()=>{s.fullscreenWeb=!s.fullscreenWeb}),s.on("fullscreenWeb",g=>{g?((0,r.tooltip)(l,p.get("Exit Web Fullscreen")),(0,r.setStyle)(h,"display","none"),(0,r.setStyle)(m,"display","inline-flex")):((0,r.tooltip)(l,p.get("Web Fullscreen")),(0,r.setStyle)(h,"display","inline-flex"),(0,r.setStyle)(m,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],u8l8e:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("PIP Mode"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s;(0,r.append)(l,f.pip),d(l,"click",()=>{s.pip=!s.pip}),s.on("pip",h=>{(0,r.tooltip)(l,p.get(h?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ebXtb:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,mounted:l=>{let{proxy:d,icons:f,i18n:p}=s,h=(0,r.append)(l,f.play),m=(0,r.append)(l,f.pause);function g(){(0,r.setStyle)(h,"display","flex"),(0,r.setStyle)(m,"display","none")}function y(){(0,r.setStyle)(h,"display","none"),(0,r.setStyle)(m,"display","flex")}(0,r.tooltip)(h,p.get("Play")),(0,r.tooltip)(m,p.get("Pause")),d(h,"click",()=>{s.play()}),d(m,"click",()=>{s.pause()}),s.playing?y():g(),s.on("video:playing",()=>{y()}),s.on("video:pause",()=>{g()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bgoVP:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"getPosFromEvent",()=>c),e.export(n,"setCurrentTime",()=>i),e.export(n,"default",()=>s);var r=t("../utils");function c(l,d){let{$progress:f}=l.template,{left:p}=(0,r.getRect)(f),h=r.isMobile?d.touches[0].clientX:d.clientX,m=(0,r.clamp)(h-p,0,f.clientWidth),g=m/f.clientWidth*l.duration,y=(0,r.secondToTime)(g),w=(0,r.clamp)(m/f.clientWidth,0,1);return{second:g,time:y,width:m,percentage:w}}function i(l,d){if(l.isRotate){let f=d.touches[0].clientY/l.height,p=f*l.duration;l.emit("setBar","played",f,d),l.seek=p}else{let{second:f,percentage:p}=c(l,d);l.emit("setBar","played",p,d),l.seek=f}}function s(l){return d=>{let{icons:f,option:p,proxy:h}=d;return{...l,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:m=>{let g=null,y=!1,w=(0,r.query)(".art-progress-hover",m),v=(0,r.query)(".art-progress-loaded",m),b=(0,r.query)(".art-progress-played",m),E=(0,r.query)(".art-progress-highlight",m),j=(0,r.query)(".art-progress-indicator",m),x=(0,r.query)(".art-progress-tip",m);function k(T,B){let{width:_,time:D}=B||c(d,T);x.innerText=D;let C=x.clientWidth;_<=C/2?(0,r.setStyle)(x,"left",0):_>m.clientWidth-C/2?(0,r.setStyle)(x,"left",`${m.clientWidth-C}px`):(0,r.setStyle)(x,"left",`${_-C/2}px`)}f.indicator?(0,r.append)(j,f.indicator):(0,r.setStyle)(j,"backgroundColor","var(--art-theme)"),d.on("setBar",function(T,B,_){let D=T==="played"&&_&&r.isMobile;T==="loaded"&&(0,r.setStyle)(v,"width",`${100*B}%`),T==="hover"&&(0,r.setStyle)(w,"width",`${100*B}%`),T==="played"&&((0,r.setStyle)(b,"width",`${100*B}%`),(0,r.setStyle)(j,"left",`${100*B}%`)),D&&((0,r.setStyle)(x,"display","flex"),k(_,{width:m.clientWidth*B,time:(0,r.secondToTime)(B*d.duration)}),clearTimeout(g),g=setTimeout(()=>{(0,r.setStyle)(x,"display","none")},500))}),d.on("video:loadedmetadata",function(){E.innerText="";for(let T=0;T<p.highlight.length;T++){let B=p.highlight[T],_=(0,r.clamp)(B.time,0,d.duration)/d.duration*100,D=`<span data-text="${B.text}" data-time="${B.time}" style="left: ${_}%"></span>`;(0,r.append)(E,D)}}),d.on("video:progress",()=>{d.emit("setBar","loaded",d.loaded)}),d.constructor.USE_RAF?d.on("raf",()=>{d.emit("setBar","played",d.played)}):d.on("video:timeupdate",()=>{d.emit("setBar","played",d.played)}),d.on("video:ended",()=>{d.emit("setBar","played",1)}),d.emit("setBar","loaded",d.loaded||0),r.isMobile||(h(m,"click",T=>{T.target!==j&&i(d,T)}),h(m,"mousemove",T=>{let{percentage:B}=c(d,T);d.emit("setBar","hover",B,T),(0,r.setStyle)(x,"display","flex"),(0,r.includeFromEvent)(T,E)?function(_){let{width:D}=c(d,_),{text:C}=_.target.dataset;x.innerText=C;let I=x.clientWidth;D<=I/2?(0,r.setStyle)(x,"left",0):D>m.clientWidth-I/2?(0,r.setStyle)(x,"left",`${m.clientWidth-I}px`):(0,r.setStyle)(x,"left",`${D-I/2}px`)}(T):k(T)}),h(m,"mouseleave",T=>{(0,r.setStyle)(x,"display","none"),d.emit("setBar","hover",0,T)}),h(m,"mousedown",T=>{y=T.button===0}),d.on("document:mousemove",T=>{if(y){let{second:B,percentage:_}=c(d,T);d.emit("setBar","played",_,T),d.seek=B}}),d.on("document:mouseup",()=>{y&&(y=!1)}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ikc2j:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,style:r.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:l=>{function d(){let p=`${(0,r.secondToTime)(s.currentTime)} / ${(0,r.secondToTime)(s.duration)}`;p!==l.innerText&&(l.innerText=p)}d();let f=["video:loadedmetadata","video:timeupdate","video:progress"];for(let p=0;p<f.length;p++)s.on(f[p],d)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],b8NFx:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,mounted:l=>{let{proxy:d,icons:f}=s,p=(0,r.append)(l,f.volume),h=(0,r.append)(l,f.volumeClose),m=(0,r.append)(l,'<div class="art-volume-panel"></div>'),g=(0,r.append)(m,'<div class="art-volume-inner"></div>'),y=(0,r.append)(g,'<div class="art-volume-val"></div>'),w=(0,r.append)(g,'<div class="art-volume-slider"></div>'),v=(0,r.append)(w,'<div class="art-volume-handle"></div>'),b=(0,r.append)(v,'<div class="art-volume-loaded"></div>'),E=(0,r.append)(w,'<div class="art-volume-indicator"></div>');function j(k){let{top:T,height:B}=(0,r.getRect)(w);return 1-(k.clientY-T)/B}function x(){if(s.muted||s.volume===0)(0,r.setStyle)(p,"display","none"),(0,r.setStyle)(h,"display","flex"),(0,r.setStyle)(E,"top","100%"),(0,r.setStyle)(b,"top","100%"),y.innerText=0;else{let k=100*s.volume;(0,r.setStyle)(p,"display","flex"),(0,r.setStyle)(h,"display","none"),(0,r.setStyle)(E,"top",`${100-k}%`),(0,r.setStyle)(b,"top",`${100-k}%`),y.innerText=Math.floor(k)}}if(x(),s.on("video:volumechange",x),d(p,"click",()=>{s.muted=!0}),d(h,"click",()=>{s.muted=!1}),r.isMobile)(0,r.setStyle)(m,"display","none");else{let k=!1;d(w,"mousedown",T=>{k=T.button===0,s.volume=j(T)}),s.on("document:mousemove",T=>{k&&(s.muted=!1,s.volume=j(T))}),s.on("document:mouseup",()=>{k&&(k=!1)})}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03o9l":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Show Setting"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s;(0,r.append)(l,f.setting),d(l,"click",()=>{s.setting.toggle(),s.setting.resize()}),s.on("setting",h=>{(0,r.tooltip)(l,p.get(h?"Hide Setting":"Show Setting"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4KCF5":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Screenshot"),mounted:l=>{let{proxy:d,icons:f}=s;(0,r.append)(l,f.screenshot),d(l,"click",()=>{s.screenshot()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4IS2d":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("AirPlay"),mounted:l=>{let{proxy:d,icons:f}=s;(0,r.append)(l,f.airplay),d(l,"click",()=>s.airplay())}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2KYsr":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("../utils"),c=t("../utils/component"),i=e.interopDefault(c),s=t("./playbackRate"),l=e.interopDefault(s),d=t("./aspectRatio"),f=e.interopDefault(d),p=t("./flip"),h=e.interopDefault(p),m=t("./info"),g=e.interopDefault(m),y=t("./version"),w=e.interopDefault(y),v=t("./close"),b=e.interopDefault(v);class E extends i.default{constructor(x){super(x),this.name="contextmenu",this.$parent=x.template.$contextmenu,r.isMobile||this.init()}init(){let{option:x,proxy:k,template:{$player:T,$contextmenu:B}}=this.art;x.playbackRate&&this.add((0,l.default)({name:"playbackRate",index:10})),x.aspectRatio&&this.add((0,f.default)({name:"aspectRatio",index:20})),x.flip&&this.add((0,h.default)({name:"flip",index:30})),this.add((0,g.default)({name:"info",index:40})),this.add((0,w.default)({name:"version",index:50})),this.add((0,b.default)({name:"close",index:60}));for(let _=0;_<x.contextmenu.length;_++)this.add(x.contextmenu[_]);k(T,"contextmenu",_=>{if(!this.art.constructor.CONTEXTMENU)return;_.preventDefault(),this.show=!0;let D=_.clientX,C=_.clientY,{height:I,width:M,left:$,top:P}=(0,r.getRect)(T),{height:L,width:R}=(0,r.getRect)(B),O=D-$,J=C-P;D+R>$+M&&(O=M-R),C+L>P+I&&(J=I-L),(0,r.setStyles)(B,{top:`${J}px`,left:`${O}px`})}),k(T,"click",_=>{(0,r.includeFromEvent)(_,B)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}n.default=E},{"../utils":"71aH7","../utils/component":"18nVI","./playbackRate":"69eLi","./aspectRatio":"lUefg","./flip":"kysiM","./info":"gqIgJ","./version":"kRU7C","./close":"jQ8Pm","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"69eLi":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>{let{i18n:l,constructor:{PLAYBACK_RATE:d}}=s,f=d.map(p=>`<span data-value="${p}">${p===1?l.get("Normal"):p.toFixed(1)}</span>`).join("");return{...i,html:`${l.get("Play Speed")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(s.playbackRate=Number(m),p.show=!1)},mounted:p=>{let h=(0,r.query)('[data-value="1"]',p);h&&(0,r.inverseClass)(h,"art-current"),s.on("video:ratechange",()=>{let m=(0,r.queryAll)("span",p).find(g=>Number(g.dataset.value)===s.playbackRate);m&&(0,r.inverseClass)(m,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lUefg:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>{let{i18n:l,constructor:{ASPECT_RATIO:d}}=s,f=d.map(p=>`<span data-value="${p}">${p==="default"?l.get("Default"):p}</span>`).join("");return{...i,html:`${l.get("Aspect Ratio")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(s.aspectRatio=m,p.show=!1)},mounted:p=>{let h=(0,r.query)('[data-value="default"]',p);h&&(0,r.inverseClass)(h,"art-current"),s.on("aspectRatio",m=>{let g=(0,r.queryAll)("span",p).find(y=>y.dataset.value===m);g&&(0,r.inverseClass)(g,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kysiM:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return s=>{let{i18n:l,constructor:{FLIP:d}}=s,f=d.map(p=>`<span data-value="${p}">${l.get((0,r.capitalize)(p))}</span>`).join("");return{...i,html:`${l.get("Video Flip")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(s.flip=m.toLowerCase(),p.show=!1)},mounted:p=>{let h=(0,r.query)('[data-value="normal"]',p);h&&(0,r.inverseClass)(h,"art-current"),s.on("flip",m=>{let g=(0,r.queryAll)("span",p).find(y=>y.dataset.value===m);g&&(0,r.inverseClass)(g,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gqIgJ:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){return i=>({...c,html:i.i18n.get("Video Info"),click:s=>{i.info.show=!0,s.show=!1}})}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kRU7C:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){return{...c,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.2.1</a>'}}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jQ8Pm:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){return i=>({...c,html:i.i18n.get("Close"),click:s=>{s.show=!1}})}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"02ajl":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class s extends i.default{constructor(d){super(d),this.name="info",r.isMobile||this.init()}init(){let{proxy:d,constructor:f,template:{$infoPanel:p,$infoClose:h,$video:m}}=this.art;d(h,"click",()=>{this.show=!1});let g=null,y=(0,r.queryAll)("[data-video]",p)||[];this.art.on("destroy",()=>clearTimeout(g)),function w(){for(let v=0;v<y.length;v++){let b=y[v],E=m[b.dataset.video],j=typeof E=="number"?E.toFixed(2):E;b.innerText!==j&&(b.innerText=j)}g=setTimeout(w,f.INFO_LOOP_TIME)}()}}n.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eSWto:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c),s=t("option-validator"),l=e.interopDefault(s),d=t("./scheme"),f=e.interopDefault(d);class p extends i.default{constructor(m){super(m),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(m.option.subtitle);let g=!1;m.on("video:timeupdate",()=>{if(!this.url)return;let y=this.art.template.$video.webkitDisplayingFullscreen;typeof y=="boolean"&&y!==g&&(g=y,this.createTrack(y?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(m){this.switch(m)}get textTrack(){var m,g;return(g=(m=this.art.template.$video)==null?void 0:m.textTracks)==null?void 0:g[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(m,g){let{$subtitle:y}=this.art.template;return typeof m=="object"?(0,r.setStyles)(y,m):(0,r.setStyle)(y,m,g)}update(){let{option:{subtitle:m},template:{$subtitle:g}}=this.art;g.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),g.innerHTML=this.activeCues.map((y,w)=>y.text.split(/\r?\n/).filter(v=>v.trim()).map(v=>`<div class="art-subtitle-line" data-group="${w}">${m.escape?(0,r.escape)(v):v}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(m,g={}){let{i18n:y,notice:w,option:v}=this.art,b={...v.subtitle,...g,url:m},E=await this.init(b);return g.name&&(w.show=`${y.get("Switch Subtitle")}: ${g.name}`),E}createTrack(m,g){let{template:y,proxy:w,option:v}=this.art,{$video:b,$track:E}=y,j=(0,r.createElement)("track");j.default=!0,j.kind=m,j.src=g,j.label=v.subtitle.name||"Artplayer",j.track.mode="hidden",j.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),E.onload=null,(0,r.remove)(E),(0,r.append)(b,j),y.$track=j,this.destroyEvent=w(this.textTrack,"cuechange",()=>this.update())}async init(m){let{notice:g,template:{$subtitle:y}}=this.art;return this.textTrack?((0,l.default)(m,f.default.subtitle),m.url?(this.option=m,this.style(m.style),fetch(m.url).then(w=>w.arrayBuffer()).then(w=>{let v=new TextDecoder(m.encoding).decode(w);switch(m.type||(0,r.getExt)(m.url)){case"srt":{let b=(0,r.srtToVtt)(v),E=m.onVttLoad(b);return(0,r.vttToBlob)(E)}case"ass":{let b=(0,r.assToVtt)(v),E=m.onVttLoad(b);return(0,r.vttToBlob)(E)}case"vtt":{let b=m.onVttLoad(v);return(0,r.vttToBlob)(b)}default:return m.url}}).then(w=>(y.innerHTML="",this.url===w||(URL.revokeObjectURL(this.url),this.createTrack("metadata",w)),w)).catch(w=>{throw y.innerHTML="",g.show=w,w})):void 0):null}}n.default=p},{"./utils":"71aH7","./utils/component":"18nVI","option-validator":"bAWi2","./scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jo4S1:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./clickInit"),c=e.interopDefault(r),i=t("./hoverInit"),s=e.interopDefault(i),l=t("./moveInit"),d=e.interopDefault(l),f=t("./resizeInit"),p=e.interopDefault(f),h=t("./gestureInit"),m=e.interopDefault(h),g=t("./viewInit"),y=e.interopDefault(g),w=t("./documentInit"),v=e.interopDefault(w),b=t("./updateInit"),E=e.interopDefault(b),j=t("./restoreInit"),x=e.interopDefault(j);n.default=class{constructor(k){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,c.default)(k,this),(0,s.default)(k,this),(0,d.default)(k,this),(0,p.default)(k,this),(0,m.default)(k,this),(0,y.default)(k,this),(0,v.default)(k,this),(0,E.default)(k,this),(0,x.default)(k,this)}proxy(k,T,B,_={}){if(Array.isArray(T))return T.map(C=>this.proxy(k,C,B,_));k.addEventListener(T,B,_);let D=()=>k.removeEventListener(T,B,_);return this.destroyEvents.push(D),D}hover(k,T,B){T&&this.proxy(k,"mouseenter",T),B&&this.proxy(k,"mouseleave",B)}remove(k){let T=this.destroyEvents.indexOf(k);T>-1&&(k(),this.destroyEvents.splice(T,1))}destroy(){for(let k=0;k<this.destroyEvents.length;k++)this.destroyEvents[k]()}}},{"./clickInit":"6UrCm","./hoverInit":"4jWHi","./moveInit":"eqaUm","./resizeInit":"eDXPO","./gestureInit":"95GtS","./viewInit":"InUBx","./documentInit":"hoLfM","./updateInit":"cl8m3","./restoreInit":"bK8As","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6UrCm":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i,s){let{constructor:l,template:{$player:d,$video:f}}=i;s.proxy(document,["click","contextmenu"],h=>{(0,r.includeFromEvent)(h,d)?(i.isInput=h.target.tagName==="INPUT",i.isFocus=!0,i.emit("focus",h)):(i.isInput=!1,i.isFocus=!1,i.emit("blur",h))});let p=[];s.proxy(f,"click",h=>{let m=Date.now();p.push(m);let{MOBILE_CLICK_PLAY:g,DBCLICK_TIME:y,MOBILE_DBCLICK_PLAY:w,DBCLICK_FULLSCREEN:v}=l,b=p.filter(E=>m-E<=y);switch(b.length){case 1:i.emit("click",h),r.isMobile?!i.isLock&&g&&i.toggle():i.toggle(),p=b;break;case 2:i.emit("dblclick",h),r.isMobile?!i.isLock&&w&&i.toggle():v&&(i.fullscreen=!i.fullscreen),p=[];break;default:p=[]}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4jWHi":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i,s){let{$player:l}=i.template;s.hover(l,d=>{(0,r.addClass)(l,"art-hover"),i.emit("hover",!0,d)},d=>{(0,r.removeClass)(l,"art-hover"),i.emit("hover",!1,d)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eqaUm:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c,i){let{$player:s}=c.template;i.proxy(s,"mousemove",l=>{c.emit("mousemove",l)})}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eDXPO:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i,s){let{option:l,constructor:d}=i;i.on("resize",()=>{let{aspectRatio:p,notice:h}=i;i.state==="standard"&&l.autoSize&&i.autoSize(),i.aspectRatio=p,h.show=""});let f=(0,r.debounce)(()=>i.emit("resize"),d.RESIZE_TIME);s.proxy(window,["orientationchange","resize"],()=>f()),screen&&screen.orientation&&screen.orientation.onchange&&s.proxy(screen.orientation,"change",()=>f())}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"95GtS":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>i);var r=t("../utils"),c=t("../control/progress");function i(s,l){if(r.isMobile&&!s.option.isLive){let{$video:d,$progress:f}=s.template,p=null,h=!1,m=0,g=0,y=0,w=b=>{if(b.touches.length===1&&!s.isLock){p===f&&(0,c.setCurrentTime)(s,b),h=!0;let{pageX:E,pageY:j}=b.touches[0];m=E,g=j,y=s.currentTime}},v=b=>{if(b.touches.length===1&&h&&s.duration){let{pageX:E,pageY:j}=b.touches[0],x=function(B,_,D,C){var I=_-C,M=D-B,$=0;if(2>Math.abs(M)&&2>Math.abs(I))return $;var P=180*Math.atan2(I,M)/Math.PI;return P>=-45&&P<45?$=4:P>=45&&P<135?$=1:P>=-135&&P<-45?$=2:(P>=135&&P<=180||P>=-180&&P<-135)&&($=3),$}(m,g,E,j),k=[3,4].includes(x),T=[1,2].includes(x);if(k&&!s.isRotate||T&&s.isRotate){let B=(0,r.clamp)((E-m)/s.width,-1,1),_=(0,r.clamp)((j-g)/s.height,-1,1),D=s.isRotate?_:B,C=p===d?s.constructor.TOUCH_MOVE_RATIO:1,I=(0,r.clamp)(y+s.duration*D*C,0,s.duration);s.seek=I,s.emit("setBar","played",(0,r.clamp)(I/s.duration,0,1),b),s.notice.show=`${(0,r.secondToTime)(I)} / ${(0,r.secondToTime)(s.duration)}`}}};l.proxy(f,"touchstart",b=>{p=f,w(b)}),l.proxy(d,"touchstart",b=>{p=d,w(b)}),l.proxy(d,"touchmove",v),l.proxy(f,"touchmove",v),l.proxy(document,"touchend",()=>{h&&(m=0,g=0,y=0,h=!1,p=null)})}}},{"../utils":"71aH7","../control/progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],InUBx:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i,s){let{option:l,constructor:d,template:{$container:f}}=i,p=(0,r.throttle)(()=>{i.emit("view",(0,r.isInViewport)(f,d.SCROLL_GAP))},d.SCROLL_TIME);s.proxy(window,"scroll",()=>p()),i.on("view",h=>{l.autoMini&&(i.mini=!h)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hoLfM:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c,i){i.proxy(document,"mousemove",s=>{c.emit("document:mousemove",s)}),i.proxy(document,"mouseup",s=>{c.emit("document:mouseup",s)})}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cl8m3:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){if(c.constructor.USE_RAF){let i=null;(function s(){c.playing&&c.emit("raf"),c.isDestroy||(i=requestAnimationFrame(s))})(),c.on("destroy",()=>{cancelAnimationFrame(i)})}}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bK8As:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c,i){}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6NoFy":[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var e=t("./utils");n.default=class{constructor(r){this.art=r,this.keys={},r.option.hotkey&&!e.isMobile&&this.init()}init(){let{proxy:r,constructor:c}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=c.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=c.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=c.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=c.VOLUME_STEP}),r(document,"keydown",i=>{if(this.art.isFocus){let s=document.activeElement.tagName.toUpperCase(),l=document.activeElement.getAttribute("contenteditable");if(s!=="INPUT"&&s!=="TEXTAREA"&&l!==""&&l!=="true"&&!i.altKey&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey){let d=this.keys[i.code];if(d){i.preventDefault();for(let f=0;f<d.length;f++)d[f].call(this.art,i);this.art.emit("hotkey",i)}}}this.art.emit("keydown",i)})}add(r,c){return this.keys[r]?this.keys[r].push(c):this.keys[r]=[c],this}remove(r,c){if(this.keys[r]){let i=this.keys[r].indexOf(c);i!==-1&&this.keys[r].splice(i,1)}return this}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6G6hZ":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./utils/component"),c=e.interopDefault(r);class i extends c.default{constructor(l){super(l);let{option:d,template:{$layer:f}}=l;this.name="layer",this.$parent=f;for(let p=0;p<d.layers.length;p++)this.add(d.layers[p])}}n.default=i},{"./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3dsEe":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class s extends i.default{constructor(d){super(d),this.name="loading",(0,r.append)(d.template.$loading,d.icons.loading)}}n.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],dWGTw:[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var e=t("./utils");n.default=class{constructor(r){this.art=r,this.timer=null}set show(r){let{constructor:c,template:{$player:i,$noticeInner:s}}=this.art;r?(s.innerText=r instanceof Error?r.message.trim():r,(0,e.addClass)(i,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{s.innerText="",(0,e.removeClass)(i,"art-notice-show")},c.NOTICE_TIME)):(0,e.removeClass)(i,"art-notice-show")}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5POkG":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class s extends i.default{constructor(d){super(d),this.name="mask";let{template:f,icons:p,events:h}=d,m=(0,r.append)(f.$state,p.state),g=(0,r.append)(f.$state,p.error);(0,r.setStyle)(g,"display","none"),d.on("destroy",()=>{(0,r.setStyle)(m,"display","none"),(0,r.setStyle)(g,"display",null)}),h.proxy(f.$state,"click",()=>d.play())}}n.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6OeNg":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("../utils"),c=t("bundle-text:./loading.svg"),i=e.interopDefault(c),s=t("bundle-text:./state.svg"),l=e.interopDefault(s),d=t("bundle-text:./check.svg"),f=e.interopDefault(d),p=t("bundle-text:./play.svg"),h=e.interopDefault(p),m=t("bundle-text:./pause.svg"),g=e.interopDefault(m),y=t("bundle-text:./volume.svg"),w=e.interopDefault(y),v=t("bundle-text:./volume-close.svg"),b=e.interopDefault(v),E=t("bundle-text:./screenshot.svg"),j=e.interopDefault(E),x=t("bundle-text:./setting.svg"),k=e.interopDefault(x),T=t("bundle-text:./arrow-left.svg"),B=e.interopDefault(T),_=t("bundle-text:./arrow-right.svg"),D=e.interopDefault(_),C=t("bundle-text:./playback-rate.svg"),I=e.interopDefault(C),M=t("bundle-text:./aspect-ratio.svg"),$=e.interopDefault(M),P=t("bundle-text:./config.svg"),L=e.interopDefault(P),R=t("bundle-text:./pip.svg"),O=e.interopDefault(R),J=t("bundle-text:./lock.svg"),X=e.interopDefault(J),rt=t("bundle-text:./unlock.svg"),A=e.interopDefault(rt),H=t("bundle-text:./fullscreen-off.svg"),U=e.interopDefault(H),N=t("bundle-text:./fullscreen-on.svg"),Q=e.interopDefault(N),it=t("bundle-text:./fullscreen-web-off.svg"),ot=e.interopDefault(it),pt=t("bundle-text:./fullscreen-web-on.svg"),$t=e.interopDefault(pt),Lt=t("bundle-text:./switch-on.svg"),Rt=e.interopDefault(Lt),Ht=t("bundle-text:./switch-off.svg"),gt=e.interopDefault(Ht),Y=t("bundle-text:./flip.svg"),pe=e.interopDefault(Y),dt=t("bundle-text:./error.svg"),Ct=e.interopDefault(dt),Tt=t("bundle-text:./close.svg"),vt=e.interopDefault(Tt),ht=t("bundle-text:./airplay.svg"),zt=e.interopDefault(ht);n.default=class{constructor(he){let te={loading:i.default,state:l.default,play:h.default,pause:g.default,check:f.default,volume:w.default,volumeClose:b.default,screenshot:j.default,setting:k.default,pip:O.default,arrowLeft:B.default,arrowRight:D.default,playbackRate:I.default,aspectRatio:$.default,config:L.default,lock:X.default,flip:pe.default,unlock:A.default,fullscreenOff:U.default,fullscreenOn:Q.default,fullscreenWebOff:ot.default,fullscreenWebOn:$t.default,switchOn:Rt.default,switchOff:gt.default,error:Ct.default,close:vt.default,airplay:zt.default,...he.option.icons};for(let Nt in te)(0,r.def)(this,Nt,{get:()=>(0,r.getIcon)(Nt,te[Nt])})}}},{"../utils":"71aH7","bundle-text:./loading.svg":"7tDub","bundle-text:./state.svg":"1ElZc","bundle-text:./check.svg":"lmgoP","bundle-text:./play.svg":"lVWoQ","bundle-text:./pause.svg":"5Mnax","bundle-text:./volume.svg":"w3eIa","bundle-text:./volume-close.svg":"rHjo1","bundle-text:./screenshot.svg":"2KcqM","bundle-text:./setting.svg":"8rQMV","bundle-text:./arrow-left.svg":"kqGBE","bundle-text:./arrow-right.svg":"aFjpC","bundle-text:./playback-rate.svg":"lx7ZM","bundle-text:./aspect-ratio.svg":"2sEjf","bundle-text:./config.svg":"fQTgE","bundle-text:./pip.svg":"2CaxO","bundle-text:./lock.svg":"aCGnW","bundle-text:./unlock.svg":"bTrAV","bundle-text:./fullscreen-off.svg":"bA3p0","bundle-text:./fullscreen-on.svg":"fTuY8","bundle-text:./fullscreen-web-off.svg":"tvKf4","bundle-text:./fullscreen-web-on.svg":"1F1oB","bundle-text:./switch-on.svg":"7qNHs","bundle-text:./switch-off.svg":"28aV8","bundle-text:./flip.svg":"1uXI6","bundle-text:./error.svg":"9f4dh","bundle-text:./close.svg":"4nTtS","bundle-text:./airplay.svg":"cDPXC","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7tDub":[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><path fill="none" class="bk" d="M0 0h100v100H0z"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(30 105.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(60 75.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(90 65 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(120 58.66 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(150 54.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(180 50 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-90 35 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>'},{}],"1ElZc":[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg>'},{}],lmgoP:[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"/></svg>'},{}],lVWoQ:[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"/></svg>'},{}],"5Mnax":[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zm8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"/></svg>'},{}],w3eIa:[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zm4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"/><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"/></svg>'},{}],rHjo1:[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"/><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zm5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"/></svg>'},{}],"2KcqM":[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10Zm0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8Z"/></svg>'},{}],"8rQMV":[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'},{}],kqGBE:[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z" fill="#fff"/></svg>'},{}],aFjpC:[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z" fill="#fff"/></svg>'},{}],lx7ZM:[function(t,o,n){o.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M10 8v8l6-4-6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2zM5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8zm0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4l.8-.7zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22l.1-1zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2sEjf":[function(t,o,n){o.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width:100%;height:100%;transform:translate(0,0)"><defs><clipPath id="a"><path d="M0 0h88v88H0z"/></clipPath></defs><g style="display:block" clip-path="url('#a')"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0zm-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13-2.83-2.82zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8h56z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>`},{}],fQTgE:[function(t,o,n){o.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M15 17h6v1h-6v-1zm-4 0H3v1h8v2h1v-5h-1v2zm3-9h1V3h-1v2H3v1h11v2zm4-3v1h3V5h-3zM6 14h1V9H6v2H3v1h3v2zm4-2h11v-1H10v1z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2CaxO":[function(t,o,n){o.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25 17h-8v6h8v-6Zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2Zm-2 .02H9V10.97h18v14.05Z"/></svg>'},{}],aCGnW:[function(t,o,n){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128z" fill="#fff"/></svg>'},{}],bTrAV:[function(t,o,n){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816z" fill="#fff"/></svg>'},{}],bA3p0:[function(t,o,n){o.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768v170.667zM341.333 384h-256v-85.333H256V128h85.333v256zM768 725.333V896h-85.333V640h256v85.333H768zM341.333 640v256H256V725.333H85.333V640h256z"/></svg>'},{}],fTuY8:[function(t,o,n){o.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256V256zM256 398.222V256h142.222V142.222h-256v256H256zm512 227.556V768H625.778v113.778h256v-256H768zM398.222 768H256V625.778H142.222v256h256V768z"/></svg>'},{}],tvKf4:[function(t,o,n){o.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384H896zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448H256z"/></svg>'},{}],"1F1oB":[function(t,o,n){o.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448H448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384H704z"/></svg>'},{}],"7qNHs":[function(t,o,n){o.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1664 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024zm0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448z"/></svg>'},{}],"28aV8":[function(t,o,n){o.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1740 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898zm-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.872 463.872 0 0 1 511.334 48.435v.205z"/></svg>'},{}],"1uXI6":[function(t,o,n){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M554.667 810.667V896h-85.334v-85.333h85.334zm-384-632.662a42.667 42.667 0 0 1 34.986 18.219l203.904 291.328a42.667 42.667 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667zm682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.667 42.667 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.667 42.667 0 0 1 34.944-18.219zM554.667 640v85.333h-85.334V640h85.334zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334h85.334zm0-170.667V384h-85.334v-85.333h85.334zm0-170.667v85.333h-85.334V128h85.334z" fill="#fff"/></svg>'},{}],"9f4dh":[function(t,o,n){o.exports='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.082 93.082 0 0 1 34.448 33.341zM512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88zm0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2z"/></svg>'},{}],"4nTtS":[function(t,o,n){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733L571.733 512z"/></svg>'},{}],cDPXC:[function(t,o,n){o.exports='<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],"3eYNH":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("./flip"),c=e.interopDefault(r),i=t("./aspectRatio"),s=e.interopDefault(i),l=t("./playbackRate"),d=e.interopDefault(l),f=t("./subtitleOffset"),p=e.interopDefault(f),h=t("../utils/component"),m=e.interopDefault(h),g=t("../utils");class y extends m.default{constructor(v){super(v);let{option:b,controls:E,template:{$setting:j}}=v;this.name="setting",this.$parent=j,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...b.settings],b.setting&&(this.format(),this.render(),v.on("blur",()=>{this.show&&(this.show=!1,this.render())}),v.on("focus",x=>{let k=(0,g.includeFromEvent)(x,E.setting),T=(0,g.includeFromEvent)(x,this.$parent);!this.show||k||T||(this.show=!1,this.render())}),v.on("resize",()=>this.resize()))}get builtin(){let v=[],{option:b}=this.art;return b.playbackRate&&v.push((0,d.default)(this.art)),b.aspectRatio&&v.push((0,s.default)(this.art)),b.flip&&v.push((0,c.default)(this.art)),b.subtitleOffset&&v.push((0,p.default)(this.art)),v}traverse(v,b=this.option){var E;for(let j=0;j<b.length;j++){let x=b[j];v(x),(E=x.selector)!=null&&E.length&&this.traverse.call(this,v,x.selector)}}check(v){v.$parent.tooltip=v.html,this.traverse(b=>{b.default=b===v,b.default&&b.$item&&(0,g.inverseClass)(b.$item,"art-current")},v.$option),this.render(v.$parents)}format(v=this.option,b,E,j=[]){for(let x=0;x<v.length;x++){let k=v[x];if(k!=null&&k.name?((0,g.errorHandle)(!j.includes(k.name),`The [${k.name}] is already exist in [setting]`),j.push(k.name)):k.name=`setting-${this.id++}`,!k.$formatted){(0,g.def)(k,"$parent",{get:()=>b}),(0,g.def)(k,"$parents",{get:()=>E}),(0,g.def)(k,"$option",{get:()=>v});let T=[];(0,g.def)(k,"$events",{get:()=>T}),(0,g.def)(k,"$formatted",{get:()=>!0})}this.format(k.selector||[],k,v,j)}this.option=v}find(v=""){let b=null;return this.traverse(E=>{E.name===v&&(b=E)}),b}resize(){var k,T;let{controls:v,constructor:{SETTING_WIDTH:b,SETTING_ITEM_HEIGHT:E},template:{$player:j,$setting:x}}=this.art;if(v.setting&&this.show){let B=((T=(k=this.active[0])==null?void 0:k.$parent)==null?void 0:T.width)||b,{left:_,width:D}=(0,g.getRect)(v.setting),{left:C,width:I}=(0,g.getRect)(j),M=_-C+D/2-B/2,$=this.active===this.option?this.active.length*E:(this.active.length+1)*E;(0,g.setStyle)(x,"height",`${$}px`),(0,g.setStyle)(x,"width",`${B}px`),M+B>I?((0,g.setStyle)(x,"left",null),(0,g.setStyle)(x,"right",null)):((0,g.setStyle)(x,"left",`${M}px`),(0,g.setStyle)(x,"right","auto"))}}inactivate(v){for(let b=0;b<v.$events.length;b++)this.art.events.remove(v.$events[b]);v.$events.length=0}remove(v){let b=this.find(v);(0,g.errorHandle)(b,`Can't find [${v}] in the [setting]`);let E=b.$option.indexOf(b);b.$option.splice(E,1),this.inactivate(b),b.$item&&(0,g.remove)(b.$item),this.render()}update(v){let b=this.find(v.name);return b?(this.inactivate(b),Object.assign(b,v),this.format(),this.creatItem(b,!0),this.render(),b):this.add(v)}add(v,b=this.option){return b.push(v),this.format(),this.creatItem(v),this.render(),v}creatHeader(v){if(!this.cache.has(v.$option))return;let b=this.cache.get(v.$option),{proxy:E,icons:{arrowLeft:j},constructor:{SETTING_ITEM_HEIGHT:x}}=this.art,k=(0,g.createElement)("div");(0,g.setStyle)(k,"height",`${x}px`),(0,g.addClass)(k,"art-setting-item"),(0,g.addClass)(k,"art-setting-item-back");let T=(0,g.append)(k,'<div class="art-setting-item-left"></div>'),B=(0,g.createElement)("div");(0,g.addClass)(B,"art-setting-item-left-icon"),(0,g.append)(B,j),(0,g.append)(T,B),(0,g.append)(T,v.$parent.html);let _=E(k,"click",()=>this.render(v.$parents));v.$parent.$events.push(_),(0,g.append)(b,k)}creatItem(v,b=!1){var P,L;if(!this.cache.has(v.$option))return;let E=this.cache.get(v.$option),j=v.$item,x="selector";(0,g.has)(v,"switch")&&(x="switch"),(0,g.has)(v,"range")&&(x="range");let{icons:k,proxy:T,constructor:B}=this.art,_=(0,g.createElement)("div");(0,g.addClass)(_,"art-setting-item"),(0,g.setStyle)(_,"height",`${B.SETTING_ITEM_HEIGHT}px`),_.dataset.name=v.name||"",_.dataset.value=v.value||"";let D=(0,g.append)(_,'<div class="art-setting-item-left"></div>'),C=(0,g.append)(_,'<div class="art-setting-item-right"></div>'),I=(0,g.createElement)("div");switch((0,g.addClass)(I,"art-setting-item-left-icon"),x){case"switch":case"range":(0,g.append)(I,v.icon||k.config);break;case"selector":(P=v.selector)!=null&&P.length?(0,g.append)(I,v.icon||k.config):(0,g.append)(I,k.check)}(0,g.append)(D,I),(0,g.def)(v,"$icon",{configurable:!0,get:()=>I}),(0,g.def)(v,"icon",{configurable:!0,get:()=>I.innerHTML,set(R){I.innerHTML="",(0,g.append)(I,R)}});let M=(0,g.createElement)("div");(0,g.addClass)(M,"art-setting-item-left-text"),(0,g.append)(M,v.html||""),(0,g.append)(D,M),(0,g.def)(v,"$html",{configurable:!0,get:()=>M}),(0,g.def)(v,"html",{configurable:!0,get:()=>M.innerHTML,set(R){M.innerHTML="",(0,g.append)(M,R)}});let $=(0,g.createElement)("div");switch((0,g.addClass)($,"art-setting-item-right-tooltip"),(0,g.append)($,v.tooltip||""),(0,g.append)(C,$),(0,g.def)(v,"$tooltip",{configurable:!0,get:()=>$}),(0,g.def)(v,"tooltip",{configurable:!0,get:()=>$.innerHTML,set(R){$.innerHTML="",(0,g.append)($,R)}}),x){case"switch":{let R=(0,g.createElement)("div");(0,g.addClass)(R,"art-setting-item-right-icon");let O=(0,g.append)(R,k.switchOn),J=(0,g.append)(R,k.switchOff);(0,g.setStyle)(v.switch?J:O,"display","none"),(0,g.append)(C,R),(0,g.def)(v,"$switch",{configurable:!0,get:()=>R});let X=v.switch;(0,g.def)(v,"switch",{configurable:!0,get:()=>X,set(rt){X=rt,rt?((0,g.setStyle)(J,"display","none"),(0,g.setStyle)(O,"display",null)):((0,g.setStyle)(J,"display",null),(0,g.setStyle)(O,"display","none"))}});break}case"range":{let R=(0,g.createElement)("div");(0,g.addClass)(R,"art-setting-item-right-icon");let O=(0,g.append)(R,'<input type="range">');O.value=v.range[0],O.min=v.range[1],O.max=v.range[2],O.step=v.range[3],(0,g.addClass)(O,"art-setting-range"),(0,g.append)(C,R),(0,g.def)(v,"$range",{configurable:!0,get:()=>O});let J=[...v.range];(0,g.def)(v,"range",{configurable:!0,get:()=>J,set(X){J=[...X],O.value=X[0],O.min=X[1],O.max=X[2],O.step=X[3]}})}break;case"selector":if((L=v.selector)!=null&&L.length){let R=(0,g.createElement)("div");(0,g.addClass)(R,"art-setting-item-right-icon"),(0,g.append)(R,k.arrowRight),(0,g.append)(C,R)}}switch(x){case"switch":if(v.onSwitch){let R=T(_,"click",async O=>{v.switch=await v.onSwitch.call(this.art,v,_,O)});v.$events.push(R)}break;case"range":if(v.$range){if(v.onRange){let R=T(v.$range,"change",async O=>{v.range[0]=v.$range.valueAsNumber,v.tooltip=await v.onRange.call(this.art,v,_,O)});v.$events.push(R)}if(v.onChange){let R=T(v.$range,"input",async O=>{v.range[0]=v.$range.valueAsNumber,v.tooltip=await v.onChange.call(this.art,v,_,O)});v.$events.push(R)}}break;case"selector":{let R=T(_,"click",async O=>{var J;(J=v.selector)!=null&&J.length?this.render(v.selector):(this.check(v),v.$parent.onSelect&&(v.$parent.tooltip=await v.$parent.onSelect.call(this.art,v,_,O)))});v.$events.push(R),v.default&&(0,g.addClass)(_,"art-current")}}(0,g.def)(v,"$item",{configurable:!0,get:()=>_}),b?(0,g.replaceElement)(_,j):(0,g.append)(E,_),v.mounted&&setTimeout(()=>v.mounted.call(this.art,v.$item,v),0)}render(v=this.option){var b;if(this.active=v,this.cache.has(v)){let E=this.cache.get(v);(0,g.inverseClass)(E,"art-current")}else{let E=(0,g.createElement)("div");this.cache.set(v,E),(0,g.addClass)(E,"art-setting-panel"),(0,g.append)(this.$parent,E),(0,g.inverseClass)(E,"art-current"),(b=v[0])!=null&&b.$parent&&this.creatHeader(v[0]);for(let j=0;j<v.length;j++)this.creatItem(v[j])}this.resize()}}n.default=y},{"./flip":"kONUB","./aspectRatio":"84NBV","./playbackRate":"aetWt","./subtitleOffset":"fIBkO","../utils/component":"18nVI","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kONUB:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{i18n:s,icons:l,constructor:{SETTING_ITEM_WIDTH:d,FLIP:f}}=i;function p(m){return s.get((0,r.capitalize)(m))}function h(){let m=i.setting.find(`flip-${i.flip}`);i.setting.check(m)}return{width:d,name:"flip",html:s.get("Video Flip"),tooltip:p(i.flip),icon:l.flip,selector:f.map(m=>({value:m,name:`flip-${m}`,default:m===i.flip,html:p(m)})),onSelect:m=>(i.flip=m.value,m.html),mounted:()=>{h(),i.on("flip",()=>h())}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"84NBV":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){let{i18n:i,icons:s,constructor:{SETTING_ITEM_WIDTH:l,ASPECT_RATIO:d}}=c;function f(h){return h==="default"?i.get("Default"):h}function p(){let h=c.setting.find(`aspect-ratio-${c.aspectRatio}`);c.setting.check(h)}return{width:l,name:"aspect-ratio",html:i.get("Aspect Ratio"),icon:s.aspectRatio,tooltip:f(c.aspectRatio),selector:d.map(h=>({value:h,name:`aspect-ratio-${h}`,default:h===c.aspectRatio,html:f(h)})),onSelect:h=>(c.aspectRatio=h.value,h.html),mounted:()=>{p(),c.on("aspectRatio",()=>p())}}}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],aetWt:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){let{i18n:i,icons:s,constructor:{SETTING_ITEM_WIDTH:l,PLAYBACK_RATE:d}}=c;function f(h){return h===1?i.get("Normal"):h.toFixed(1)}function p(){let h=c.setting.find(`playback-rate-${c.playbackRate}`);c.setting.check(h)}return{width:l,name:"playback-rate",html:i.get("Play Speed"),tooltip:f(c.playbackRate),icon:s.playbackRate,selector:d.map(h=>({value:h,name:`playback-rate-${h}`,default:h===c.playbackRate,html:f(h)})),onSelect:h=>(c.playbackRate=h.value,h.html),mounted:()=>{p(),c.on("video:ratechange",()=>p())}}}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fIBkO:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function r(c){let{i18n:i,icons:s,constructor:l}=c;return{width:l.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:i.get("Subtitle Offset"),icon:s.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:d=>(c.subtitleOffset=d.range[0],d.range[0]+"s"),mounted:(d,f)=>{c.on("subtitleOffset",p=>{f.$range.value=p,f.tooltip=p+"s"})}}}e.defineInteropFlag(n),e.export(n,"default",()=>r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2aaJe":[function(t,o,n){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(e){try{let r=JSON.parse(window.localStorage.getItem(this.name))||{};return e?r[e]:r}catch{return e?this.settings[e]:this.settings}}set(e,r){try{let c=Object.assign({},this.get(),{[e]:r});window.localStorage.setItem(this.name,JSON.stringify(c))}catch{this.settings[e]=r}}del(e){try{let r=this.get();delete r[e],window.localStorage.setItem(this.name,JSON.stringify(r))}catch{delete this.settings[e]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8MTUM":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n);var r=t("../utils"),c=t("./miniProgressBar"),i=e.interopDefault(c),s=t("./autoOrientation"),l=e.interopDefault(s),d=t("./autoPlayback"),f=e.interopDefault(d),p=t("./fastForward"),h=e.interopDefault(p),m=t("./lock"),g=e.interopDefault(m);n.default=class{constructor(y){this.art=y,this.id=0;let{option:w}=y;w.miniProgressBar&&!w.isLive&&this.add(i.default),w.lock&&r.isMobile&&this.add(g.default),w.autoPlayback&&!w.isLive&&this.add(f.default),w.autoOrientation&&r.isMobile&&this.add(l.default),w.fastForward&&r.isMobile&&!w.isLive&&this.add(h.default);for(let v=0;v<w.plugins.length;v++)this.add(w.plugins[v])}add(y){this.id+=1;let w=y.call(this.art,this.art);return w instanceof Promise?w.then(v=>this.next(y,v)):this.next(y,w)}next(y,w){let v=w&&w.name||y.name||`plugin${this.id}`;return(0,r.errorHandle)(!(0,r.has)(this,v),`Cannot add a plugin that already has the same name: ${v}`),(0,r.def)(this,v,{value:w}),this}}},{"../utils":"71aH7","./miniProgressBar":"87pSL","./autoOrientation":"ePEg5","./autoPlayback":"cVO99","./fastForward":"hFDwt","./lock":"1hsTH","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"87pSL":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){return i.on("control",s=>{s?(0,r.removeClass)(i.template.$player,"art-mini-progress-bar"):(0,r.addClass)(i.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ePEg5:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{constructor:s,template:{$player:l,$video:d}}=i;return i.on("fullscreenWeb",f=>{if(f){let{videoWidth:p,videoHeight:h}=d,{clientWidth:m,clientHeight:g}=document.documentElement;(p>h&&m<g||p<h&&m>g)&&setTimeout(()=>{(0,r.setStyle)(l,"width",`${g}px`),(0,r.setStyle)(l,"height",`${m}px`),(0,r.setStyle)(l,"transform-origin","0 0"),(0,r.setStyle)(l,"transform",`rotate(90deg) translate(0, -${m}px)`),(0,r.addClass)(l,"art-auto-orientation"),i.isRotate=!0,i.emit("resize")},s.AUTO_ORIENTATION_TIME)}else(0,r.hasClass)(l,"art-auto-orientation")&&((0,r.removeClass)(l,"art-auto-orientation"),i.isRotate=!1,i.emit("resize"))}),i.on("fullscreen",async f=>{var h;if(!((h=screen==null?void 0:screen.orientation)!=null&&h.lock))return;let p=screen.orientation.type;if(f){let{videoWidth:m,videoHeight:g}=d,{clientWidth:y,clientHeight:w}=document.documentElement;if(m>g&&y<w||m<g&&y>w){let v=p.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(v),(0,r.addClass)(l,"art-auto-orientation-fullscreen")}}else(0,r.hasClass)(l,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(p),(0,r.removeClass)(l,"art-auto-orientation-fullscreen"))}),{name:"autoOrientation",get state(){return(0,r.hasClass)(l,"art-auto-orientation")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cVO99:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{i18n:s,icons:l,storage:d,constructor:f,proxy:p,template:{$poster:h}}=i,m=i.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),g=(0,r.query)(".art-auto-playback-last",m),y=(0,r.query)(".art-auto-playback-jump",m),w=(0,r.query)(".art-auto-playback-close",m);(0,r.append)(w,l.close);let v=null;function b(){let E=(d.get("times")||{})[i.option.id||i.option.url];clearTimeout(v),(0,r.setStyle)(m,"display","none"),E&&E>=f.AUTO_PLAYBACK_MIN&&((0,r.setStyle)(m,"display","flex"),g.innerText=`${s.get("Last Seen")} ${(0,r.secondToTime)(E)}`,y.innerText=s.get("Jump Play"),p(w,"click",()=>{(0,r.setStyle)(m,"display","none")}),p(y,"click",()=>{i.seek=E,i.play(),(0,r.setStyle)(h,"display","none"),(0,r.setStyle)(m,"display","none")}),i.once("video:timeupdate",()=>{v=setTimeout(()=>{(0,r.setStyle)(m,"display","none")},f.AUTO_PLAYBACK_TIMEOUT)}))}return i.on("video:timeupdate",()=>{if(i.playing){let E=d.get("times")||{},j=Object.keys(E);j.length>f.AUTO_PLAYBACK_MAX&&delete E[j[0]],E[i.option.id||i.option.url]=i.currentTime,d.set("times",E)}}),i.on("ready",b),i.on("restart",b),{name:"auto-playback",get times(){return d.get("times")||{}},clear:()=>d.del("times"),delete(E){let j=d.get("times")||{};return delete j[E],d.set("times",j),j}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hFDwt:[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{constructor:s,proxy:l,template:{$player:d,$video:f}}=i,p=null,h=!1,m=1,g=()=>{clearTimeout(p),h&&(h=!1,i.playbackRate=m,(0,r.removeClass)(d,"art-fast-forward"))};return l(f,"touchstart",y=>{y.touches.length===1&&i.playing&&!i.isLock&&(p=setTimeout(()=>{h=!0,m=i.playbackRate,i.playbackRate=s.FAST_FORWARD_VALUE,(0,r.addClass)(d,"art-fast-forward")},s.FAST_FORWARD_TIME))}),l(document,"touchmove",g),l(document,"touchend",g),{name:"fastForward",get state(){return(0,r.hasClass)(d,"art-fast-forward")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1hsTH":[function(t,o,n){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(n),e.export(n,"default",()=>c);var r=t("../utils");function c(i){let{layers:s,icons:l,template:{$player:d}}=i;function f(){return(0,r.hasClass)(d,"art-lock")}function p(){(0,r.addClass)(d,"art-lock"),i.isLock=!0,i.emit("lock",!0)}function h(){(0,r.removeClass)(d,"art-lock"),i.isLock=!1,i.emit("lock",!1)}return s.add({name:"lock",mounted(m){let g=(0,r.append)(m,l.lock),y=(0,r.append)(m,l.unlock);(0,r.setStyle)(g,"display","none"),i.on("lock",w=>{w?((0,r.setStyle)(g,"display","inline-flex"),(0,r.setStyle)(y,"display","none")):((0,r.setStyle)(g,"display","none"),(0,r.setStyle)(y,"display","inline-flex"))})},click(){f()?h():p()}}),{name:"lock",get state(){return f()},set state(m){m?p():h()}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["5lTcX"],"5lTcX","parcelRequire4dc0")})(oe,oe.exports);var ln=oe.exports;const cn=$e(ln);function un(u){let a;return{c(){a=z("div"),a.innerHTML="",S(a,"class","artplayer-app")},m(t,o){G(t,a,o),u[8](a)},p:nt,i:nt,o:nt,d(t){t&&W(a),u[8](null)}}}function We(u){const a=Math.floor(u/60),t=Math.floor(u%60);return`${a}:${t.toString().padStart(2,"0")}`}function dn(u,a,t){let o,{app:n}=a,{config:e}=a,r=null,c;jt(async()=>{try{o=(await Promise.resolve().then(()=>require("./artplayer-plugin-chapter-D6S7Qr0L.cjs")).then(v=>v.artplayerPluginChapter)).default,i()}catch(w){console.error("[Player] 加载章节插件失败:",w),i()}});function i(){if(!c)return;const w=[];o&&w.push(o({chapters:[],style:{backgroundColor:"rgba(0, 0, 0, 0.1)",activeBackgroundColor:"rgba(140, 123, 253, 0.5)"}}));const v={volume:70,speed:100,hotkey:!0,loop:!1,autoplay:!1},b=e?{...v,...e}:v;r=new cn({container:c,url:"",volume:b.volume/100,isLive:!1,muted:!1,autoplay:b.autoplay,pip:!0,autoSize:!0,autoMini:!0,setting:!0,loop:b.loop,flip:!0,playbackRate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!0,mutex:!0,backdrop:!0,playsInline:!0,autoPlayback:!0,theme:"var(--b3-theme-primary)",lang:"zh-cn",crossOrigin:"anonymous",plugins:w}),r.on("ready",()=>{console.log("[Player] Artplayer 就绪")}),b&&p(b)}tn(()=>{r&&(s.destroy(),d.clearLoop(),r.destroy(!0),r=null)});const s={audio:null,createAudio:(w,v)=>{s.destroy();const b=new Audio;if(b.preload="auto",v){const E=new URL(w);v.Referer&&E.searchParams.set("referer",v.Referer),v.Cookie&&E.searchParams.set("cookie",v.Cookie),b.src=E.toString()}else b.src=w;return s.audio=b,b},syncState:()=>{!s.audio||!r||(s.audio.currentTime=r.currentTime,r.playing?s.audio.play().catch(console.error):s.audio.pause(),s.audio.playbackRate=r.playbackRate,s.audio.volume=r.volume,s.audio.muted=r.muted)},registerEvents:()=>{r&&(r.on("play",()=>s.syncState()),r.on("pause",()=>{var w;return(w=s.audio)==null?void 0:w.pause()}),r.on("seek",()=>{s.audio&&(s.audio.currentTime=r.currentTime)}),r.on("video:ratechange",()=>{s.audio&&(s.audio.playbackRate=r.playbackRate)}),r.on("video:volumechange",()=>{s.audio&&(s.audio.volume=r.volume,s.audio.muted=r.muted)}))},destroy:()=>{s.audio&&(s.audio.pause(),s.audio.remove(),s.audio=null)}},l={seekTo:w=>{if(r)try{const v=parseFloat(String(w));if(!Number.isFinite(v)||v<0){console.warn("[播放器] 无效的跳转时间:",w);return}const b=Math.min(v,r.duration);r.currentTime=b,s.audio&&(s.audio.currentTime=b)}catch(v){console.error("[播放器] 跳转失败:",v)}},getCurrentTime:()=>r?r.currentTime:0},d={setLoop:(w,v)=>{if(r)try{r.plugins.chapter.update([]),r.plugins.chapter.update([{start:w,end:v,title:`循环片段 ${We(w)} - ${We(v)}`}]);const b=()=>{r.currentTime>=v&&(r.seek=w)};r.off("video:timeupdate",b),r.on("video:timeupdate",b)}catch(b){console.error("[Player] 设置循环片段失败:",b),(void 0).clearLoop()}},clearLoop:()=>{r&&r.plugins.chapter.update([])}};async function f(w,v={}){if(r)try{d.clearLoop(),await r.switchUrl(w),await new Promise(b=>{const E=()=>{b(),r.off("video:canplay",E)};r.on("video:canplay",E)}),v.startTime&&(r.seek=v.startTime),v.isLoop&&v.startTime!==void 0&&v.endTime!==void 0&&d.setLoop(v.startTime,v.endTime),v.autoplay&&r.play()}catch(b){console.error("[Player] 播放失败:",b),q.showMessage("播放失败，请重试");const E=new CustomEvent("streamError",{detail:{url:w,options:v}});r.container.dispatchEvent(E)}}function p(w){r&&(r.volume=w.volume/100,r.playbackRate=w.speed/100,r.loop=w.loop,w.autoplay&&r.url&&r.play())}async function h(){return r?r.getDataURL():null}const m=l.seekTo,g=l.getCurrentTime;function y(w){St[w?"unshift":"push"](()=>{c=w,t(0,c)})}return u.$$set=w=>{"app"in w&&t(1,n=w.app),"config"in w&&t(2,e=w.config)},[c,n,e,f,p,h,m,g,y]}class fn extends Xt{constructor(a){super(),Qt(this,a,dn,un,Gt,{app:1,config:2,play:3,updateConfig:4,getScreenshotDataURL:5,seekTo:6,getCurrentTime:7})}get play(){return this.$$.ctx[3]}get updateConfig(){return this.$$.ctx[4]}get getScreenshotDataURL(){return this.$$.ctx[5]}get seekTo(){return this.$$.ctx[6]}get getCurrentTime(){return this.$$.ctx[7]}}var Jt={},pn=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},yr={},lt={};let Le;const hn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];lt.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17};lt.getSymbolTotalCodewords=function(a){return hn[a]};lt.getBCHDigit=function(u){let a=0;for(;u!==0;)a++,u>>>=1;return a};lt.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');Le=a};lt.isKanjiModeEnabled=function(){return typeof Le<"u"};lt.toSJIS=function(a){return Le(a)};var ce={};(function(u){u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2};function a(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+t)}}u.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},u.from=function(o,n){if(u.isValid(o))return o;try{return a(o)}catch{return n}}})(ce);function br(){this.buffer=[],this.length=0}br.prototype={get:function(u){const a=Math.floor(u/8);return(this.buffer[a]>>>7-u%8&1)===1},put:function(u,a){for(let t=0;t<a;t++)this.putBit((u>>>a-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(u){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),u&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var mn=br;function Zt(u){if(!u||u<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=u,this.data=new Uint8Array(u*u),this.reservedBit=new Uint8Array(u*u)}Zt.prototype.set=function(u,a,t,o){const n=u*this.size+a;this.data[n]=t,o&&(this.reservedBit[n]=!0)};Zt.prototype.get=function(u,a){return this.data[u*this.size+a]};Zt.prototype.xor=function(u,a,t){this.data[u*this.size+a]^=t};Zt.prototype.isReserved=function(u,a){return this.reservedBit[u*this.size+a]};var gn=Zt,wr={};(function(u){const a=lt.getSymbolSize;u.getRowColCoords=function(o){if(o===1)return[];const n=Math.floor(o/7)+2,e=a(o),r=e===145?26:Math.ceil((e-13)/(2*n-2))*2,c=[e-7];for(let i=1;i<n-1;i++)c[i]=c[i-1]-r;return c.push(6),c.reverse()},u.getPositions=function(o){const n=[],e=u.getRowColCoords(o),r=e.length;for(let c=0;c<r;c++)for(let i=0;i<r;i++)c===0&&i===0||c===0&&i===r-1||c===r-1&&i===0||n.push([e[c],e[i]]);return n}})(wr);var xr={};const vn=lt.getSymbolSize,Ke=7;xr.getPositions=function(a){const t=vn(a);return[[0,0],[t-Ke,0],[0,t-Ke]]};var kr={};(function(u){u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};u.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},u.from=function(n){return u.isValid(n)?parseInt(n,10):void 0},u.getPenaltyN1=function(n){const e=n.size;let r=0,c=0,i=0,s=null,l=null;for(let d=0;d<e;d++){c=i=0,s=l=null;for(let f=0;f<e;f++){let p=n.get(d,f);p===s?c++:(c>=5&&(r+=a.N1+(c-5)),s=p,c=1),p=n.get(f,d),p===l?i++:(i>=5&&(r+=a.N1+(i-5)),l=p,i=1)}c>=5&&(r+=a.N1+(c-5)),i>=5&&(r+=a.N1+(i-5))}return r},u.getPenaltyN2=function(n){const e=n.size;let r=0;for(let c=0;c<e-1;c++)for(let i=0;i<e-1;i++){const s=n.get(c,i)+n.get(c,i+1)+n.get(c+1,i)+n.get(c+1,i+1);(s===4||s===0)&&r++}return r*a.N2},u.getPenaltyN3=function(n){const e=n.size;let r=0,c=0,i=0;for(let s=0;s<e;s++){c=i=0;for(let l=0;l<e;l++)c=c<<1&2047|n.get(s,l),l>=10&&(c===1488||c===93)&&r++,i=i<<1&2047|n.get(l,s),l>=10&&(i===1488||i===93)&&r++}return r*a.N3},u.getPenaltyN4=function(n){let e=0;const r=n.data.length;for(let i=0;i<r;i++)e+=n.data[i];return Math.abs(Math.ceil(e*100/r/5)-10)*a.N4};function t(o,n,e){switch(o){case u.Patterns.PATTERN000:return(n+e)%2===0;case u.Patterns.PATTERN001:return n%2===0;case u.Patterns.PATTERN010:return e%3===0;case u.Patterns.PATTERN011:return(n+e)%3===0;case u.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(e/3))%2===0;case u.Patterns.PATTERN101:return n*e%2+n*e%3===0;case u.Patterns.PATTERN110:return(n*e%2+n*e%3)%2===0;case u.Patterns.PATTERN111:return(n*e%3+(n+e)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}u.applyMask=function(n,e){const r=e.size;for(let c=0;c<r;c++)for(let i=0;i<r;i++)e.isReserved(i,c)||e.xor(i,c,t(n,i,c))},u.getBestMask=function(n,e){const r=Object.keys(u.Patterns).length;let c=0,i=1/0;for(let s=0;s<r;s++){e(s),u.applyMask(s,n);const l=u.getPenaltyN1(n)+u.getPenaltyN2(n)+u.getPenaltyN3(n)+u.getPenaltyN4(n);u.applyMask(s,n),l<i&&(i=l,c=s)}return c}})(kr);var ue={};const wt=ce,re=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ne=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ue.getBlocksCount=function(a,t){switch(t){case wt.L:return re[(a-1)*4+0];case wt.M:return re[(a-1)*4+1];case wt.Q:return re[(a-1)*4+2];case wt.H:return re[(a-1)*4+3];default:return}};ue.getTotalCodewordsCount=function(a,t){switch(t){case wt.L:return ne[(a-1)*4+0];case wt.M:return ne[(a-1)*4+1];case wt.Q:return ne[(a-1)*4+2];case wt.H:return ne[(a-1)*4+3];default:return}};var Er={},de={};const Yt=new Uint8Array(512),se=new Uint8Array(256);(function(){let a=1;for(let t=0;t<255;t++)Yt[t]=a,se[a]=t,a<<=1,a&256&&(a^=285);for(let t=255;t<512;t++)Yt[t]=Yt[t-255]})();de.log=function(a){if(a<1)throw new Error("log("+a+")");return se[a]};de.exp=function(a){return Yt[a]};de.mul=function(a,t){return a===0||t===0?0:Yt[se[a]+se[t]]};(function(u){const a=de;u.mul=function(o,n){const e=new Uint8Array(o.length+n.length-1);for(let r=0;r<o.length;r++)for(let c=0;c<n.length;c++)e[r+c]^=a.mul(o[r],n[c]);return e},u.mod=function(o,n){let e=new Uint8Array(o);for(;e.length-n.length>=0;){const r=e[0];for(let i=0;i<n.length;i++)e[i]^=a.mul(n[i],r);let c=0;for(;c<e.length&&e[c]===0;)c++;e=e.slice(c)}return e},u.generateECPolynomial=function(o){let n=new Uint8Array([1]);for(let e=0;e<o;e++)n=u.mul(n,new Uint8Array([1,a.exp(e)]));return n}})(Er);const Cr=Er;function Re(u){this.genPoly=void 0,this.degree=u,this.degree&&this.initialize(this.degree)}Re.prototype.initialize=function(a){this.degree=a,this.genPoly=Cr.generateECPolynomial(this.degree)};Re.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(a.length+this.degree);t.set(a);const o=Cr.mod(t,this.genPoly),n=this.degree-o.length;if(n>0){const e=new Uint8Array(this.degree);return e.set(o,n),e}return o};var yn=Re,Tr={},kt={},He={};He.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40};var ft={};const _r="[0-9]+",bn="[A-Z $%*+\\-./:]+";let Kt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Kt=Kt.replace(/u/g,"\\u");const wn="(?:(?![A-Z0-9 $%*+\\-./:]|"+Kt+`)(?:.|[\r
]))+`;ft.KANJI=new RegExp(Kt,"g");ft.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ft.BYTE=new RegExp(wn,"g");ft.NUMERIC=new RegExp(_r,"g");ft.ALPHANUMERIC=new RegExp(bn,"g");const xn=new RegExp("^"+Kt+"$"),kn=new RegExp("^"+_r+"$"),En=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ft.testKanji=function(a){return xn.test(a)};ft.testNumeric=function(a){return kn.test(a)};ft.testAlphanumeric=function(a){return En.test(a)};(function(u){const a=He,t=ft;u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(e,r){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!a.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?e.ccBits[0]:r<27?e.ccBits[1]:e.ccBits[2]},u.getBestModeForData=function(e){return t.testNumeric(e)?u.NUMERIC:t.testAlphanumeric(e)?u.ALPHANUMERIC:t.testKanji(e)?u.KANJI:u.BYTE},u.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},u.isValid=function(e){return e&&e.bit&&e.ccBits};function o(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+n)}}u.from=function(e,r){if(u.isValid(e))return e;try{return o(e)}catch{return r}}})(kt);(function(u){const a=lt,t=ue,o=ce,n=kt,e=He,r=7973,c=a.getBCHDigit(r);function i(f,p,h){for(let m=1;m<=40;m++)if(p<=u.getCapacity(m,h,f))return m}function s(f,p){return n.getCharCountIndicator(f,p)+4}function l(f,p){let h=0;return f.forEach(function(m){const g=s(m.mode,p);h+=g+m.getBitsLength()}),h}function d(f,p){for(let h=1;h<=40;h++)if(l(f,h)<=u.getCapacity(h,p,n.MIXED))return h}u.from=function(p,h){return e.isValid(p)?parseInt(p,10):h},u.getCapacity=function(p,h,m){if(!e.isValid(p))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=n.BYTE);const g=a.getSymbolTotalCodewords(p),y=t.getTotalCodewordsCount(p,h),w=(g-y)*8;if(m===n.MIXED)return w;const v=w-s(m,p);switch(m){case n.NUMERIC:return Math.floor(v/10*3);case n.ALPHANUMERIC:return Math.floor(v/11*2);case n.KANJI:return Math.floor(v/13);case n.BYTE:default:return Math.floor(v/8)}},u.getBestVersionForData=function(p,h){let m;const g=o.from(h,o.M);if(Array.isArray(p)){if(p.length>1)return d(p,g);if(p.length===0)return 1;m=p[0]}else m=p;return i(m.mode,m.getLength(),g)},u.getEncodedBits=function(p){if(!e.isValid(p)||p<7)throw new Error("Invalid QR Code version");let h=p<<12;for(;a.getBCHDigit(h)-c>=0;)h^=r<<a.getBCHDigit(h)-c;return p<<12|h}})(Tr);var Ir={};const Ie=lt,Mr=1335,Cn=21522,Ge=Ie.getBCHDigit(Mr);Ir.getEncodedBits=function(a,t){const o=a.bit<<3|t;let n=o<<10;for(;Ie.getBCHDigit(n)-Ge>=0;)n^=Mr<<Ie.getBCHDigit(n)-Ge;return(o<<10|n)^Cn};var jr={};const Tn=kt;function At(u){this.mode=Tn.NUMERIC,this.data=u.toString()}At.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)};At.prototype.getLength=function(){return this.data.length};At.prototype.getBitsLength=function(){return At.getBitsLength(this.data.length)};At.prototype.write=function(a){let t,o,n;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),n=parseInt(o,10),a.put(n,10);const e=this.data.length-t;e>0&&(o=this.data.substr(t),n=parseInt(o,10),a.put(n,e*3+1))};var _n=At;const In=kt,ge=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Dt(u){this.mode=In.ALPHANUMERIC,this.data=u}Dt.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)};Dt.prototype.getLength=function(){return this.data.length};Dt.prototype.getBitsLength=function(){return Dt.getBitsLength(this.data.length)};Dt.prototype.write=function(a){let t;for(t=0;t+2<=this.data.length;t+=2){let o=ge.indexOf(this.data[t])*45;o+=ge.indexOf(this.data[t+1]),a.put(o,11)}this.data.length%2&&a.put(ge.indexOf(this.data[t]),6)};var Mn=Dt;const jn=kt;function Pt(u){this.mode=jn.BYTE,typeof u=="string"?this.data=new TextEncoder().encode(u):this.data=new Uint8Array(u)}Pt.getBitsLength=function(a){return a*8};Pt.prototype.getLength=function(){return this.data.length};Pt.prototype.getBitsLength=function(){return Pt.getBitsLength(this.data.length)};Pt.prototype.write=function(u){for(let a=0,t=this.data.length;a<t;a++)u.put(this.data[a],8)};var Sn=Pt;const Fn=kt,An=lt;function Bt(u){this.mode=Fn.KANJI,this.data=u}Bt.getBitsLength=function(a){return a*13};Bt.prototype.getLength=function(){return this.data.length};Bt.prototype.getBitsLength=function(){return Bt.getBitsLength(this.data.length)};Bt.prototype.write=function(u){let a;for(a=0;a<this.data.length;a++){let t=An.toSJIS(this.data[a]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),u.put(t,13)}};var Dn=Bt,Sr={exports:{}};(function(u){var a={single_source_shortest_paths:function(t,o,n){var e={},r={};r[o]=0;var c=a.PriorityQueue.make();c.push(o,0);for(var i,s,l,d,f,p,h,m,g;!c.empty();){i=c.pop(),s=i.value,d=i.cost,f=t[s]||{};for(l in f)f.hasOwnProperty(l)&&(p=f[l],h=d+p,m=r[l],g=typeof r[l]>"u",(g||m>h)&&(r[l]=h,c.push(l,h),e[l]=s))}if(typeof n<"u"&&typeof r[n]>"u"){var y=["Could not find a path from ",o," to ",n,"."].join("");throw new Error(y)}return e},extract_shortest_path_from_predecessor_list:function(t,o){for(var n=[],e=o;e;)n.push(e),t[e],e=t[e];return n.reverse(),n},find_path:function(t,o,n){var e=a.single_source_shortest_paths(t,o,n);return a.extract_shortest_path_from_predecessor_list(e,n)},PriorityQueue:{make:function(t){var o=a.PriorityQueue,n={},e;t=t||{};for(e in o)o.hasOwnProperty(e)&&(n[e]=o[e]);return n.queue=[],n.sorter=t.sorter||o.default_sorter,n},default_sorter:function(t,o){return t.cost-o.cost},push:function(t,o){var n={value:t,cost:o};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};u.exports=a})(Sr);var Pn=Sr.exports;(function(u){const a=kt,t=_n,o=Mn,n=Sn,e=Dn,r=ft,c=lt,i=Pn;function s(y){return unescape(encodeURIComponent(y)).length}function l(y,w,v){const b=[];let E;for(;(E=y.exec(v))!==null;)b.push({data:E[0],index:E.index,mode:w,length:E[0].length});return b}function d(y){const w=l(r.NUMERIC,a.NUMERIC,y),v=l(r.ALPHANUMERIC,a.ALPHANUMERIC,y);let b,E;return c.isKanjiModeEnabled()?(b=l(r.BYTE,a.BYTE,y),E=l(r.KANJI,a.KANJI,y)):(b=l(r.BYTE_KANJI,a.BYTE,y),E=[]),w.concat(v,b,E).sort(function(x,k){return x.index-k.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function f(y,w){switch(w){case a.NUMERIC:return t.getBitsLength(y);case a.ALPHANUMERIC:return o.getBitsLength(y);case a.KANJI:return e.getBitsLength(y);case a.BYTE:return n.getBitsLength(y)}}function p(y){return y.reduce(function(w,v){const b=w.length-1>=0?w[w.length-1]:null;return b&&b.mode===v.mode?(w[w.length-1].data+=v.data,w):(w.push(v),w)},[])}function h(y){const w=[];for(let v=0;v<y.length;v++){const b=y[v];switch(b.mode){case a.NUMERIC:w.push([b,{data:b.data,mode:a.ALPHANUMERIC,length:b.length},{data:b.data,mode:a.BYTE,length:b.length}]);break;case a.ALPHANUMERIC:w.push([b,{data:b.data,mode:a.BYTE,length:b.length}]);break;case a.KANJI:w.push([b,{data:b.data,mode:a.BYTE,length:s(b.data)}]);break;case a.BYTE:w.push([{data:b.data,mode:a.BYTE,length:s(b.data)}])}}return w}function m(y,w){const v={},b={start:{}};let E=["start"];for(let j=0;j<y.length;j++){const x=y[j],k=[];for(let T=0;T<x.length;T++){const B=x[T],_=""+j+T;k.push(_),v[_]={node:B,lastCount:0},b[_]={};for(let D=0;D<E.length;D++){const C=E[D];v[C]&&v[C].node.mode===B.mode?(b[C][_]=f(v[C].lastCount+B.length,B.mode)-f(v[C].lastCount,B.mode),v[C].lastCount+=B.length):(v[C]&&(v[C].lastCount=B.length),b[C][_]=f(B.length,B.mode)+4+a.getCharCountIndicator(B.mode,w))}}E=k}for(let j=0;j<E.length;j++)b[E[j]].end=0;return{map:b,table:v}}function g(y,w){let v;const b=a.getBestModeForData(y);if(v=a.from(w,b),v!==a.BYTE&&v.bit<b.bit)throw new Error('"'+y+'" cannot be encoded with mode '+a.toString(v)+`.
 Suggested mode is: `+a.toString(b));switch(v===a.KANJI&&!c.isKanjiModeEnabled()&&(v=a.BYTE),v){case a.NUMERIC:return new t(y);case a.ALPHANUMERIC:return new o(y);case a.KANJI:return new e(y);case a.BYTE:return new n(y)}}u.fromArray=function(w){return w.reduce(function(v,b){return typeof b=="string"?v.push(g(b,null)):b.data&&v.push(g(b.data,b.mode)),v},[])},u.fromString=function(w,v){const b=d(w,c.isKanjiModeEnabled()),E=h(b),j=m(E,v),x=i.find_path(j.map,"start","end"),k=[];for(let T=1;T<x.length-1;T++)k.push(j.table[x[T]].node);return u.fromArray(p(k))},u.rawSplit=function(w){return u.fromArray(d(w,c.isKanjiModeEnabled()))}})(jr);const fe=lt,ve=ce,Bn=mn,$n=gn,Ln=wr,Rn=xr,Me=kr,je=ue,Hn=yn,le=Tr,zn=Ir,Nn=kt,ye=jr;function On(u,a){const t=u.size,o=Rn.getPositions(a);for(let n=0;n<o.length;n++){const e=o[n][0],r=o[n][1];for(let c=-1;c<=7;c++)if(!(e+c<=-1||t<=e+c))for(let i=-1;i<=7;i++)r+i<=-1||t<=r+i||(c>=0&&c<=6&&(i===0||i===6)||i>=0&&i<=6&&(c===0||c===6)||c>=2&&c<=4&&i>=2&&i<=4?u.set(e+c,r+i,!0,!0):u.set(e+c,r+i,!1,!0))}}function Un(u){const a=u.size;for(let t=8;t<a-8;t++){const o=t%2===0;u.set(t,6,o,!0),u.set(6,t,o,!0)}}function Yn(u,a){const t=Ln.getPositions(a);for(let o=0;o<t.length;o++){const n=t[o][0],e=t[o][1];for(let r=-2;r<=2;r++)for(let c=-2;c<=2;c++)r===-2||r===2||c===-2||c===2||r===0&&c===0?u.set(n+r,e+c,!0,!0):u.set(n+r,e+c,!1,!0)}}function Vn(u,a){const t=u.size,o=le.getEncodedBits(a);let n,e,r;for(let c=0;c<18;c++)n=Math.floor(c/3),e=c%3+t-8-3,r=(o>>c&1)===1,u.set(n,e,r,!0),u.set(e,n,r,!0)}function be(u,a,t){const o=u.size,n=zn.getEncodedBits(a,t);let e,r;for(e=0;e<15;e++)r=(n>>e&1)===1,e<6?u.set(e,8,r,!0):e<8?u.set(e+1,8,r,!0):u.set(o-15+e,8,r,!0),e<8?u.set(8,o-e-1,r,!0):e<9?u.set(8,15-e-1+1,r,!0):u.set(8,15-e-1,r,!0);u.set(o-8,8,1,!0)}function qn(u,a){const t=u.size;let o=-1,n=t-1,e=7,r=0;for(let c=t-1;c>0;c-=2)for(c===6&&c--;;){for(let i=0;i<2;i++)if(!u.isReserved(n,c-i)){let s=!1;r<a.length&&(s=(a[r]>>>e&1)===1),u.set(n,c-i,s),e--,e===-1&&(r++,e=7)}if(n+=o,n<0||t<=n){n-=o,o=-o;break}}}function Wn(u,a,t){const o=new Bn;t.forEach(function(i){o.put(i.mode.bit,4),o.put(i.getLength(),Nn.getCharCountIndicator(i.mode,u)),i.write(o)});const n=fe.getSymbolTotalCodewords(u),e=je.getTotalCodewordsCount(u,a),r=(n-e)*8;for(o.getLengthInBits()+4<=r&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const c=(r-o.getLengthInBits())/8;for(let i=0;i<c;i++)o.put(i%2?17:236,8);return Kn(o,u,a)}function Kn(u,a,t){const o=fe.getSymbolTotalCodewords(a),n=je.getTotalCodewordsCount(a,t),e=o-n,r=je.getBlocksCount(a,t),c=o%r,i=r-c,s=Math.floor(o/r),l=Math.floor(e/r),d=l+1,f=s-l,p=new Hn(f);let h=0;const m=new Array(r),g=new Array(r);let y=0;const w=new Uint8Array(u.buffer);for(let x=0;x<r;x++){const k=x<i?l:d;m[x]=w.slice(h,h+k),g[x]=p.encode(m[x]),h+=k,y=Math.max(y,k)}const v=new Uint8Array(o);let b=0,E,j;for(E=0;E<y;E++)for(j=0;j<r;j++)E<m[j].length&&(v[b++]=m[j][E]);for(E=0;E<f;E++)for(j=0;j<r;j++)v[b++]=g[j][E];return v}function Gn(u,a,t,o){let n;if(Array.isArray(u))n=ye.fromArray(u);else if(typeof u=="string"){let s=a;if(!s){const l=ye.rawSplit(u);s=le.getBestVersionForData(l,t)}n=ye.fromString(u,s||40)}else throw new Error("Invalid data");const e=le.getBestVersionForData(n,t);if(!e)throw new Error("The amount of data is too big to be stored in a QR Code");if(!a)a=e;else if(a<e)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+e+`.
`);const r=Wn(a,t,n),c=fe.getSymbolSize(a),i=new $n(c);return On(i,a),Un(i),Yn(i,a),be(i,t,0),a>=7&&Vn(i,a),qn(i,r),isNaN(o)&&(o=Me.getBestMask(i,be.bind(null,i,t))),Me.applyMask(o,i),be(i,t,o),{modules:i,version:a,errorCorrectionLevel:t,maskPattern:o,segments:n}}yr.create=function(a,t){if(typeof a>"u"||a==="")throw new Error("No input text");let o=ve.M,n,e;return typeof t<"u"&&(o=ve.from(t.errorCorrectionLevel,ve.M),n=le.from(t.version),e=Me.from(t.maskPattern),t.toSJISFunc&&fe.setToSJISFunction(t.toSJISFunc)),Gn(a,n,o,e)};var Fr={},ze={};(function(u){function a(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let o=t.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+t);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(e){return[e,e]}))),o.length===6&&o.push("F","F");const n=parseInt(o.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+o.slice(0,6).join("")}}u.getOptions=function(o){o||(o={}),o.color||(o.color={});const n=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,e=o.width&&o.width>=21?o.width:void 0,r=o.scale||4;return{width:e,scale:e?4:r,margin:n,color:{dark:a(o.color.dark||"#000000ff"),light:a(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},u.getScale=function(o,n){return n.width&&n.width>=o+n.margin*2?n.width/(o+n.margin*2):n.scale},u.getImageWidth=function(o,n){const e=u.getScale(o,n);return Math.floor((o+n.margin*2)*e)},u.qrToImageData=function(o,n,e){const r=n.modules.size,c=n.modules.data,i=u.getScale(r,e),s=Math.floor((r+e.margin*2)*i),l=e.margin*i,d=[e.color.light,e.color.dark];for(let f=0;f<s;f++)for(let p=0;p<s;p++){let h=(f*s+p)*4,m=e.color.light;if(f>=l&&p>=l&&f<s-l&&p<s-l){const g=Math.floor((f-l)/i),y=Math.floor((p-l)/i);m=d[c[g*r+y]?1:0]}o[h++]=m.r,o[h++]=m.g,o[h++]=m.b,o[h]=m.a}}})(ze);(function(u){const a=ze;function t(n,e,r){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=r,e.width=r,e.style.height=r+"px",e.style.width=r+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}u.render=function(e,r,c){let i=c,s=r;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),r||(s=o()),i=a.getOptions(i);const l=a.getImageWidth(e.modules.size,i),d=s.getContext("2d"),f=d.createImageData(l,l);return a.qrToImageData(f.data,e,i),t(d,s,l),d.putImageData(f,0,0),s},u.renderToDataURL=function(e,r,c){let i=c;typeof i>"u"&&(!r||!r.getContext)&&(i=r,r=void 0),i||(i={});const s=u.render(e,r,i),l=i.type||"image/png",d=i.rendererOpts||{};return s.toDataURL(l,d.quality)}})(Fr);var Ar={};const Qn=ze;function Qe(u,a){const t=u.a/255,o=a+'="'+u.hex+'"';return t<1?o+" "+a+'-opacity="'+t.toFixed(2).slice(1)+'"':o}function we(u,a,t){let o=u+a;return typeof t<"u"&&(o+=" "+t),o}function Xn(u,a,t){let o="",n=0,e=!1,r=0;for(let c=0;c<u.length;c++){const i=Math.floor(c%a),s=Math.floor(c/a);!i&&!e&&(e=!0),u[c]?(r++,c>0&&i>0&&u[c-1]||(o+=e?we("M",i+t,.5+s+t):we("m",n,0),n=0,e=!1),i+1<a&&u[c+1]||(o+=we("h",r),r=0)):n++}return o}Ar.render=function(a,t,o){const n=Qn.getOptions(t),e=a.modules.size,r=a.modules.data,c=e+n.margin*2,i=n.color.light.a?"<path "+Qe(n.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",s="<path "+Qe(n.color.dark,"stroke")+' d="'+Xn(r,e,n.margin)+'"/>',l='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+l+' shape-rendering="crispEdges">'+i+s+`</svg>
`;return typeof o=="function"&&o(null,f),f};const Jn=pn,Se=yr,Dr=Fr,Zn=Ar;function Ne(u,a,t,o,n){const e=[].slice.call(arguments,1),r=e.length,c=typeof e[r-1]=="function";if(!c&&!Jn())throw new Error("Callback required as last argument");if(c){if(r<2)throw new Error("Too few arguments provided");r===2?(n=t,t=a,a=o=void 0):r===3&&(a.getContext&&typeof n>"u"?(n=o,o=void 0):(n=o,o=t,t=a,a=void 0))}else{if(r<1)throw new Error("Too few arguments provided");return r===1?(t=a,a=o=void 0):r===2&&!a.getContext&&(o=t,t=a,a=void 0),new Promise(function(i,s){try{const l=Se.create(t,o);i(u(l,a,o))}catch(l){s(l)}})}try{const i=Se.create(t,o);n(null,u(i,a,o))}catch(i){n(i)}}Jt.create=Se.create;Jt.toCanvas=Ne.bind(null,Dr.render);Jt.toDataURL=Ne.bind(null,Dr.renderToDataURL);Jt.toString=Ne.bind(null,function(u,a,t){return Zn.render(u,t)});var Pr={exports:{}},Br={exports:{}};(function(){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(t,o){return t<<o|t>>>32-o},rotr:function(t,o){return t<<32-o|t>>>o},endian:function(t){if(t.constructor==Number)return a.rotl(t,8)&16711935|a.rotl(t,24)&4278255360;for(var o=0;o<t.length;o++)t[o]=a.endian(t[o]);return t},randomBytes:function(t){for(var o=[];t>0;t--)o.push(Math.floor(Math.random()*256));return o},bytesToWords:function(t){for(var o=[],n=0,e=0;n<t.length;n++,e+=8)o[e>>>5]|=t[n]<<24-e%32;return o},wordsToBytes:function(t){for(var o=[],n=0;n<t.length*32;n+=8)o.push(t[n>>>5]>>>24-n%32&255);return o},bytesToHex:function(t){for(var o=[],n=0;n<t.length;n++)o.push((t[n]>>>4).toString(16)),o.push((t[n]&15).toString(16));return o.join("")},hexToBytes:function(t){for(var o=[],n=0;n<t.length;n+=2)o.push(parseInt(t.substr(n,2),16));return o},bytesToBase64:function(t){for(var o=[],n=0;n<t.length;n+=3)for(var e=t[n]<<16|t[n+1]<<8|t[n+2],r=0;r<4;r++)n*8+r*6<=t.length*8?o.push(u.charAt(e>>>6*(3-r)&63)):o.push("=");return o.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var o=[],n=0,e=0;n<t.length;e=++n%4)e!=0&&o.push((u.indexOf(t.charAt(n-1))&Math.pow(2,-2*e+8)-1)<<e*2|u.indexOf(t.charAt(n))>>>6-e*2);return o}};Br.exports=a})();var ti=Br.exports,Fe={utf8:{stringToBytes:function(u){return Fe.bin.stringToBytes(unescape(encodeURIComponent(u)))},bytesToString:function(u){return decodeURIComponent(escape(Fe.bin.bytesToString(u)))}},bin:{stringToBytes:function(u){for(var a=[],t=0;t<u.length;t++)a.push(u.charCodeAt(t)&255);return a},bytesToString:function(u){for(var a=[],t=0;t<u.length;t++)a.push(String.fromCharCode(u[t]));return a.join("")}}},Xe=Fe;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ei=function(u){return u!=null&&($r(u)||ri(u)||!!u._isBuffer)};function $r(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function ri(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&$r(u.slice(0,0))}(function(){var u=ti,a=Xe.utf8,t=ei,o=Xe.bin,n=function(e,r){e.constructor==String?r&&r.encoding==="binary"?e=o.stringToBytes(e):e=a.stringToBytes(e):t(e)?e=Array.prototype.slice.call(e,0):!Array.isArray(e)&&e.constructor!==Uint8Array&&(e=e.toString());for(var c=u.bytesToWords(e),i=e.length*8,s=1732584193,l=-271733879,d=-1732584194,f=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[i>>>5]|=128<<i%32,c[(i+64>>>9<<4)+14]=i;for(var h=n._ff,m=n._gg,g=n._hh,y=n._ii,p=0;p<c.length;p+=16){var w=s,v=l,b=d,E=f;s=h(s,l,d,f,c[p+0],7,-680876936),f=h(f,s,l,d,c[p+1],12,-389564586),d=h(d,f,s,l,c[p+2],17,606105819),l=h(l,d,f,s,c[p+3],22,-1044525330),s=h(s,l,d,f,c[p+4],7,-176418897),f=h(f,s,l,d,c[p+5],12,1200080426),d=h(d,f,s,l,c[p+6],17,-1473231341),l=h(l,d,f,s,c[p+7],22,-45705983),s=h(s,l,d,f,c[p+8],7,1770035416),f=h(f,s,l,d,c[p+9],12,-1958414417),d=h(d,f,s,l,c[p+10],17,-42063),l=h(l,d,f,s,c[p+11],22,-1990404162),s=h(s,l,d,f,c[p+12],7,1804603682),f=h(f,s,l,d,c[p+13],12,-40341101),d=h(d,f,s,l,c[p+14],17,-1502002290),l=h(l,d,f,s,c[p+15],22,1236535329),s=m(s,l,d,f,c[p+1],5,-165796510),f=m(f,s,l,d,c[p+6],9,-1069501632),d=m(d,f,s,l,c[p+11],14,643717713),l=m(l,d,f,s,c[p+0],20,-373897302),s=m(s,l,d,f,c[p+5],5,-701558691),f=m(f,s,l,d,c[p+10],9,38016083),d=m(d,f,s,l,c[p+15],14,-660478335),l=m(l,d,f,s,c[p+4],20,-405537848),s=m(s,l,d,f,c[p+9],5,568446438),f=m(f,s,l,d,c[p+14],9,-1019803690),d=m(d,f,s,l,c[p+3],14,-187363961),l=m(l,d,f,s,c[p+8],20,1163531501),s=m(s,l,d,f,c[p+13],5,-1444681467),f=m(f,s,l,d,c[p+2],9,-51403784),d=m(d,f,s,l,c[p+7],14,1735328473),l=m(l,d,f,s,c[p+12],20,-1926607734),s=g(s,l,d,f,c[p+5],4,-378558),f=g(f,s,l,d,c[p+8],11,-2022574463),d=g(d,f,s,l,c[p+11],16,1839030562),l=g(l,d,f,s,c[p+14],23,-35309556),s=g(s,l,d,f,c[p+1],4,-1530992060),f=g(f,s,l,d,c[p+4],11,1272893353),d=g(d,f,s,l,c[p+7],16,-155497632),l=g(l,d,f,s,c[p+10],23,-1094730640),s=g(s,l,d,f,c[p+13],4,681279174),f=g(f,s,l,d,c[p+0],11,-358537222),d=g(d,f,s,l,c[p+3],16,-722521979),l=g(l,d,f,s,c[p+6],23,76029189),s=g(s,l,d,f,c[p+9],4,-640364487),f=g(f,s,l,d,c[p+12],11,-421815835),d=g(d,f,s,l,c[p+15],16,530742520),l=g(l,d,f,s,c[p+2],23,-995338651),s=y(s,l,d,f,c[p+0],6,-198630844),f=y(f,s,l,d,c[p+7],10,1126891415),d=y(d,f,s,l,c[p+14],15,-1416354905),l=y(l,d,f,s,c[p+5],21,-57434055),s=y(s,l,d,f,c[p+12],6,1700485571),f=y(f,s,l,d,c[p+3],10,-1894986606),d=y(d,f,s,l,c[p+10],15,-1051523),l=y(l,d,f,s,c[p+1],21,-2054922799),s=y(s,l,d,f,c[p+8],6,1873313359),f=y(f,s,l,d,c[p+15],10,-30611744),d=y(d,f,s,l,c[p+6],15,-1560198380),l=y(l,d,f,s,c[p+13],21,1309151649),s=y(s,l,d,f,c[p+4],6,-145523070),f=y(f,s,l,d,c[p+11],10,-1120210379),d=y(d,f,s,l,c[p+2],15,718787259),l=y(l,d,f,s,c[p+9],21,-343485551),s=s+w>>>0,l=l+v>>>0,d=d+b>>>0,f=f+E>>>0}return u.endian([s,l,d,f])};n._ff=function(e,r,c,i,s,l,d){var f=e+(r&c|~r&i)+(s>>>0)+d;return(f<<l|f>>>32-l)+r},n._gg=function(e,r,c,i,s,l,d){var f=e+(r&i|c&~i)+(s>>>0)+d;return(f<<l|f>>>32-l)+r},n._hh=function(e,r,c,i,s,l,d){var f=e+(r^c^i)+(s>>>0)+d;return(f<<l|f>>>32-l)+r},n._ii=function(e,r,c,i,s,l,d){var f=e+(c^(r|~i))+(s>>>0)+d;return(f<<l|f>>>32-l)+r},n._blocksize=16,n._digestsize=16,Pr.exports=function(e,r){if(e==null)throw new Error("Illegal argument "+e);var c=u.wordsToBytes(n(e,r));return r&&r.asBytes?c:r&&r.asString?o.bytesToString(c):u.bytesToHex(c)}})();var ni=Pr.exports;const ii=$e(ni);class mt{static getMixinKey(a){return this.MIXIN_KEY_ENC_TAB.map(t=>a[t]).join("").slice(0,32)}static encWbi(a,t,o){const n=this.getMixinKey(t+o),e=Math.round(Date.now()/1e3),r=/[!'()*]/g;a={...a,wts:e};const c=Object.keys(a).sort().map(s=>{const l=a[s].toString().replace(r,"");return`${encodeURIComponent(s)}=${encodeURIComponent(l)}`}).join("&"),i=ii(c+n);return c+"&w_rid="+i}static getWbiKeysFromConfig(a){var n,e,r,c;if(!((e=(n=a==null?void 0:a.bilibiliLogin)==null?void 0:n.userInfo)!=null&&e.wbi_img))return null;const{img_url:t,sub_url:o}=a.bilibiliLogin.userInfo.wbi_img;return{imgKey:((r=t.split("/").pop())==null?void 0:r.split(".")[0])||"",subKey:((c=o.split("/").pop())==null?void 0:c.split(".")[0])||""}}static async proxyRequest(a,t={}){try{const n=await(await fetch(this.API.PROXY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a,method:"GET",timeout:7e3,contentType:"application/json",headers:Object.entries(t).map(([e,r])=>({[e]:r}))})})).json();if(n.code!==0)throw new Error("代理请求失败: "+n.msg);return JSON.parse(n.data.body)}catch(o){throw console.error("代理请求失败:",o),new Error("代理请求失败")}}static extractVideoId(a){try{const t=new URL(a);if(t.hostname==="b23.tv")return null;const o=t.pathname.match(/\/(BV[\w]+)/);if(o)return{bvid:o[1]};const n=t.searchParams.get("aid"),e=t.searchParams.get("bvid");return n?{aid:n}:e?{bvid:e}:null}catch{return null}}static formatDuration(a){const t=Math.floor(a/3600),o=Math.floor(a%3600/60),n=a%60;return t>0?`${t}:${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${o}:${n.toString().padStart(2,"0")}`}static async generateQRCode(a){try{return await Jt.toDataURL(a,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(t){throw console.error("生成二维码失败:",t),new Error("生成二维码失败")}}static extractSessData(a){try{return new URL(a).searchParams.get("SESSDATA")}catch{return null}}static async getVideoInfo(a){const t=this.extractVideoId(a);if(!t)return null;try{const o=new URLSearchParams(t),n=await this.proxyRequest(`${this.API.VIDEO_INFO}?${o.toString()}`);if(n.code===0){const e=n.data;return{url:a,title:e.title,artist:e.owner.name,artistIcon:e.owner.face,duration:this.formatDuration(e.duration),thumbnail:e.pic,aid:String(e.aid),bvid:e.bvid,cid:String(e.cid)}}return null}catch(o){return console.error("获取视频信息失败:",o),null}}static async getLoginQRCode(){try{const a=await this.proxyRequest(this.API.QR_LOGIN);if(a.code!==0)throw new Error("获取二维码失败: "+a.message);if(a.data)return{qrcodeData:await this.generateQRCode(a.data.url),qrcode_key:a.data.qrcode_key};throw new Error("获取二维码失败")}catch{throw new Error("获取二维码失败")}}static async checkQRCodeStatus(a){try{const t=await this.proxyRequest(`${this.API.QR_POLL}?qrcode_key=${a}`);if(t.code===0&&t.data.code===0){const o=this.extractSessData(t.data.url),n=o?await this.getUserInfo(o):null;return{code:0,message:"登录成功",url:t.data.url,refresh_token:t.data.refresh_token,timestamp:t.data.timestamp,userInfo:n}}return{code:t.data.code,message:t.data.message||"未知状态"}}catch{throw new Error("检查二维码状态失败")}}static async getUserInfo(a){try{const t=await this.proxyRequest(this.API.USER_INFO,{Cookie:`SESSDATA=${a}`});if(t.code===0){const{face:o,level_info:n,mid:e,uname:r,wbi_img:c}=t.data;return{face:o,level_info:n,mid:e,uname:r,wbi_img:c?{img_url:c.img_url,sub_url:c.sub_url}:void 0}}throw new Error(t.message||"获取用户信息失败")}catch{throw new Error("获取用户信息失败")}}static async getVideoUrl(a,t,o,n){var i,s,l,d,f;const e={bvid:a,cid:t,qn:o,fnval:16,fnver:0,fourk:1,platform:"html5",high_quality:1},r=this.getWbiKeysFromConfig(n);if(!r)throw new Error("无法获取WBI签名密钥");const c=this.encWbi(e,r.imgKey,r.subKey);console.log("[思源媒体播放器] 视频流API签名参数:",c);try{const p=(i=n.bilibiliLogin)!=null&&i.url?this.extractSessData(n.bilibiliLogin.url):null,h={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Referer:"https://www.bilibili.com",Origin:"https://www.bilibili.com"};p&&(h.Cookie=`SESSDATA=${p}`);const m=await this.proxyRequest(`${this.API.VIDEO_STREAM}?${c}`,h);if(m.data.durl)m.data.dash={video:[{id:m.data.quality,baseUrl:decodeURIComponent(m.data.durl[0].url),codecs:"avc1.640032",bandwidth:m.data.durl[0].size,frameRate:"30"}],audio:[]};else if(m.data.dash)m.data.dash.video&&(m.data.dash.video=m.data.dash.video.map(g=>({...g,baseUrl:decodeURIComponent(g.baseUrl)}))),m.data.dash.audio&&(m.data.dash.audio=m.data.dash.audio.map(g=>({...g,baseUrl:decodeURIComponent(g.baseUrl)})));else throw new Error("不支持的视频格式");return console.log("[思源媒体播放器] 视频流信息:",{状态码:m.code,消息:m.message,视频信息:{清晰度:m.data.quality,格式:m.data.format,时长:Math.floor(m.data.timelength/1e3)+"秒",支持清晰度:m.data.accept_description,视频编码:m.data.video_codecid,DASH信息:{视频流:(l=(s=m.data.dash)==null?void 0:s.video)==null?void 0:l.map(g=>({清晰度:g.id,编码格式:g.codecs,带宽:g.bandwidth,帧率:g.frameRate,播放地址:g.baseUrl})),音频流:(f=(d=m.data.dash)==null?void 0:d.audio)==null?void 0:f.map(g=>({编码格式:g.codecs,带宽:g.bandwidth,播放地址:g.baseUrl}))}}}),m}catch(p){throw console.error("[思源媒体播放器] 获取视频流失败:",p),p}}static selectBestStream(a,t=null){return a!=null&&a.length?a.sort((n,e)=>{if(t){if(n.id===t)return-1;if(e.id===t)return 1}return e.id-n.id||e.bandwidth-n.bandwidth})[0]:null}static async getProcessedVideoStream(a,t,o,n){var s;let e=null,r=null,c=0;const i=3;for(;c<i;)try{const l=await this.getVideoUrl(a,t,o,n);if(!l.data.dash&&!l.data.durl)throw new Error("不支持的视频格式");if(l.data.durl)e={id:l.data.quality,baseUrl:l.data.durl[0].url,codecs:"avc1.640032",bandwidth:l.data.durl[0].size,frameRate:"30"},r=null;else{const f=l.data.dash.video||[],p=l.data.dash.audio||[],h=c>0?null:o;e=this.selectBestStream(f,h),r=this.selectBestStream(p)}if(!e)throw new Error("无法获取合适的播放流");const d={Referer:`https://www.bilibili.com/video/${a}/`,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"};if((s=n.bilibiliLogin)!=null&&s.url){const f=new URL(n.bilibiliLogin.url),p=Array.from(f.searchParams.entries()).filter(([h])=>h!=="url").map(([h,m])=>`${h}=${m}`).join("; ");p&&(d.Cookie=p)}return{video:{url:e.baseUrl,quality:e.id,codecs:e.codecs,bandwidth:e.bandwidth,frameRate:e.frameRate},audio:r?{url:r.baseUrl,codecs:r.codecs,bandwidth:r.bandwidth}:void 0,headers:{...d,Origin:"https://www.bilibili.com"}}}catch(l){if(console.error(`[思源媒体播放器] 获取播放流失败 (重试 ${c+1}/${i}):`,l),c++,c===i)throw new Error(`获取播放流失败: ${l.message}`);await new Promise(d=>setTimeout(d,1e3*c))}throw new Error("无法获取播放流")}}et(mt,"API",{BASE:"https://api.bilibili.com",PROXY:"/api/network/forwardProxy",QR_LOGIN:"https://passport.bilibili.com/x/passport-login/web/qrcode/generate",QR_POLL:"https://passport.bilibili.com/x/passport-login/web/qrcode/poll",USER_INFO:"https://api.bilibili.com/x/web-interface/nav",VIDEO_INFO:"https://api.bilibili.com/x/web-interface/view",VIDEO_PAGES:"https://api.bilibili.com/x/player/pagelist",VIDEO_STREAM:"https://api.bilibili.com/x/player/wbi/playurl"}),et(mt,"MIXIN_KEY_ENC_TAB",[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52]);class bt{static convertToFileUrl(a){if(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("file://"))return a;try{const t=a.split("?")[0].split("#")[0];return/^[a-zA-Z]:\\/.test(t)?"file:///"+t.replace(/\\/g,"/"):"file://"+t}catch(t){return console.error("[MediaManager] 路径转换失败:",t),a}}static getFilenameFromUrl(a){try{const o=a.split("?")[0].split("#")[0].split(/[/\\]/);return o[o.length-1]||"unknown"}catch(t){return console.error("[MediaManager] 获取文件名失败:",t),"unknown"}}static getCachedInfo(a){try{const t=localStorage.getItem(`media_info_${a}`);if(!t)return null;const{timestamp:o,info:n}=JSON.parse(t);return Date.now()-o>this.CACHE_EXPIRY?(localStorage.removeItem(`media_info_${a}`),null):n}catch{return null}}static cacheInfo(a,t){if(t)try{localStorage.setItem(`media_info_${a}`,JSON.stringify({timestamp:Date.now(),info:t}))}catch(o){console.error("Failed to cache media info:",o)}}static cleanupCache(){try{const a=Date.now();for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);if(o!=null&&o.startsWith("media_info_"))try{const{timestamp:n}=JSON.parse(localStorage.getItem(o));a-n>this.CACHE_EXPIRY&&localStorage.removeItem(o)}catch{localStorage.removeItem(o)}}}catch(a){console.warn("Failed to cleanup cache:",a)}}static async getMediaInfoFromElement(a){return new Promise((t,o)=>{const n=this.convertToFileUrl(a),e=this.getMediaType(a),r=document.createElement(e);r.style.display="none",document.body.appendChild(r);let c;const i=async()=>{const d=this.formatDuration(r.duration);let f="";if(r instanceof HTMLVideoElement)try{r.currentTime=r.duration/2,await new Promise(m=>r.addEventListener("seeked",m,{once:!0}));const p=document.createElement("canvas");p.width=r.videoWidth,p.height=r.videoHeight,p.getContext("2d").drawImage(r,0,0,p.width,p.height),f=p.toDataURL("image/jpeg",.7)}catch(p){console.warn("Failed to get video thumbnail:",p)}l(),t({title:this.extractTitleFromUrl(a),duration:d,thumbnail:f,artist:"",artistIcon:""})},s=()=>{l(),o(new Error("Failed to load media"))},l=()=>{r.removeEventListener("loadedmetadata",i),r.removeEventListener("error",s),r.parentNode&&r.parentNode.removeChild(r),c&&clearTimeout(c)};c=window.setTimeout(()=>{l(),o(new Error("Media load timeout"))},1e4),r.addEventListener("loadedmetadata",i),r.addEventListener("error",s),r.src=n,r.load()})}static extractTitleFromUrl(a){try{const o=new URL(a).pathname.split("/"),n=o[o.length-1];return decodeURIComponent(n.split(".")[0])||"未知标题"}catch{return"未知标题"}}static formatDuration(a){const t=Math.floor(a/3600),o=Math.floor(a%3600/60),n=Math.floor(a%60);return t>0?`${t}:${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${o}:${n.toString().padStart(2,"0")}`}static getMediaType(a){const t=[".mp4",".webm",".ogg",".mov"],o=[".mp3",".wav",".aac",".m4a"];return t.some(n=>a.toLowerCase().endsWith(n))?"video":o.some(n=>a.toLowerCase().endsWith(n))?"audio":"video"}static async isMediaLink(a){try{if(a.includes("bilibili.com/video/"))return!0;const t=a.split("#")[0].split("?")[0],o=[".mp4",".mp3",".webm",".ogg",".wav",".m4v"];if(t.startsWith("file://")||t.match(/^[a-zA-Z]:\\/))return o.some(n=>t.toLowerCase().endsWith(n));if(t.startsWith("http")){const n=new URL(t).pathname;return o.some(e=>n.toLowerCase().endsWith(e))}return!1}catch(t){return console.error("[MediaManager] 检查媒体链接失败:",t),!1}}static async createMediaItem(a,t={}){try{const o=this.convertToFileUrl(a);let n=this.getCachedInfo(o);n||(a.includes("bilibili.com")?n=await mt.getVideoInfo(a):n={title:this.getFilenameFromUrl(a),artist:"",artistIcon:"",duration:"0:00",thumbnail:"",url:o},this.cacheInfo(o,n));const e=o.includes("bilibili.com")?"bilibili":this.getMediaType(o);return{id:`media-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:n.title,artist:n.artist,artistIcon:n.artistIcon,duration:n.duration,thumbnail:n.thumbnail||(e==="audio"?this.DEFAULT_AUDIO_THUMBNAIL:""),url:o,type:e,isPinned:!1,isFavorite:!1,aid:n.aid,bvid:n.bvid,cid:n.cid,originalUrl:a}}catch(o){return console.error("[MediaManager] 创建媒体项失败:",o),null}}static getMediaInfoFromItems(a){return a.map(t=>({url:t.url,...t.aid?{aid:t.aid}:{},...t.bvid?{bvid:t.bvid}:{},...t.cid?{cid:t.cid}:{}}))}static async createMediaItems(a){return(await Promise.all(a.map(o=>this.createMediaItem(o.url,o)))).filter(o=>o!==null)}}et(bt,"DEFAULT_AUDIO_THUMBNAIL",`data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <path d="M628.905386 769.860427 628.905386 482.261019l169.381759-27.464779C771.308637 311.811584 645.822916 203.633728 494.993179 203.633728c-170.51599 0-308.738475 138.222485-308.738475 308.738875 0 170.516989 138.222485 308.738875 308.738475 308.738875 16.540186 0 32.756191-1.34209 48.589456-3.839397 12.391598-20.573051 34.625524-37.084856 62.858182-44.145869C613.897561 771.276467 621.429455 770.182208 628.905386 769.860427zM551.718919 228.830645l-33.079572 144.922942-33.078373 0-23.62798-144.922942C496.589896 211.497397 551.718919 228.830645 551.718919 228.830645zM494.993179 626.995689c-63.300482 0-114.622086-51.317007-114.622086-114.622886 0-63.30348 51.321604-114.622486 114.622086-114.622486 63.306478 0 114.622486 51.319006 114.622486 114.622486C609.615665 575.678482 558.299457 626.995689 494.993179 626.995689zM494.993179 424.978057c-48.20112 0-87.394147 39.192827-87.394147 87.394546 0 48.20112 39.192827 87.395546 87.394147 87.395546 48.201719 0 87.395946-39.194226 87.395946-87.395546C582.389124 464.170884 543.194698 424.978057 494.993179 424.978057zM494.993179 574.79708c-34.421063 0-62.423477-28.002015-62.423477-62.424476 0-34.421662 28.011408-62.424076 62.423477-62.424076 34.432055 0 62.416082 28.002414 62.416082 62.424076C557.409061 546.795265 529.425034 574.79708 494.993179 574.79708zM534.528574 870.531771c1.499983 8.297374 4.789753 16.008146 9.524542 22.939447-16.073102 2.058604-32.429013 3.239803-49.050144 3.239803-211.934708 0-384.347812-172.417701-384.347812-384.338419 0-211.922716 172.413104-384.338419 384.338019-384.338419 188.118456 0 345.001689 135.905456 377.892189 314.664258l-37.310503 6.059292c-29.969681-160.790984-171.236502-282.919381-340.581686-282.919381-191.084445 0-346.53365 155.451604-346.53365 346.53425 0 191.080048 155.449205 346.53425 346.53365 346.53425 12.796724 0 25.414169-0.748493 37.859731-2.104573C532.968631 861.361189 533.461497 865.948079 534.528574 870.531771zM912.096583 463.425989l0 333.227272c0 27.59629-20.573051 49.609165-52.658098 57.716668-35.234911 8.736077-69.250848-6.021917-75.997274-33.022611-6.760416-27.057655 16.31294-56.065787 51.53386-64.879811 15.920206-3.931335 31.587384-3.128879 44.698494 1.494986L879.673565 557.20001l-180.148459 32.927675-0.834434 249.757065-0.036975 0c-0.156894 23.646767-21.482435 46.868223-52.156438 54.45388-34.814196 8.759061-71.280472-7.807706-75.193819-32.597899-6.691463-26.747865 16.124068-55.470191 51.00222-64.201272 15.699356-3.904353 31.039755-3.119885 43.933013 1.402049L666.238674 503.300354 912.096583 463.425989z" fill="currentColor" style="color:var(--b3-theme-primary)"/></svg>`),et(bt,"CACHE_EXPIRY",24*60*60*1e3);function Je(u,a,t){const o=u.slice();return o[39]=a[t],o}function Ze(u,a,t){const o=u.slice();return o[42]=a[t],o}function ai(u){let a,t=u[42].name+"",o,n,e;function r(){return u[19](u[42])}function c(...i){return u[20](u[42],...i)}return{c(){a=z("button"),o=tt(t),S(a,"class","tab"),ut(a,"active",u[2]===u[42].id)},m(i,s){G(i,a,s),F(a,o),n||(e=[Z(a,"click",r),Z(a,"contextmenu",gr(c))],n=!0)},p(i,s){u=i,s[0]&2&&t!==(t=u[42].name+"")&&at(o,t),s[0]&6&&ut(a,"active",u[2]===u[42].id)},d(i){i&&W(a),n=!1,st(e)}}}function oi(u){let a,t,o,n,e,r;function c(...s){return u[17](u[42],...s)}function i(...s){return u[18](u[42],...s)}return{c(){a=z("div"),t=z("input"),S(t,"id",o="tab-edit-"+u[42].id),S(t,"type","text"),S(t,"class","tab-input"),t.value=n=u[42].name,S(a,"class","tab-edit-wrapper")},m(s,l){G(s,a,l),F(a,t),e||(r=[Z(t,"blur",c),Z(t,"keydown",i)],e=!0)},p(s,l){u=s,l[0]&2&&o!==(o="tab-edit-"+u[42].id)&&S(t,"id",o),l[0]&2&&n!==(n=u[42].name)&&t.value!==n&&(t.value=n)},d(s){s&&W(a),e=!1,st(r)}}}function tr(u,a){let t,o;function n(c,i){return c[42].isEditing?oi:ai}let e=n(a),r=e(a);return{key:u,first:null,c(){t=ke(),r.c(),o=ke(),this.first=t},m(c,i){G(c,t,i),r.m(c,i),G(c,o,i)},p(c,i){a=c,e===(e=n(a))&&r?r.p(a,i):(r.d(1),r=e(a),r&&(r.c(),r.m(o.parentNode,o)))},d(c){c&&(W(t),W(o)),r.d(c)}}}function si(u){let a,t,o;return{c(){a=z("button"),a.textContent="+",S(a,"class","tab tab-add")},m(n,e){G(n,a,e),t||(o=Z(a,"click",u[10].add),t=!0)},p:nt,d(n){n&&W(a),t=!1,o()}}}function li(u){let a,t,o;return{c(){a=z("input"),S(a,"type","text"),S(a,"class","tab-input"),S(a,"placeholder","新标签")},m(n,e){G(n,a,e),u[21](a),t||(o=[Z(a,"blur",u[10].save),Z(a,"keydown",u[10].save)],t=!0)},p:nt,d(n){n&&W(a),u[21](null),t=!1,st(o)}}}function ci(u){let a,t=[],o=new Map,n=Ft(u[3].items);const e=r=>r[39].id;for(let r=0;r<n.length;r+=1){let c=Je(u,n,r),i=e(c);o.set(i,t[r]=rr(i,c))}return{c(){a=z("div");for(let r=0;r<t.length;r+=1)t[r].c();S(a,"class","playlist-items")},m(r,c){G(r,a,c);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(a,null)},p(r,c){c[0]&2569&&(n=Ft(r[3].items),t=Be(t,c,e,1,r,n,o,a,Pe,rr,null,Je))},d(r){r&&W(a);for(let c=0;c<t.length;c+=1)t[c].d()}}}function ui(u){let a;return{c(){a=z("div"),a.textContent="暂无媒体文件",S(a,"class","playlist-empty")},m(t,o){G(t,a,o)},p:nt,d(t){t&&W(a)}}}function er(u){let a,t,o,n,e,r,c=u[39].artist+"",i;return{c(){a=z("div"),t=z("img"),e=V(),r=z("span"),i=tt(c),S(t,"class","artist-icon"),xt(t.src,o=u[39].artistIcon||"/images/default-avatar.png")||S(t,"src",o),S(t,"alt",n=u[39].artist),S(a,"class","item-artist")},m(s,l){G(s,a,l),F(a,t),F(a,e),F(a,r),F(r,i)},p(s,l){l[0]&8&&!xt(t.src,o=s[39].artistIcon||"/images/default-avatar.png")&&S(t,"src",o),l[0]&8&&n!==(n=s[39].artist)&&S(t,"alt",n),l[0]&8&&c!==(c=s[39].artist+"")&&at(i,c)},d(s){s&&W(a)}}}function rr(u,a){let t,o,n,e,r,c,i,s=(a[39].duration||"--:--")+"",l,d,f,p,h=a[39].title+"",m,g,y,w,v,b,E=a[39].url+"",j,x,k,T,B,_=a[39].artist&&er(a);function D(){return a[22](a[39])}function C(...I){return a[23](a[39],...I)}return{key:u,first:null,c(){var I;t=z("div"),o=z("div"),n=z("img"),c=V(),i=z("span"),l=tt(s),d=V(),f=z("div"),p=z("div"),m=tt(h),y=V(),_&&_.c(),w=V(),v=z("div"),b=z("div"),j=tt(E),k=V(),xt(n.src,e=a[39].thumbnail)||S(n,"src",e),S(n,"alt",r=a[39].title),S(i,"class","duration"),S(o,"class","item-thumbnail"),S(p,"class","item-title"),S(p,"title",g=a[39].title),S(b,"class","item-url"),S(b,"title",x=a[39].url),S(v,"class","item-meta-group"),S(f,"class","item-info"),S(t,"class","playlist-item"),ut(t,"active",((I=a[0])==null?void 0:I.id)===a[39].id),this.first=t},m(I,M){G(I,t,M),F(t,o),F(o,n),F(o,c),F(o,i),F(i,l),F(t,d),F(t,f),F(f,p),F(p,m),F(f,y),_&&_.m(f,null),F(f,w),F(f,v),F(v,b),F(b,j),F(t,k),T||(B=[Z(t,"click",D),Z(t,"contextmenu",gr(C))],T=!0)},p(I,M){var $;a=I,M[0]&8&&!xt(n.src,e=a[39].thumbnail)&&S(n,"src",e),M[0]&8&&r!==(r=a[39].title)&&S(n,"alt",r),M[0]&8&&s!==(s=(a[39].duration||"--:--")+"")&&at(l,s),M[0]&8&&h!==(h=a[39].title+"")&&at(m,h),M[0]&8&&g!==(g=a[39].title)&&S(p,"title",g),a[39].artist?_?_.p(a,M):(_=er(a),_.c(),_.m(f,w)):_&&(_.d(1),_=null),M[0]&8&&E!==(E=a[39].url+"")&&at(j,E),M[0]&8&&x!==(x=a[39].url)&&S(b,"title",x),M[0]&9&&ut(t,"active",(($=a[0])==null?void 0:$.id)===a[39].id)},d(I){I&&W(t),_&&_.d(),T=!1,st(B)}}}function nr(u){let a,t,o;return{c(){a=z("span"),a.textContent="×",S(a,"class","clear-icon")},m(n,e){G(n,a,e),t||(o=Z(a,"click",u[26]),t=!0)},p:nt,d(n){n&&W(a),t=!1,o()}}}function di(u){let a,t,o,n,e,r,c,i,s,l=[],d=new Map,f,p,h,m,g,y,w,v,b,E,j,x,k,T=Ft(u[1]);const B=L=>L[42].id;for(let L=0;L<T.length;L+=1){let R=Ze(u,T,L),O=B(R);d.set(O,l[L]=tr(O,R))}function _(L,R){return L[4]?li:si}let D=_(u),C=D(u);function I(L,R){return L[7]?ci:ui}let M=I(u),$=M(u),P=u[5]&&nr(u);return{c(){a=z("div"),t=z("div"),o=z("h3"),o.textContent="播放列表",n=V(),e=z("span"),r=tt(u[7]),c=tt(" 个项目"),i=V(),s=z("div");for(let L=0;L<l.length;L+=1)l[L].c();f=V(),p=z("div"),C.c(),h=V(),m=z("div"),$.c(),g=V(),y=z("div"),w=z("div"),v=z("input"),b=V(),P&&P.c(),E=V(),j=z("button"),j.textContent="添加",S(e,"class","playlist-count"),S(t,"class","playlist-header"),S(p,"class","tab-add-wrapper"),S(s,"class","playlist-tabs"),S(m,"class","playlist-content"),S(v,"type","text"),S(v,"class","tab-input playlist-input"),S(v,"placeholder","输入媒体链接..."),S(w,"class","input-wrapper"),S(j,"class","add-btn"),S(y,"class","playlist-footer"),S(a,"class","playlist")},m(L,R){G(L,a,R),F(a,t),F(t,o),F(t,n),F(t,e),F(e,r),F(e,c),F(a,i),F(a,s);for(let O=0;O<l.length;O+=1)l[O]&&l[O].m(s,null);F(s,f),F(s,p),C.m(p,null),F(a,h),F(a,m),$.m(m,null),F(a,g),F(a,y),F(y,w),F(w,v),Ue(v,u[5]),F(w,b),P&&P.m(w,null),F(y,E),F(y,j),x||(k=[Z(v,"input",u[24]),Z(v,"keydown",u[25]),Z(j,"click",u[27])],x=!0)},p(L,R){R[0]&128&&at(r,L[7]),R[0]&1286&&(T=Ft(L[1]),l=Be(l,R,B,1,L,T,d,s,Pe,tr,f,Ze)),D===(D=_(L))&&C?C.p(L,R):(C.d(1),C=D(L),C&&(C.c(),C.m(p,null))),M===(M=I(L))&&$?$.p(L,R):($.d(1),$=M(L),$&&($.c(),$.m(m,null))),R[0]&32&&v.value!==L[5]&&Ue(v,L[5]),L[5]?P?P.p(L,R):(P=nr(L),P.c(),P.m(w,null)):P&&(P.d(1),P=null)},i:nt,o:nt,d(L){L&&W(a);for(let R=0;R<l.length;R+=1)l[R].d();C.d(),$.d(),P&&P.d(),x=!1,st(k)}}}function fi(u,a,t){let o,n,{items:e=[]}=a,{currentItem:r=null}=a,{configManager:c}=a,i=[],s="default",l=!1,d="",f;const p=De();let h=null,m=0;async function g(A){const H=Date.now();h===A.id&&H-m<300?(T(A),h=null,m=0):(h=A.id,m=H,p("select",A))}jt(async()=>{bt.cleanupCache(),await y()});async function y(){const A=await c.load(),H=await Promise.all(A.playlists.map(async U=>({...U,items:await bt.createMediaItems(U.items||[])})));t(1,i=H)}function w(){const A=i.map(H=>({id:H.id,name:H.name,isFixed:H.isFixed,items:bt.getMediaInfoFromItems(H.items||[])}));c.updatePlaylists(A)}async function v(A){if(A)try{let H=A;const U=A.match(/^(BV[\w]+)$/i),N=A.match(/^(av\d+)$/i);U?H=`https://www.bilibili.com/video/${U[1]}`:N&&(H=`https://www.bilibili.com/video/${N[1]}`);const Q=await bt.createMediaItem(H);if(!Q){q.showMessage("无法解析媒体文件");return}Q.type==="bilibili"&&Q.bvid&&Q.cid&&console.log("[思源媒体播放器] B站视频信息:",{标题:Q.title,BV号:Q.bvid,CID:Q.cid,UP主:Q.artist,时长:Q.duration});const it=i.find(ot=>ot.id===s);if(!it)return;it.items=[...it.items||[],Q],t(1,i),t(5,d=""),q.showMessage("已添加到播放列表"),p("addMedia",{tabId:s,url:H.trim()})}catch(H){console.error("Failed to add media:",H),q.showMessage("添加媒体失败")}}const b={add(){l||(t(4,l=!0),setTimeout(()=>f==null?void 0:f.focus(),0))},save(A,H){if(A instanceof KeyboardEvent&&A.key!=="Enter")return;const U=A.target,N=U.value.trim();H?t(1,i=i.map(Q=>Q.id===H.id?{...Q,name:N||Q.name,isEditing:!1}:Q)):N&&(t(1,i=[...i,{id:`tab-${Date.now()}`,name:N}]),t(4,l=!1)),U.value=""},showContextMenu(A,H){if(H.isFixed)return;const U=new q.Menu("tabContextMenu");U.addItem({icon:"iconEdit",label:"重命名",click:()=>{t(1,i=i.map(N=>({...N,isEditing:N.id===H.id}))),setTimeout(()=>{const N=document.querySelector(`#tab-edit-${H.id}`);N==null||N.focus(),N==null||N.select()},0)}}),U.addItem({icon:"iconTrashcan",label:"删除",click:()=>{t(1,i=i.filter(N=>N.id!==H.id)),s===H.id&&t(2,s="default")}}),U.open({x:A.clientX,y:A.clientY})}},E={showContextMenu(A,H){const U=new q.Menu("mediaItemMenu");U.addItem({icon:"iconPlay",label:"播放",click:()=>p("play",H)}),U.addItem({icon:"iconPin",label:H.isPinned?"取消置顶":"置顶",click:()=>this.togglePin(H)}),U.addItem({icon:"iconHeart",label:H.isFavorite?"取消收藏":"收藏",click:()=>this.toggleFavorite(H)}),U.addSeparator(),U.addItem({icon:"iconTrashcan",label:"删除",click:()=>{const N=i.find(Q=>Q.id===s);if(N){if(N.items=N.items.filter(Q=>Q.id!==H.id),t(1,i),H.isFavorite){const Q=i.find(it=>it.id==="favorites");Q&&(Q.items=Q.items.filter(it=>it.id!==H.id))}p("remove",H)}}}),U.open({x:A.clientX,y:A.clientY})},togglePin(A){const H=i.find(N=>N.id===s);if(!H)return;const U=H.items.map(N=>N.id===A.id?{...N,isPinned:!N.isPinned}:N);H.items=[...U.filter(N=>N.isPinned),...U.filter(N=>!N.isPinned)],t(1,i)},toggleFavorite(A){const H=i.find(N=>N.id==="favorites"),U=i.find(N=>N.id===s);!H||!U||(A.isFavorite?H.items=H.items.filter(N=>N.id!==A.id):H.items=[...H.items||[],{...A,isFavorite:!0}],U.items=U.items.map(N=>N.id===A.id?{...N,isFavorite:!N.isFavorite}:N),t(1,i))}};function j(A){p("play",{item:{...A,startTime:A.startTime||0,endTime:A.endTime,isLoop:A.isLoop,loopCount:A.loopCount}})}function x(A){t(13,e=[...e,A]),e.length===1&&j(A)}async function k(A){try{console.log("[Playlist] 接收到媒体项:",A);const H=B(A);if(H){console.log("[Playlist] 媒体已存在，合并播放控制参数:",H);const N={...H,startTime:A.startTime,endTime:A.endTime,originalUrl:A.originalUrl};await T(N);return}const U=i.find(N=>N.id===s);if(!U)return;U.items=[...U.items||[],A],t(1,i),await T(A)}catch(H){console.error("[Playlist] 处理媒体项失败:",H),q.showMessage("添加媒体失败")}}async function T(A){try{const H=await c.getConfig();if(A.type==="bilibili"&&A.bvid&&A.cid){const U=await mt.getProcessedVideoStream(A.bvid,A.cid,0,H);p("play",{...A,url:U.video.url,audioUrl:U.audio.url,headers:U.headers,isLoop:A.startTime!==void 0&&A.endTime!==void 0})}else p("play",{...A,isLoop:A.startTime!==void 0&&A.endTime!==void 0});t(0,r=A)}catch(H){console.error("[Playlist] 播放失败:",H),q.showMessage("播放失败，请重试")}}function B(A){return o!=null&&o.items&&o.items.find(H=>{if(A.type==="bilibili"&&H.type==="bilibili")return H.bvid===A.bvid;const U=it=>{try{const ot=new URL(it);return`${ot.protocol}//${ot.host}${ot.pathname}`}catch{return it.split("#")[0].split("?")[0]}},N=U(H.originalUrl||H.url),Q=U(A.originalUrl||A.url);return N===Q})||null}async function _(){const A=d.trim();if(!A){q.showMessage("请输入媒体链接");return}if(await D(A)){q.showMessage("该媒体已在播放列表中"),t(5,d="");return}await v(A)}async function D(A){if(!o)return null;const H=await bt.createMediaItem(A);return H&&o.items.find(U=>{if(H.type==="bilibili"&&U.type==="bilibili")return U.bvid===H.bvid;const N=ot=>{try{const pt=new URL(ot);return`${pt.protocol}//${pt.host}${pt.pathname}`}catch{return ot.split("#")[0].split("?")[0]}},Q=N(U.originalUrl||U.url),it=N(H.originalUrl||H.url);return Q===it})||null}const C=(A,H)=>b.save(H,A),I=(A,H)=>b.save(H,A),M=A=>{t(2,s=A.id),p("tabChange",A.id)},$=(A,H)=>b.showContextMenu(H,A);function P(A){St[A?"unshift":"push"](()=>{f=A,t(6,f)})}const L=A=>g(A),R=(A,H)=>E.showContextMenu(H,A);function O(){d=this.value,t(5,d)}const J=A=>A.key==="Enter"&&_(),X=()=>t(5,d=""),rt=()=>d&&_();return u.$$set=A=>{"items"in A&&t(13,e=A.items),"currentItem"in A&&t(0,r=A.currentItem),"configManager"in A&&t(14,c=A.configManager)},u.$$.update=()=>{var A;u.$$.dirty[0]&6&&t(3,o=i.find(H=>H.id===s)),u.$$.dirty[0]&8&&t(7,n=((A=o==null?void 0:o.items)==null?void 0:A.length)||0),u.$$.dirty[0]&2&&i.length>0&&w()},[r,i,s,o,l,d,f,n,p,g,b,E,_,e,c,x,k,C,I,M,$,P,L,R,O,J,X,rt]}class pi extends Xt{constructor(a){super(),Qt(this,a,fi,di,Gt,{items:13,currentItem:0,configManager:14,addItem:15,handleMediaItem:16},null,[-1,-1])}get addItem(){return this.$$.ctx[15]}get handleMediaItem(){return this.$$.ctx[16]}}function ir(u,a,t){const o=u.slice();return o[21]=a[t],o}function hi(u){let a;return{c(){a=z("div"),a.textContent="登录B站账号以获取更多功能",S(a,"class","setting-description")},m(t,o){G(t,a,o)},p:nt,d(t){t&&W(a)}}}function mi(u){let a,t,o,n,e,r,c=u[3].uname+"",i,s,l,d,f=u[3].level_info.current_level+"",p,h,m,g,y=u[3].mid+"",w;return{c(){a=z("div"),t=z("img"),n=V(),e=z("div"),r=z("div"),i=tt(c),s=V(),l=z("span"),d=tt("LV"),p=tt(f),h=V(),m=z("div"),g=tt("UID: "),w=tt(y),S(t,"class","user-avatar"),xt(t.src,o=u[3].face)||S(t,"src",o),S(t,"alt","头像"),S(l,"class","user-level"),S(r,"class","user-name"),S(m,"class","user-id"),S(e,"class","user-details"),S(a,"class","user-wrapper")},m(v,b){G(v,a,b),F(a,t),F(a,n),F(a,e),F(e,r),F(r,i),F(r,s),F(r,l),F(l,d),F(l,p),F(e,h),F(e,m),F(m,g),F(m,w)},p(v,b){b&8&&!xt(t.src,o=v[3].face)&&S(t,"src",o),b&8&&c!==(c=v[3].uname+"")&&at(i,c),b&8&&f!==(f=v[3].level_info.current_level+"")&&at(p,f),b&8&&y!==(y=v[3].mid+"")&&at(w,y)},d(v){v&&W(a)}}}function gi(u){let a,t,o;return{c(){a=z("button"),a.textContent="退出",S(a,"class","b3-button b3-button--outline")},m(n,e){G(n,a,e),t||(o=Z(a,"click",u[7]),t=!0)},p:nt,d(n){n&&W(a),t=!1,o()}}}function vi(u){let a,t,o,n,e;return{c(){a=z("button"),t=tt("登录"),S(a,"class","b3-button b3-button--outline"),a.disabled=o=!!u[1]},m(r,c){G(r,a,c),F(a,t),n||(e=Z(a,"click",u[6]),n=!0)},p(r,c){c&2&&o!==(o=!!r[1])&&(a.disabled=o)},d(r){r&&W(a),n=!1,e()}}}function ar(u){let a,t,o,n,e,r,c,i,s;return{c(){a=z("div"),t=z("div"),t.innerHTML='<div class="qrcode-title">哔哩哔哩扫码登录</div> <div class="qrcode-description">打开手机客户端扫描二维码</div>',o=V(),n=z("div"),e=z("img"),c=V(),i=z("div"),s=tt(u[4]),S(t,"class","qrcode-header"),xt(e.src,r=u[1])||S(e,"src",r),S(e,"alt","B站登录二维码"),S(i,"class","scan-status"),ut(i,"success",u[2]),S(n,"class","qrcode-container"),S(a,"class","bilibili-qrcode")},m(l,d){G(l,a,d),F(a,t),F(a,o),F(a,n),F(n,e),F(n,c),F(n,i),F(i,s)},p(l,d){d&2&&!xt(e.src,r=l[1])&&S(e,"src",r),d&16&&at(s,l[4]),d&4&&ut(i,"success",l[2])},d(l){l&&W(a)}}}function or(u){let a,t=u[21].description+"",o;return{c(){a=z("div"),o=tt(t),S(a,"class","setting-description")},m(n,e){G(n,a,e),F(a,o)},p(n,e){e&32&&t!==(t=n[21].description+"")&&at(o,t)},d(n){n&&W(a)}}}function sr(u){let a,t,o,n,e,r,c,i,s,l,d;function f(...g){return u[12](u[21],...g)}function p(g,y){return g[21].key==="speed"?bi:yi}let h=p(u),m=h(u);return{c(){var g,y,w;a=z("div"),t=z("div"),o=z("input"),i=V(),s=z("span"),m.c(),S(o,"type","range"),S(o,"min",n=((g=u[21].slider)==null?void 0:g.min)??0),S(o,"max",e=((y=u[21].slider)==null?void 0:y.max)??100),S(o,"step",r=((w=u[21].slider)==null?void 0:w.step)??1),o.value=c=u[21].value,S(s,"class","slider-value"),S(t,"class","slider-wrapper"),S(a,"class","setting-content")},m(g,y){G(g,a,y),F(a,t),F(t,o),F(t,i),F(t,s),m.m(s,null),l||(d=Z(o,"input",f),l=!0)},p(g,y){var w,v,b;u=g,y&32&&n!==(n=((w=u[21].slider)==null?void 0:w.min)??0)&&S(o,"min",n),y&32&&e!==(e=((v=u[21].slider)==null?void 0:v.max)??100)&&S(o,"max",e),y&32&&r!==(r=((b=u[21].slider)==null?void 0:b.step)??1)&&S(o,"step",r),y&32&&c!==(c=u[21].value)&&(o.value=c),h===(h=p(u))&&m?m.p(u,y):(m.d(1),m=h(u),m&&(m.c(),m.m(s,null)))},d(g){g&&W(a),m.d(),l=!1,d()}}}function yi(u){let a=u[21].value+"",t;return{c(){t=tt(a)},m(o,n){G(o,t,n)},p(o,n){n&32&&a!==(a=o[21].value+"")&&at(t,a)},d(o){o&&W(t)}}}function bi(u){let a=u[21].value/100+"",t,o;return{c(){t=tt(a),o=tt("x")},m(n,e){G(n,t,e),G(n,o,e)},p(n,e){e&32&&a!==(a=n[21].value/100+"")&&at(t,a)},d(n){n&&(W(t),W(o))}}}function lr(u){let a,t,o,n,e,r,c;function i(...s){return u[13](u[21],...s)}return{c(){a=z("label"),t=z("input"),n=V(),e=z("span"),S(t,"type","checkbox"),t.checked=o=u[21].value,S(e,"class","checkbox-custom"),S(a,"class","checkbox-wrapper")},m(s,l){G(s,a,l),F(a,t),F(a,n),F(a,e),r||(c=Z(t,"change",i),r=!0)},p(s,l){u=s,l&32&&o!==(o=u[21].value)&&(t.checked=o)},d(s){s&&W(a),r=!1,c()}}}function cr(u,a){let t,o,n,e=a[21].title+"",r,c,i,s,l,d,f=a[21].description&&or(a),p=a[21].type==="slider"&&sr(a),h=a[21].type==="checkbox"&&lr(a);return{key:u,first:null,c(){t=z("div"),o=z("div"),n=z("div"),r=tt(e),c=V(),f&&f.c(),i=V(),p&&p.c(),s=V(),l=z("div"),h&&h.c(),d=V(),S(n,"class","setting-title"),S(o,"class","setting-info"),S(l,"class","setting-control"),S(t,"class","setting-item"),this.first=t},m(m,g){G(m,t,g),F(t,o),F(o,n),F(n,r),F(o,c),f&&f.m(o,null),F(o,i),p&&p.m(o,null),F(t,s),F(t,l),h&&h.m(l,null),F(t,d)},p(m,g){a=m,g&32&&e!==(e=a[21].title+"")&&at(r,e),a[21].description?f?f.p(a,g):(f=or(a),f.c(),f.m(o,i)):f&&(f.d(1),f=null),a[21].type==="slider"?p?p.p(a,g):(p=sr(a),p.c(),p.m(o,null)):p&&(p.d(1),p=null),a[21].type==="checkbox"?h?h.p(a,g):(h=lr(a),h.c(),h.m(l,null)):h&&(h.d(1),h=null)},d(m){m&&W(t),f&&f.d(),p&&p.d(),h&&h.d()}}}function wi(u){let a,t,o,n,e,r,c,i,s,l,d,f,p,h,m,g,y,w,v,b=[],E=new Map,j,x;function k(P,L){return P[2]&&P[3]?mi:hi}let T=k(u),B=T(u);function _(P,L){return P[2]?gi:vi}let D=_(u),C=D(u),I=u[1]&&!u[2]&&ar(u),M=Ft(u[5]);const $=P=>P[21].key;for(let P=0;P<M.length;P+=1){let L=ir(u,M,P),R=$(L);E.set(R,b[P]=cr(R,L))}return{c(){a=z("div"),t=z("div"),o=z("h3"),o.textContent="设置",n=V(),e=z("div"),r=z("button"),r.innerHTML="<span>重置</span>",c=V(),i=z("button"),i.innerHTML="<span>保存</span>",s=V(),l=z("div"),d=z("div"),f=z("div"),p=z("div"),p.textContent="B站账号",h=V(),m=z("div"),B.c(),g=V(),y=z("div"),C.c(),w=V(),I&&I.c(),v=V();for(let P=0;P<b.length;P+=1)b[P].c();S(r,"class","btn"),S(i,"class","btn primary"),S(e,"class","header-actions"),S(t,"class","settings-header"),S(p,"class","setting-title"),S(m,"class","setting-content"),S(f,"class","setting-info"),S(y,"class","setting-control"),S(d,"class","setting-item"),S(l,"class","setting-panel"),S(a,"class","settings"),S(a,"data-name",u[0])},m(P,L){G(P,a,L),F(a,t),F(t,o),F(t,n),F(t,e),F(e,r),F(e,c),F(e,i),F(a,s),F(a,l),F(l,d),F(d,f),F(f,p),F(f,h),F(f,m),B.m(m,null),F(d,g),F(d,y),C.m(y,null),F(l,w),I&&I.m(l,null),F(l,v);for(let R=0;R<b.length;R+=1)b[R]&&b[R].m(l,null);j||(x=[Z(r,"click",u[9]),Z(i,"click",u[8])],j=!0)},p(P,[L]){T===(T=k(P))&&B?B.p(P,L):(B.d(1),B=T(P),B&&(B.c(),B.m(m,null))),D===(D=_(P))&&C?C.p(P,L):(C.d(1),C=D(P),C&&(C.c(),C.m(y,null))),P[1]&&!P[2]?I?I.p(P,L):(I=ar(P),I.c(),I.m(l,v)):I&&(I.d(1),I=null),L&1056&&(M=Ft(P[5]),b=Be(b,L,$,1,P,M,E,l,Pe,cr,null,ir)),L&1&&S(a,"data-name",P[0])},i:nt,o:nt,d(P){P&&W(a),B.d(),C.d(),I&&I.d();for(let L=0;L<b.length;L+=1)b[L].d();j=!1,st(x)}}}function xi(u,a,t){let{group:o}=a,{configManager:n}=a,e="",r="",c,i=!1,s=null,l="等待扫码...";jt(()=>()=>{c&&clearInterval(c)});async function d(){try{const x=await mt.getLoginQRCode();t(1,e=x.qrcodeData),r=x.qrcode_key,h()}catch(x){q.showMessage(x.message||"获取二维码失败")}}async function f(x){t(2,i=!0),x.timestamp,t(3,s=x.userInfo);const k=await n.getConfig();k.bilibiliLogin={url:x.url,refresh_token:x.refresh_token,timestamp:x.timestamp,userInfo:x.userInfo},await n.save(),q.showMessage("登录成功")}async function p(){t(2,i=!1),t(3,s=null);const x=await n.getConfig();delete x.bilibiliLogin,await n.save(),q.showMessage("已退出登录")}function h(){c&&clearInterval(c),c=window.setInterval(async()=>{try{const x=await mt.checkQRCodeStatus(r);switch(x.code){case 0:clearInterval(c),t(4,l="登录成功"),await f(x);break;case 86038:clearInterval(c),t(4,l="二维码已失效，请重新获取"),t(1,e="");break;case 86090:t(4,l="二维码已扫描，请在手机上确认登录");break;case 86101:t(4,l="等待扫码...");break;default:t(4,l=x.message||"未知状态")}}catch{clearInterval(c),q.showMessage("检查扫码状态失败")}},3e3)}const m=[{key:"autoplay",value:!1,type:"checkbox",title:"自动播放",description:"打开媒体文件时自动开始播放"},{key:"loop",value:!1,type:"checkbox",title:"循环播放",description:"自动循环播放当前媒体"},{key:"volume",value:70,type:"slider",title:"默认音量",description:"新打开媒体时的默认音量",slider:{min:0,max:100,step:1}},{key:"speed",value:100,type:"slider",title:"播放速度",description:"调整媒体播放速度",slider:{min:10,max:200,step:10}},{key:"hotkey",value:!0,type:"checkbox",title:"启用快捷键",description:"启用播放器快捷键控制"},{key:"loopCount",value:3,type:"slider",title:"默认循环次数",description:"循环片段的默认循环次数",slider:{min:1,max:10,step:1}}];let g=[...m];jt(async()=>{const x=await n.load();x.bilibiliLogin&&(t(2,i=!0),x.bilibiliLogin.timestamp,t(3,s=x.bilibiliLogin.userInfo||null)),t(5,g=g.map(k=>({...k,value:x.settings[k.key]??k.value})))});const y=De();async function w(){const x=g.reduce((k,T)=>({...k,[T.key]:T.value}),{});await n.updateSettings(x),y("changed",{settings:x}),q.showMessage("设置已保存")}function v(){t(5,g=m.map(x=>({...x}))),y("changed",{settings:g.reduce((x,k)=>({...x,[k.key]:k.value}),{})}),q.showMessage("设置已重置")}function b(x,k){const T=x.target;let B=T.type==="checkbox"?T.checked:T.value;k.type==="slider"&&(B=Number(B),k.value=B,t(5,g));const _=g.findIndex(D=>D.key===k.key);_!==-1&&(t(5,g[_].value=B,g),t(5,g))}const E=(x,k)=>b(k,x),j=(x,k)=>b(k,x);return u.$$set=x=>{"group"in x&&t(0,o=x.group),"configManager"in x&&t(11,n=x.configManager)},[o,e,i,s,l,g,d,p,w,v,b,n,E,j]}class ki extends Xt{constructor(a){super(),Qt(this,a,xi,wi,Gt,{group:0,configManager:11})}}function ur(u){let a;return{c(){a=xe("path"),S(a,"d","M608.256 321.609143q-41.106286-17.773714-86.308571-17.773714-45.129143 0-86.162286 17.627428-35.401143 15.213714-63.341714 41.618286v-9.947429q0-14.043429-10.020572-23.990857-9.874286-9.801143-23.771428-9.801143t-23.844572 10.020572q-10.020571 9.947429-10.020571 23.771428V470.308571q0 14.116571 10.020571 24.064 9.947429 9.801143 23.844572 9.801143h117.174857q14.043429 0 23.990857-10.020571 9.801143-9.947429 9.801143-23.844572 0-13.824-10.020572-23.844571-9.947429-9.947429-23.771428-9.947429h-43.885715q19.602286-25.746286 48.859429-40.228571 33.645714-16.603429 71.460571-13.750857 50.980571 3.876571 87.478858 40.521143 36.571429 36.571429 40.082285 87.478857 4.242286 60.416-37.010285 104.448-40.96 43.885714-100.937143 43.885714-43.739429 0-79.36-25.161143-34.742857-24.576-49.883429-64.365714-4.388571-11.702857-14.409143-18.797714-10.093714-7.094857-22.308571-7.094857-20.187429 0-32.182857 16.530285-11.922286 16.676571-4.973715 35.401143 24.137143 65.097143 81.334858 104.155429 58.733714 40.155429 130.413714 37.156571 84.260571-33.364571 144.457143-63.561143 60.196571-60.050286 63.634285-144.091428 1.828571-45.494857-14.482285-87.332572-15.725714-40.374857-45.933715-71.68-30.208-31.232-69.924571-48.420571z")},m(t,o){G(t,a,o)},d(t){t&&W(a)}}}function Ei(u){let a;return{c(){a=tt("未播放")},m(t,o){G(t,a,o)},p:nt,d(t){t&&W(a)}}}function Ci(u){let a=u[0].title+"",t,o,n,e=u[0].artist&&dr(u);return{c(){t=tt(a),o=V(),e&&e.c(),n=ke()},m(r,c){G(r,t,c),G(r,o,c),e&&e.m(r,c),G(r,n,c)},p(r,c){c&1&&a!==(a=r[0].title+"")&&at(t,a),r[0].artist?e?e.p(r,c):(e=dr(r),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(r){r&&(W(t),W(o),W(n)),e&&e.d(r)}}}function dr(u){let a,t=u[0].artist+"",o;return{c(){a=tt("- "),o=tt(t)},m(n,e){G(n,a,e),G(n,o,e)},p(n,e){e&1&&t!==(t=n[0].artist+"")&&at(o,t)},d(n){n&&(W(a),W(o))}}}function Ti(u){let a,t,o,n,e,r,c,i,s,l,d,f,p,h,m,g,y,w,v,b=!u[1]&&ur();function E(k,T){return k[0]?Ci:Ei}let j=E(u),x=j(u);return{c(){a=z("div"),t=z("div"),o=z("button"),o.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M853.333333 170.666667a73.142857 73.142857 0 0 1 73.142857 73.142857v536.380952a73.142857 73.142857 0 0 1-73.142857 73.142857H170.666667a73.142857 73.142857 0 0 1-73.142857-73.142857V243.809524a73.142857 73.142857 0 0 1 73.142857-73.142857h682.666666z m0 73.142857H170.666667v536.380952h682.666666V243.809524z m-375.856762 168.057905l120.685715 120.685714 51.687619-51.712 172.422095 172.373333-51.712 51.736381-120.685714-120.685714-51.736381 51.736381-120.685715-120.685714-224.109714 224.109714-51.712-51.687619 275.846095-275.870476zM731.428571 292.571429a48.761905 48.761905 0 1 1 0 97.523809 48.761905 48.761905 0 0 1 0-97.523809z"></path></svg>',n=V(),e=z("button"),e.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M511.292952 121.904762c80.408381 0 155.087238 24.405333 217.136762 66.218667l-49.737143 49.785904a318.756571 318.756571 0 0 0-167.399619-47.152762C334.189714 190.756571 190.610286 334.57981 190.610286 512s143.60381 321.243429 320.682666 321.243429c177.103238 0 320.682667-143.823238 320.682667-321.243429 0-49.127619-11.02019-95.695238-30.72-137.337905l51.102476-51.078095A388.87619 388.87619 0 0 1 900.681143 512c0 215.454476-174.32381 390.095238-389.36381 390.095238C296.228571 902.095238 121.904762 727.454476 121.904762 512S296.228571 121.904762 511.292952 121.904762z m0 137.679238c42.179048 0 81.968762 10.386286 116.906667 28.769524l-51.955809 51.931428a182.54019 182.54019 0 0 0-64.950858-11.849142c-101.180952 0-183.247238 82.16381-183.247238 183.56419 0 101.376 82.041905 183.588571 183.247238 183.588571s183.247238-82.212571 183.247238-183.588571a185.295238 185.295238 0 0 0-2.194285-28.42819l56.344381-56.32c9.435429 26.477714 14.57981 55.003429 14.579809 84.74819 0 139.410286-112.810667 252.416-251.977143 252.416-139.142095 0-251.952762-113.005714-251.952762-252.416s112.810667-252.416 251.952762-252.416zM853.577143 143.433143L902.095238 192.146286 566.613333 527.676952l-51.102476 2.681905 2.535619-51.297524 335.481905-335.62819z"></path></svg>',r=V(),c=z("button"),i=xe("svg"),s=xe("path"),b&&b.c(),l=V(),d=z("div"),f=z("span"),x.c(),p=V(),h=z("div"),m=z("button"),m.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M414.47619 121.904762a73.142857 73.142857 0 0 1 73.142858 73.142857v219.428571a73.142857 73.142857 0 0 1-73.142858 73.142858H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142858V195.047619a73.142857 73.142857 0 0 1 73.142857-73.142857h219.428571zM195.047619 195.047619v219.428571h219.428571V195.047619H195.047619z m219.428571 341.333333a73.142857 73.142857 0 0 1 73.142858 73.142858v219.428571a73.142857 73.142857 0 0 1-73.142858 73.142857H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142857v-219.428571a73.142857 73.142857 0 0 1 73.142857-73.142858h219.428571z m-219.428571 73.142858v219.428571h219.428571v-219.428571H195.047619zM536.380952 182.857143v73.142857h353.52381v-73.142857H536.380952zM536.380952 609.52381v73.142857h353.52381v-73.142857H536.380952z m0-268.190477v73.142857h353.52381v-73.142857H536.380952z m0 426.666667v73.142857h353.52381v-73.142857H536.380952z"></path></svg>',g=V(),y=z("button"),y.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M448.487619 97.52381l130.096762 0.170666c40.399238 0.073143 73.142857 32.792381 73.191619 73.216l0.048762 21.211429a345.283048 345.283048 0 0 1 71.143619 39.960381l17.408-10.044953a73.313524 73.313524 0 0 1 99.961905 26.819048l65.219047 112.566857a73.313524 73.313524 0 0 1-22.893714 97.816381l-3.974095 2.438095-17.481143 10.093715a341.479619 341.479619 0 0 1-1.292191 83.968l12.361143 7.168a73.313524 73.313524 0 0 1 28.867048 96.329142l-2.023619 3.803429-61.098667 105.813333a73.313524 73.313524 0 0 1-96.329143 28.867048l-3.803428-2.048-16.896-9.752381a341.918476 341.918476 0 0 1-68.291048 38.083048l0.024381 29.062095a73.313524 73.313524 0 0 1-68.754286 73.264762l-4.632381 0.146285-130.121142-0.170666a73.313524 73.313524 0 0 1-73.191619-73.216l-0.048762-35.035429a346.599619 346.599619 0 0 1-57.368381-34.035809l-31.158857 17.944381a73.313524 73.313524 0 0 1-99.986286-26.819048l-65.219048-112.566857a73.313524 73.313524 0 0 1 22.918095-97.816381l3.949715-2.438095 31.719619-18.285715c-2.438095-23.161905-2.56-46.665143-0.219429-70.119619l-35.206095-20.333714a73.313524 73.313524 0 0 1-28.891429-96.329143l2.048-3.803428 61.098667-105.813334a73.313524 73.313524 0 0 1 96.329143-28.867047l3.803429 2.048 30.72 17.724952a341.284571 341.284571 0 0 1 64.609523-39.716571l-0.048762-27.89181a73.313524 73.313524 0 0 1 68.754286-73.264762L448.487619 97.52381z m-0.097524 73.313523l0.073143 74.48381-42.130286 19.846095c-18.041905 8.46019-35.05981 18.919619-50.761142 31.158857l-38.936381 30.403048-71.655619-41.398857-1.852953-1.024-61.074286 105.813333 76.239239 44.007619-4.729905 47.104a268.434286 268.434286 0 0 0 0.170666 55.100952l5.022477 47.445334-73.069715 42.081524 65.194667 112.566857 72.557714-41.740191 38.473143 28.184381a272.579048 272.579048 0 0 0 45.226667 26.819048l42.057143 19.772952 0.146285 81.529905 130.072381 0.170667-0.073143-78.019048 45.202286-18.822095a268.629333 268.629333 0 0 0 53.638095-29.915429l38.448762-27.648 57.904762 33.426286 61.049905-105.813333-55.100952-31.890286 6.826666-48.88381a268.190476 268.190476 0 0 0 1.024-65.950476l-5.12-47.494095 58.928762-34.011429-65.219047-112.566857L718.262857 319.390476l-38.497524-28.086857a272.62781 272.62781 0 0 0-56.051809-31.50019l-45.104762-18.724572-0.121905-70.070857-130.096762-0.170667z m145.895619 210.407619a146.773333 146.773333 0 0 1 53.686857 200.362667 146.407619 146.407619 0 0 1-200.167619 53.638095 146.773333 146.773333 0 0 1-53.662476-200.362666 146.407619 146.407619 0 0 1 200.167619-53.638096z m-136.655238 90.258286a73.48419 73.48419 0 0 0 26.86781 100.278857 73.118476 73.118476 0 0 0 99.961904-26.770285c19.529143-33.865143 9.020952-76.824381-23.186285-98.03581l-3.657143-2.267429-3.803429-2.048a73.118476 73.118476 0 0 0-96.182857 28.842667z"></path></svg>',S(o,"class","control-btn"),S(o,"title","截图"),S(e,"class","control-btn"),S(e,"title","添加时间戳"),S(s,"d","M1020.562286 846.555429q0 43.885714-43.885715 43.885714h-50.029714v85.284571q0 18.212571-12.873143 31.085715t-31.012571 12.873142q-43.885714 0-43.885714-43.885714v-85.357714H140.726857q-43.885714 0-43.885714-43.885714V215.04H45.348571q-43.885714 0-43.885714-43.885714t43.885714-43.885715h51.565715V48.493714q0-43.885714 43.885714-43.885714t43.885714 43.885714V127.268571h698.148572q18.139429 0 31.012571 12.873143 12.8 12.873143 12.8 31.012572v631.588571h50.102857q43.885714 0 43.885715 43.812572z m-181.686857-43.885715V215.04H184.612571v587.702857h654.262858z"),S(i,"viewBox","0 0 1024 1024"),S(i,"class","icon"),S(c,"class","control-btn"),S(c,"title","循环片段"),S(t,"class","left-controls"),S(f,"class","media-title"),S(d,"class","title-area"),S(m,"class","control-btn"),S(m,"title","播放列表"),S(y,"class","control-btn"),S(y,"title","设置"),S(h,"class","right-controls"),S(a,"class","control-bar")},m(k,T){G(k,a,T),F(a,t),F(t,o),F(t,n),F(t,e),F(t,r),F(t,c),F(c,i),F(i,s),b&&b.m(i,null),F(a,l),F(a,d),F(d,f),x.m(f,null),F(a,p),F(a,h),F(h,m),F(h,g),F(h,y),w||(v=[Z(o,"click",u[2]),Z(e,"click",u[3]),Z(c,"click",u[4]),Z(m,"click",u[5]),Z(y,"click",u[6])],w=!0)},p(k,[T]){k[1]?b&&(b.d(1),b=null):b||(b=ur(),b.c(),b.m(i,null)),j===(j=E(k))&&x?x.p(k,T):(x.d(1),x=j(k),x&&(x.c(),x.m(f,null)))},i:nt,o:nt,d(k){k&&W(a),b&&b.d(),x.d(),w=!1,st(v)}}}function _i(u,a,t){const o=De();let{currentItem:n=null}=a,{loopStartTime:e=null}=a;function r(){o("screenshot")}function c(){if(!n){q.showMessage("请先播放媒体");return}o("timestamp")}function i(){if(!n){q.showMessage("请先播放媒体");return}e===null?(o("loopSegment",{action:"start"}),q.showMessage("已记录循环片段开始时间")):(o("loopSegment",{action:"end"}),q.showMessage("已记录循环片段结束时间"))}function s(){o("playlist")}function l(){o("settings")}return u.$$set=d=>{"currentItem"in d&&t(0,n=d.currentItem),"loopStartTime"in d&&t(1,e=d.loopStartTime)},[n,e,r,c,i,s,l]}class Ii extends Xt{constructor(a){super(),Qt(this,a,_i,Ti,Gt,{currentItem:0,loopStartTime:1})}}class Mi{constructor(a,t){et(this,"configManager");et(this,"playlist");et(this,"isListening",!1);et(this,"openTabCallback");et(this,"clickHandler",null);this.configManager=a,this.openTabCallback=t}startListening(){this.isListening||(this.clickHandler=async a=>{const t=a.target;if(!t.matches('span[data-type="a"]'))return;a.preventDefault(),a.stopPropagation();const o=t.getAttribute("data-href");o&&await this.handleMediaLink(o)},document.addEventListener("click",this.clickHandler,!0),this.isListening=!0)}async parseMediaLink(a){try{const t=new URL(a),o={},n=t.searchParams.get("t")||"";if(n&&n.includes("~")){const[e,r]=n.split("~").map(Number);!isNaN(e)&&!isNaN(r)&&e<r&&(o.start=e,o.end=r)}return mt.isBilibiliLink(a)?{mediaUrl:await mt.parseUrl(a),timeParams:o}:{mediaUrl:a,timeParams:o}}catch(t){throw console.error("[LinkHandler] 解析链接失败:",t),new Error("无效的媒体链接")}}async handleMediaLink(a){try{if(!this.playlist&&(this.openTabCallback(),await new Promise(e=>setTimeout(e,100)),!this.playlist))throw new Error("播放列表组件初始化失败");const{mediaUrl:t,timeParams:o}=await this.parseMediaLink(a),n=await bt.createMediaItem(t,{startTime:o==null?void 0:o.start,endTime:o==null?void 0:o.end,originalUrl:a});if(!n)throw new Error("无法解析媒体信息");await this.playlist.handleMediaItem(n)}catch(t){console.error("[LinkHandler] 处理链接失败:",t),q.showMessage(t.message||"播放失败，请重试")}}setPlaylist(a){this.playlist=a}stopListening(){this.clickHandler&&document.removeEventListener("click",this.clickHandler,!0),this.isListening=!1}}function fr(u){let a,t,o={configManager:u[1],currentItem:u[7]};return a=new pi({props:o}),u[18](a),a.$on("select",u[14]),a.$on("play",u[15]),{c(){ae(a.$$.fragment)},m(n,e){qt(a,n,e),t=!0},p(n,e){const r={};e&2&&(r.configManager=n[1]),e&128&&(r.currentItem=n[7]),a.$set(r)},i(n){t||(ct(a.$$.fragment,n),t=!0)},o(n){yt(a.$$.fragment,n),t=!1},d(n){u[18](null),Wt(a,n)}}}function pr(u){let a,t;return a=new ki({props:{group:"mediaPlayer",configManager:u[1]}}),a.$on("changed",u[10]),{c(){ae(a.$$.fragment)},m(o,n){qt(a,o,n),t=!0},p(o,n){const e={};n&2&&(e.configManager=o[1]),a.$set(e)},i(o){t||(ct(a.$$.fragment,o),t=!0)},o(o){yt(a.$$.fragment,o),t=!1},d(o){Wt(a,o)}}}function ji(u){let a,t,o,n,e,r,c,i,s,l,d,f,p,h={app:u[0],config:u[8]};n=new fn({props:h}),u[17](n),c=new Ii({props:{currentItem:u[7],loopStartTime:u[9]}}),c.$on("screenshot",u[13]),c.$on("timestamp",u[13]),c.$on("loopSegment",u[13]),c.$on("playlist",u[13]),c.$on("settings",u[13]);let m=u[5]&&fr(u),g=u[6]&&pr(u);return{c(){a=z("div"),t=z("div"),o=z("div"),ae(n.$$.fragment),e=V(),r=z("div"),ae(c.$$.fragment),i=V(),s=z("div"),m&&m.c(),l=V(),g&&g.c(),S(r,"class","control-bar"),ut(r,"hidden",!u[4]),S(o,"class","player-area"),S(s,"class","sidebar"),ut(s,"show",u[5]||u[6]),S(t,"class","content-area"),ut(t,"with-sidebar",u[5]||u[6]),S(a,"class","media-player-tab")},m(y,w){G(y,a,w),F(a,t),F(t,o),qt(n,o,null),F(o,e),F(o,r),qt(c,r,null),F(t,i),F(t,s),m&&m.m(s,null),F(s,l),g&&g.m(s,null),d=!0,f||(p=[Z(a,"mousemove",u[11]),Z(a,"mouseleave",u[12])],f=!0)},p(y,[w]){const v={};w&1&&(v.app=y[0]),w&256&&(v.config=y[8]),n.$set(v);const b={};w&128&&(b.currentItem=y[7]),w&512&&(b.loopStartTime=y[9]),c.$set(b),(!d||w&16)&&ut(r,"hidden",!y[4]),y[5]?m?(m.p(y,w),w&32&&ct(m,1)):(m=fr(y),m.c(),ct(m,1),m.m(s,l)):m&&(Ve(),yt(m,1,1,()=>{m=null}),qe()),y[6]?g?(g.p(y,w),w&64&&ct(g,1)):(g=pr(y),g.c(),ct(g,1),g.m(s,null)):g&&(Ve(),yt(g,1,1,()=>{g=null}),qe()),(!d||w&96)&&ut(s,"show",y[5]||y[6]),(!d||w&96)&&ut(t,"with-sidebar",y[5]||y[6])},i(y){d||(ct(n.$$.fragment,y),ct(c.$$.fragment,y),ct(m),ct(g),d=!0)},o(y){yt(n.$$.fragment,y),yt(c.$$.fragment,y),yt(m),yt(g),d=!1},d(y){y&&W(a),u[17](null),Wt(n),Wt(c),m&&m.d(),g&&g.d(),f=!1,st(p)}}}function Si(){var t;const u=window.getSelection();if(!u||!u.focusNode)throw new Error("未找到光标位置");let a=u.focusNode;for(;a&&!((t=a.dataset)!=null&&t.nodeId);)a=a.parentElement;if(!a||!a.dataset.nodeId)throw new Error("未找到目标块");return a.dataset.nodeId}function Ot(u){const a=Math.floor(u/60),t=Math.floor(u%60);return`${a}:${t.toString().padStart(2,"0")}`}function Fi(u,a,t){let{app:o}=a,{configManager:n}=a,{linkHandler:e}=a,r=!0,c,i=!1,s=!1,l=null,d,f,p=null,h;globalThis.Lute.New;async function m(_){try{const D=Si();if(!(await fetch("/api/block/insertBlock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:_,dataType:"markdown",parentID:D})})).ok)throw new Error("插入块失败");q.showMessage("链接已插入")}catch(D){console.error("[MediaPlayerTab] 插入块失败:",D),await navigator.clipboard.writeText(_),q.showMessage("插入失败，已复制到剪贴板")}}jt(async()=>{const _=await n.load();t(8,f=_.settings),e&&(console.log("[MediaPlayerTab] 设置播放列表实例"),e.setPlaylist(h))});function g(_){const{settings:D}=_.detail;t(8,f=D),d&&d.updateConfig(D)}function y(){t(4,r=!0),clearTimeout(c),c=window.setTimeout(()=>{t(4,r=!1)},3e3)}function w(){clearTimeout(c),t(4,r=!1)}function v(_,D={isLoop:!1,count:0}){if(!d||!_)return null;try{const C=D.startTime??d.getCurrentTime(),I=D.endTime??(D.isLoop?C+3:void 0),M=_.originalUrl||_.url,$=new URL(M);if($.searchParams.delete("t"),$.searchParams.delete("loop"),$.searchParams.delete("count"),D.isLoop&&I){$.searchParams.set("t",`${C.toFixed(1)}-${I.toFixed(1)}`),$.searchParams.set("loop","true"),$.searchParams.set("count",D.count.toString()||"3");const P=Ot(C),L=Ot(I);return`[${P}-${L}](${$.toString()})`}else return $.searchParams.set("t",C.toFixed(1)),`[${Ot(C)}](${$.toString()})`}catch(C){return console.error("[MediaPlayerTab] 生成链接失败:",C),null}}async function b(){if(!d)return null;try{const _=await d.getScreenshotDataURL();return _?await(await fetch(_)).blob():null}catch(_){return console.error("[MediaPlayerTab] 截图失败:",_),null}}async function E(_){switch(_.type){case"screenshot":if(d&&l)try{const C=await b();if(C){const I=new Date().getTime(),M=`${l.title||"screenshot"}_${I}.png`,$=new FormData;$.append("file[]",C,M);const P=await fetch("/api/asset/upload",{method:"POST",body:$});if(!P.ok)throw new Error("上传图片失败");const L=await P.json();if(L.code!==0)throw new Error(L.msg||"上传图片失败");const R=L.data.succMap[M],O=`![${M}](${R})`;await m(O),q.showMessage("截图已插入")}else q.showMessage("截图失败，请确保视频正在播放")}catch(C){console.error("[MediaPlayerTab] 截图失败:",C),q.showMessage("截图失败，请重试")}else q.showMessage("请先播放视频");break;case"timestamp":if(d&&l){const C=v(l,{isLoop:!1,count:0});C&&await m(C)}else q.showMessage("请先播放媒体");break;case"loopSegment":if(!d||!l)return;const D=d.getCurrentTime();if(p===null)t(9,p=D),q.showMessage("已记录循环片段开始时间");else{const C=new URL(l.originalUrl||l.url);C.searchParams.set("t",`${p}~${D}`);const M=`[${Ot(p)+"~"+Ot(D)}](${C.toString()})`;try{await m(M),q.showMessage("已插入循环片段链接")}catch($){console.error("[MediaPlayerTab] 插入循环片段链接失败:",$),await navigator.clipboard.writeText(M),q.showMessage("已复制循环片段链接")}t(9,p=null)}break;case"playlist":t(5,i=!i),i&&t(6,s=!1);break;case"settings":t(6,s=!s),s&&t(5,i=!1);break}}function j(_){t(7,l=_.detail)}async function x(_){t(7,l=_.detail),d&&(l.type==="bilibili"?d.play(l.url,{type:"bilibili",bvid:l.bvid,originalUrl:l.originalUrl||l.url,audioUrl:l.audioUrl,headers:l.headers,title:l.title,autoplay:f==null?void 0:f.autoplay,startTime:l.startTime,endTime:l.endTime,isLoop:l.isLoop,loopCount:l.loopCount}):d.play(l.url,{originalUrl:l.originalUrl||l.url,autoplay:f==null?void 0:f.autoplay,startTime:l.startTime,endTime:l.endTime,isLoop:l.isLoop,loopCount:l.loopCount}))}async function k(_){const{type:D,url:C,options:I}=_.detail;if(D==="bilibili"&&(l!=null&&l.bvid)&&(l!=null&&l.cid))try{console.log("[播放器] 重新获取B站播放流");const M=await n.getConfig(),$=await mt.getProcessedVideoStream(l.bvid,l.cid,0,M,l.page);d&&d.play($.video.url,{type:"bilibili",audioUrl:$.audio.url,headers:$.headers,title:l.title})}catch(M){console.error("[播放器] 重新获取播放流失败:",M),q.showMessage("视频播放失败，请稍后重试")}}jt(()=>{const _=document.querySelector(".artplayer-app");return _&&_.addEventListener("streamError",k),()=>{_&&_.removeEventListener("streamError",k)}});function T(_){St[_?"unshift":"push"](()=>{d=_,t(2,d)})}function B(_){St[_?"unshift":"push"](()=>{h=_,t(3,h)})}return u.$$set=_=>{"app"in _&&t(0,o=_.app),"configManager"in _&&t(1,n=_.configManager),"linkHandler"in _&&t(16,e=_.linkHandler)},u.$$.update=()=>{u.$$.dirty&4&&d&&setTimeout(()=>{console.log("[MediaPlayerTab] 播放器就绪")},100),u.$$.dirty&65544&&h&&e&&(console.log("[MediaPlayerTab] 播放列表就绪，更新 LinkHandler"),e.setPlaylist(h))},[o,n,d,h,r,i,s,l,f,p,g,y,w,E,j,x,e,T,B]}class Ai extends Xt{constructor(a){super(),Qt(this,a,Fi,ji,Gt,{app:0,configManager:1,linkHandler:16})}}class Di{constructor(a){et(this,"plugin");et(this,"config");this.plugin=a,this.config=this.getDefaultConfig()}getDefaultConfig(){return{playlists:[{id:"default",name:"默认列表",items:[],isFixed:!0},{id:"favorites",name:"收藏夹",items:[],isFixed:!0}],settings:{volume:70,speed:100,hotkey:!0,loop:!1,autoplay:!1}}}async load(){try{const a=await this.plugin.loadData("config.json");a&&(this.config={...this.config,...a})}catch(a){console.error("Failed to load config:",a)}return this.config}async save(){try{await this.plugin.saveData("config.json",this.config)}catch(a){console.error("Failed to save config:",a)}}async updatePlaylists(a){this.config.playlists=a,await this.save()}async updateSettings(a){this.config.settings=a,await this.save()}getConfig(){return this.config}}class Pi extends q.Plugin{constructor(){super(...arguments);et(this,"configManager");et(this,"linkHandler");et(this,"mediaPlayerTab");et(this,"activeContainer",null);et(this,"TAB_TYPE","custom_tab");et(this,"isMobile")}async onload(){console.log("思源媒体播放器加载");const t=q.getFrontend();this.isMobile=t==="mobile"||t==="browser-mobile",this.addIcons(`<symbol id="iconMediaPlayer" viewBox="0 0 1024 1024">
            <path d="M513.792 514.5088m-457.0112 0a457.0112 457.0112 0 1 0 914.0224 0 457.0112 457.0112 0 1 0-914.0224 0Z" fill="#8C7BFD"></path>
            <path d="M440.6272 732.16c-17.6128 0-35.2768-4.6592-51.3024-13.9264-32.1536-18.5344-51.3024-51.7632-51.3024-88.8832V399.6672c0-37.12 19.2-70.3488 51.3024-88.8832 32.1536-18.5856 70.5024-18.5344 102.656 0l198.912 114.8416c32.1536 18.5344 51.3024 51.7632 51.3024 88.8832s-19.2 70.3488-51.3024 88.8832l-198.912 114.8416c-16.0768 9.2672-33.7408 13.9264-51.3536 13.9264z m0.0512-332.6976c-0.1024 0-0.3072 0.1024-0.4096 0.2048l0.1024 229.6832c0 0.1536 0.256 0.3072 0.4096 0.3072l198.8608-114.944c0.1536-0.0512 0.1536-0.3584 0.1024-0.512l-0.1024 0.1024-198.8608-114.8416h-0.1024z" fill="#FFE37B"></path>
        </symbol>`),this.configManager=new Di(this),await this.configManager.load(),this.addTopBar({icon:"iconMediaPlayer",title:this.i18n.name,position:"right",callback:()=>{this.openMediaPlayerTab()}}),this.registerHotkeys(),this.linkHandler=new Mi(this.configManager,()=>this.openMediaPlayerTab()),this.linkHandler.startListening()}onLayoutReady(){console.log("思源媒体播放器布局加载完成")}onunload(){var t;console.log("思源媒体播放器卸载");try{if((t=this.mediaPlayerTab)!=null&&t.player){if(typeof this.mediaPlayerTab.player.pause=="function"&&this.mediaPlayerTab.player.pause(),this.mediaPlayerTab.player.plugins){const o=this.mediaPlayerTab.player.plugins.bilibili;o&&typeof o.destroy=="function"&&o.destroy()}this.mediaPlayerTab.player.destroy(!0)}this.linkHandler&&this.linkHandler.stopListening(),this.mediaPlayerTab=null,this.activeContainer=null}catch(o){console.error("插件卸载时清理播放器失败:",o)}}registerHotkeys(){this.addCommand({langKey:"screenshot",langText:this.i18n.screenshot.text,hotkey:"",callback:()=>{this.handleHotkeyAction("screenshot")}}),this.addCommand({langKey:"timestamp",langText:this.i18n.timestamp.text,hotkey:"",callback:()=>{this.handleHotkeyAction("timestamp")}}),this.addCommand({langKey:"loopSegment",langText:this.i18n.loopSegment.text,hotkey:"",callback:()=>{this.handleHotkeyAction("loopSegment")}})}async handleHotkeyAction(t){if(!this.activeContainer){q.showMessage(this.i18n.openPlayer);return}const o=this.activeContainer.querySelector(".control-bar");if(!o){q.showMessage(this.i18n.playerNotReady);return}const n={screenshot:this.i18n.screenshot.name,timestamp:this.i18n.timestamp.name,loopSegment:this.i18n.loopSegment.name}[t],e=o.querySelector(`button[title="${n}"]`);e instanceof HTMLElement?e.click():(console.warn(`找不到标题为 "${n}" 的按钮`),q.showMessage(this.i18n.buttonNotFound))}openMediaPlayerTab(){const t=this;this.addTab({type:this.TAB_TYPE,init(){const o=document.createElement("div");o.className="media-player-container",t.activeContainer=o,t.mediaPlayerTab=new Ai({target:o,props:{app:t.app,configManager:t.configManager,linkHandler:t.linkHandler}}),this.element.appendChild(o)},destroy(){var o,n;console.log("Destroying media player tab");try{if((o=t.mediaPlayerTab)!=null&&o.player){if(typeof t.mediaPlayerTab.player.pause=="function"&&t.mediaPlayerTab.player.pause(),t.mediaPlayerTab.player.plugins){const e=t.mediaPlayerTab.player.plugins.bilibili;e&&typeof e.destroy=="function"&&e.destroy()}t.mediaPlayerTab.player.destroy(!0)}(n=t.mediaPlayerTab)!=null&&n.$destroy&&t.mediaPlayerTab.$destroy()}catch(e){console.error("销毁播放器失败:",e)}t.mediaPlayerTab=null,t.activeContainer=null}}),q.openTab({app:this.app,custom:{icon:"iconMediaPlayer",title:this.i18n.name,id:this.name+this.TAB_TYPE}})}}exports.MediaPlayerPlugin=Pi;exports.commonjsGlobal=Te;exports.commonjsRequire=_e;exports.getDefaultExportFromCjs=$e;
